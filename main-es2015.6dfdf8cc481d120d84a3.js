(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/RX3":function(t,e,n){function r(t){if(t)return function(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}(t)}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var s=0;s<r.length;s++)if((n=r[s])===e||n.fn===e){r.splice(s,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n)for(var r=0,s=(n=n.slice(0)).length;r<s;++r)n[r].apply(this,e);return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},0:function(t,e,n){t.exports=n("zUnb")},"0+mJ":function(t,e,n){var r=n("fg2H"),s=n("K/+X"),i=n("rfC7"),o=n("YzUL");e.polling=function(t){var e=!1,n=!1,o=!1!==t.jsonp;if("undefined"!=typeof location){var l="https:"===location.protocol,a=location.port;a||(a=l?443:80),e=t.hostname!==location.hostname||a!==t.port,n=t.secure!==l}if(t.xdomain=e,t.xscheme=n,"open"in new r(t)&&!t.forceJSONP)return new s(t);if(!o)throw new Error("JSONP disabled");return new i(t)},e.websocket=o},"0Agi":function(t,e){var n=1e3,r=6e4,s=36e5,i=24*s;function o(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}t.exports=function(t,e){e=e||{};var l,a=typeof t;if("string"===a&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var o=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"days":case"day":case"d":return o*i;case"hours":case"hour":case"hrs":case"hr":case"h":return o*s;case"minutes":case"minute":case"mins":case"min":case"m":return o*r;case"seconds":case"second":case"secs":case"sec":case"s":return o*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(t);if("number"===a&&!1===isNaN(t))return e.long?o(l=t,i,"day")||o(l,s,"hour")||o(l,r,"minute")||o(l,n,"second")||l+" ms":function(t){return t>=i?Math.round(t/i)+"d":t>=s?Math.round(t/s)+"h":t>=r?Math.round(t/r)+"m":t>=n?Math.round(t/n)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},"0zaL":function(t,e,n){var r=n("hWa/"),s=n("/RX3");function i(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.isReactNative=t.isReactNative,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}t.exports=i,s(i.prototype),i.prototype.onError=function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this},i.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},i.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},i.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},i.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},i.prototype.onData=function(t){var e=r.decodePacket(t,this.socket.binaryType);this.onPacket(e)},i.prototype.onPacket=function(t){this.emit("packet",t)},i.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},1:function(t,e){},"14A5":function(t,e){var n=void 0!==n?n:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,r=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),s=r&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),i=n&&n.prototype.append&&n.prototype.getBlob;function o(t){return t.map((function(t){if(t.buffer instanceof ArrayBuffer){var e=t.buffer;if(t.byteLength!==e.byteLength){var n=new Uint8Array(t.byteLength);n.set(new Uint8Array(e,t.byteOffset,t.byteLength)),e=n.buffer}return e}return t}))}function l(t,e){e=e||{};var r=new n;return o(t).forEach((function(t){r.append(t)})),e.type?r.getBlob(e.type):r.getBlob()}function a(t,e){return new Blob(o(t),e||{})}"undefined"!=typeof Blob&&(l.prototype=Blob.prototype,a.prototype=Blob.prototype),t.exports=r?s?Blob:a:i?l:void 0},"3exg":function(t,e,n){var r=n("0zaL"),s=n("TypT"),i=n("hWa/"),o=n("Yvos"),l=n("Aplp"),a=n("Bn1Y")("engine.io-client:polling");t.exports=u;var c=null!=new(n("fg2H"))({xdomain:!1}).responseType;function u(t){c&&!(t&&t.forceBase64)||(this.supportsBinary=!1),r.call(this,t)}o(u,r),u.prototype.name="polling",u.prototype.doOpen=function(){this.poll()},u.prototype.pause=function(t){var e=this;function n(){a("paused"),e.readyState="paused",t()}if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(a("we are currently polling - waiting to pause"),r++,this.once("pollComplete",(function(){a("pre-pause polling complete"),--r||n()}))),this.writable||(a("we are currently writing - waiting to pause"),r++,this.once("drain",(function(){a("pre-pause writing complete"),--r||n()})))}else n()},u.prototype.poll=function(){a("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},u.prototype.onData=function(t){var e=this;a("polling got data %s",t),i.decodePayload(t,this.socket.binaryType,(function(t,n,r){if("opening"===e.readyState&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():a('ignoring poll - transport state "%s"',this.readyState))},u.prototype.doClose=function(){var t=this;function e(){a("writing close packet"),t.write([{type:"close"}])}"open"===this.readyState?(a("transport open - closing"),e()):(a("transport not open - deferring close"),this.once("open",e))},u.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit("drain")};i.encodePayload(t,this.supportsBinary,(function(t){e.doWrite(t,n)}))},u.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(t[this.timestampParam]=l()),this.supportsBinary||t.sid||(t.b64=1),t=s.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(n=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t}},"4+Ds":function(t,e,n){t.exports=n("uKDP"),t.exports.parser=n("hWa/")},"6C75":function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},"7jRU":function(t,e){var n=[].indexOf;t.exports=function(t,e){if(n)return t.indexOf(e);for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}},Aplp:function(t,e,n){"use strict";var r,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i={},o=0,l=0;function a(t){var e="";do{e=s[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function c(){var t=a(+new Date);return t!==r?(o=0,r=t):t+"."+a(o++)}for(;l<64;l++)i[s[l]]=l;c.encode=a,c.decode=function(t){var e=0;for(l=0;l<t.length;l++)e=64*e+i[t.charAt(l)];return e},t.exports=c},Bn1Y:function(t,e,n){e.log=function(...t){return"object"==typeof console&&console.log&&console.log(...t)},e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let r=0,s=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(r++,"%c"===t&&(s=r))}),e.splice(s,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(n){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(n){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=n("c3Nh")(e);const{formatters:r}=t.exports;r.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},C2QD:function(t,e){function n(t){this.ms=(t=t||{}).min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}},"Id/V":function(t,e){t.exports=function(t){return n&&Buffer.isBuffer(t)||r&&(t instanceof ArrayBuffer||function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer}(t))};var n="function"==typeof Buffer&&"function"==typeof Buffer.isBuffer,r="function"==typeof ArrayBuffer},"K/+X":function(t,e,n){var r=n("fg2H"),s=n("3exg"),i=n("/RX3"),o=n("Yvos"),l=n("Bn1Y")("engine.io-client:polling-xhr");function a(){}function c(t){if(s.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,"undefined"!=typeof location){var e="https:"===location.protocol,n=location.port;n||(n=e?443:80),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||n!==t.port,this.xs=t.secure!==e}}function u(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}if(t.exports=c,t.exports.Request=u,o(c,s),c.prototype.supportsBinary=!0,c.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.withCredentials=this.withCredentials,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new u(t)},c.prototype.doWrite=function(t,e){var n=this.request({method:"POST",data:t,isBinary:"string"!=typeof t&&void 0!==t}),r=this;n.on("success",e),n.on("error",(function(t){r.onError("xhr post error",t)})),this.sendXhr=n},c.prototype.doPoll=function(){l("xhr poll");var t=this.request(),e=this;t.on("data",(function(t){e.onData(t)})),t.on("error",(function(t){e.onError("xhr poll error",t)})),this.pollXhr=t},i(u.prototype),u.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new r(t),n=this;try{l("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var s in e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(s)&&e.setRequestHeader(s,this.extraHeaders[s])}catch(i){}if("POST"===this.method)try{e.setRequestHeader("Content-type",this.isBinary?"application/octet-stream":"text/plain;charset=UTF-8")}catch(i){}try{e.setRequestHeader("Accept","*/*")}catch(i){}"withCredentials"in e&&(e.withCredentials=this.withCredentials),this.requestTimeout&&(e.timeout=this.requestTimeout),this.hasXDR()?(e.onload=function(){n.onLoad()},e.onerror=function(){n.onError(e.responseText)}):e.onreadystatechange=function(){if(2===e.readyState)try{var t=e.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&(e.responseType="arraybuffer")}catch(i){}4===e.readyState&&(200===e.status||1223===e.status?n.onLoad():setTimeout((function(){n.onError("number"==typeof e.status?e.status:0)}),0))},l("xhr data %s",this.data),e.send(this.data)}catch(i){return void setTimeout((function(){n.onError(i)}),0)}"undefined"!=typeof document&&(this.index=u.requestsCount++,u.requests[this.index]=this)},u.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},u.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},u.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},u.prototype.cleanup=function(t){if(null!=this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=a:this.xhr.onreadystatechange=a,t)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete u.requests[this.index],this.xhr=null}},u.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch(n){}t=("application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&this.xhr.response||this.xhr.responseText}catch(n){this.onError(n)}null!=t&&this.onData(t)},u.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},u.prototype.abort=function(){this.cleanup()},u.requestsCount=0,u.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",d);else if("function"==typeof addEventListener){var h="onpagehide"in self?"pagehide":"unload";addEventListener(h,d,!1)}function d(){for(var t in u.requests)u.requests.hasOwnProperty(t)&&u.requests[t].abort()}},"M/K+":function(t,e,n){var r=n("Qsis"),s=n("Id/V"),i=Object.prototype.toString,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===i.call(Blob),l="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===i.call(File);e.deconstructPacket=function(t){var e=[],n=t;return n.data=function t(e,n){if(!e)return e;if(s(e)){var i={_placeholder:!0,num:n.length};return n.push(e),i}if(r(e)){for(var o=new Array(e.length),l=0;l<e.length;l++)o[l]=t(e[l],n);return o}if("object"==typeof e&&!(e instanceof Date)){for(var a in o={},e)o[a]=t(e[a],n);return o}return e}(t.data,e),n.attachments=e.length,{packet:n,buffers:e}},e.reconstructPacket=function(t,e){return t.data=function t(e,n){if(!e)return e;if(e&&e._placeholder)return n[e.num];if(r(e))for(var s=0;s<e.length;s++)e[s]=t(e[s],n);else if("object"==typeof e)for(var i in e)e[i]=t(e[i],n);return e}(t.data,e),t.attachments=void 0,t},e.removeBlobs=function(t,e){var n=0,i=t;!function t(a,c,u){if(!a)return a;if(o&&a instanceof Blob||l&&a instanceof File){n++;var h=new FileReader;h.onload=function(){u?u[c]=this.result:i=this.result,--n||e(i)},h.readAsArrayBuffer(a)}else if(r(a))for(var d=0;d<a.length;d++)t(a[d],d,a);else if("object"==typeof a&&!s(a))for(var p in a)t(a[p],p,a)}(i),n||e(i)}},OAgL:function(t,e,n){var r=n("s1oe"),s=n("/RX3"),i=n("kSER"),o=n("Y4EA"),l=n("QN7Q"),a=n("Bn1Y")("socket.io-client:socket"),c=n("TypT"),u=n("WLGk");t.exports=p;var h={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},d=s.prototype.emit;function p(t,e,n){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}s(p.prototype),p.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[o(t,"open",l(this,"onopen")),o(t,"packet",l(this,"onpacket")),o(t,"close",l(this,"onclose"))]}},p.prototype.open=p.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},p.prototype.send=function(){var t=i(arguments);return t.unshift("message"),this.emit.apply(this,t),this},p.prototype.emit=function(t){if(h.hasOwnProperty(t))return d.apply(this,arguments),this;var e=i(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:u(e))?r.BINARY_EVENT:r.EVENT,data:e,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(a("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},p.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},p.prototype.onopen=function(){if(a("transport is open - connecting"),"/"!==this.nsp)if(this.query){var t="object"==typeof this.query?c.encode(this.query):this.query;a("sending connect packet with query %s",t),this.packet({type:r.CONNECT,query:t})}else this.packet({type:r.CONNECT})},p.prototype.onclose=function(t){a("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},p.prototype.onpacket=function(t){if(t.nsp===this.nsp||t.type===r.ERROR&&"/"===t.nsp)switch(t.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(t);break;case r.ACK:case r.BINARY_ACK:this.onack(t);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",t.data)}},p.prototype.onevent=function(t){var e=t.data||[];a("emitting event %j",e),null!=t.id&&(a("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?d.apply(this,e):this.receiveBuffer.push(e)},p.prototype.ack=function(t){var e=this,n=!1;return function(){if(!n){n=!0;var s=i(arguments);a("sending ack %j",s),e.packet({type:u(s)?r.BINARY_ACK:r.ACK,id:t,data:s})}}},p.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(a("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):a("bad ack %s",t.id)},p.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},p.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)d.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},p.prototype.ondisconnect=function(){a("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},p.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},p.prototype.close=p.prototype.disconnect=function(){return this.connected&&(a("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},p.prototype.compress=function(t){return this.flags.compress=t,this},p.prototype.binary=function(t){return this.flags.binary=t,this}},QN7Q:function(t,e){var n=[].slice;t.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return e.apply(t,r.concat(n.call(arguments)))}}},Qsis:function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},Rpy8:function(t,e,n){function r(t){var n;function r(){if(r.enabled){var t=r,s=+new Date,i=s-(n||s);t.diff=i,t.prev=n,t.curr=s,n=s;for(var o=new Array(arguments.length),l=0;l<o.length;l++)o[l]=arguments[l];o[0]=e.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var a=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;a++;var s=e.formatters[r];return"function"==typeof s&&(n=s.call(t,o[a]),o.splice(a,1),a--),n})),e.formatArgs.call(t,o);var c=r.log||e.log||console.log.bind(console);c.apply(t,o)}}return r.namespace=t,r.enabled=e.enabled(t),r.useColors=e.useColors(),r.color=function(t){var n,r=0;for(n in t)r=(r<<5)-r+t.charCodeAt(n),r|=0;return e.colors[Math.abs(r)%e.colors.length]}(t),r.destroy=s,"function"==typeof e.init&&e.init(r),e.instances.push(r),r}function s(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=r.debug=r.default=r).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var n;e.save(t),e.names=[],e.skips=[];var r=("string"==typeof t?t:"").split(/[\s,]+/),s=r.length;for(n=0;n<s;n++)r[n]&&("-"===(t=r[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(n=0;n<e.instances.length;n++){var i=e.instances[n];i.enabled=e.enabled(i.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n("0Agi"),e.instances=[],e.names=[],e.skips=[],e.formatters={}},TypT:function(t,e){e.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},e.decode=function(t){for(var e={},n=t.split("&"),r=0,s=n.length;r<s;r++){var i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}},Uxeu:function(t,e){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,s=t.indexOf("["),i=t.indexOf("]");-1!=s&&-1!=i&&(t=t.substring(0,s)+t.substring(s,i).replace(/:/g,";")+t.substring(i,t.length));for(var o=n.exec(t||""),l={},a=14;a--;)l[r[a]]=o[a]||"";return-1!=s&&-1!=i&&(l.source=e,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l}},WLGk:function(t,e,n){var r=n("6C75"),s=Object.prototype.toString,i="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===s.call(Blob),o="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===s.call(File);t.exports=function t(e){if(!e||"object"!=typeof e)return!1;if(r(e)){for(var n=0,s=e.length;n<s;n++)if(t(e[n]))return!0;return!1}if("function"==typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(e)||"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||i&&e instanceof Blob||o&&e instanceof File)return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)&&t(e[l]))return!0;return!1}},Y4EA:function(t,e){t.exports=function(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}},Yvos:function(t,e){t.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},YzUL:function(t,e,n){var r,s,i=n("0zaL"),o=n("hWa/"),l=n("TypT"),a=n("Yvos"),c=n("Aplp"),u=n("Bn1Y")("engine.io-client:websocket");if("undefined"!=typeof WebSocket?r=WebSocket:"undefined"!=typeof self&&(r=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{s=n(1)}catch(p){}var h=r||s;function d(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=r&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(h=s),i.call(this,t)}t.exports=d,a(d,i),d.prototype.name="websocket",d.prototype.supportsBinary=!0,d.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?e?new h(t,e):new h(t):new h(t,e,n)}catch(r){return this.emit("error",r)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},d.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},d.prototype.write=function(t){var e=this;this.writable=!1;for(var n=t.length,r=0,s=n;r<s;r++)!function(t){o.encodePacket(t,e.supportsBinary,(function(r){if(!e.usingBrowserWebSocket){var s={};t.options&&(s.compress=t.options.compress),e.perMessageDeflate&&("string"==typeof r?Buffer.byteLength(r):r.length)<e.perMessageDeflate.threshold&&(s.compress=!1)}try{e.usingBrowserWebSocket?e.ws.send(r):e.ws.send(r,s)}catch(p){u("websocket closed before onclose event")}--n||(e.emit("flush"),setTimeout((function(){e.writable=!0,e.emit("drain")}),0))}))}(t[r])},d.prototype.onClose=function(){i.prototype.onClose.call(this)},d.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},d.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";return this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||(t.b64=1),(t=l.encode(t)).length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t},d.prototype.check=function(){return!(!h||"__initialize"in h&&this.name===d.prototype.name)}},c3EK:function(t,e){var n,r,s,i=String.fromCharCode;function o(t){for(var e,n,r=[],s=0,i=t.length;s<i;)(e=t.charCodeAt(s++))>=55296&&e<=56319&&s<i?56320==(64512&(n=t.charCodeAt(s++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),s--):r.push(e);return r}function l(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function a(t,e){return i(t>>e&63|128)}function c(t,e){if(0==(4294967168&t))return i(t);var n="";return 0==(4294965248&t)?n=i(t>>6&31|192):0==(4294901760&t)?(l(t,e)||(t=65533),n=i(t>>12&15|224),n+=a(t,6)):0==(4292870144&t)&&(n=i(t>>18&7|240),n+=a(t,12),n+=a(t,6)),n+i(63&t|128)}function u(){if(s>=r)throw Error("Invalid byte index");var t=255&n[s];if(s++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function h(t){var e,i;if(s>r)throw Error("Invalid byte index");if(s==r)return!1;if(e=255&n[s],s++,0==(128&e))return e;if(192==(224&e)){if((i=(31&e)<<6|u())>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&e)){if((i=(15&e)<<12|u()<<6|u())>=2048)return l(i,t)?i:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&(i=(7&e)<<18|u()<<12|u()<<6|u())>=65536&&i<=1114111)return i;throw Error("Invalid UTF-8 detected")}t.exports={version:"2.1.2",encode:function(t,e){for(var n=!1!==(e=e||{}).strict,r=o(t),s=r.length,i=-1,l="";++i<s;)l+=c(r[i],n);return l},decode:function(t,e){var l=!1!==(e=e||{}).strict;n=o(t),r=n.length,s=0;for(var a,c=[];!1!==(a=h(l));)c.push(a);return function(t){for(var e,n=t.length,r=-1,s="";++r<n;)(e=t[r])>65535&&(s+=i((e-=65536)>>>10&1023|55296),e=56320|1023&e),s+=i(e);return s}(c)}}},c3Nh:function(t,e,n){t.exports=function(t){function e(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return r.colors[Math.abs(e)%r.colors.length]}function r(t){let n;function o(...t){if(!o.enabled)return;const e=o,s=Number(new Date);e.diff=s-(n||s),e.prev=n,e.curr=s,n=s,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let i=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(n,s)=>{if("%%"===n)return n;i++;const o=r.formatters[s];return"function"==typeof o&&(n=o.call(e,t[i]),t.splice(i,1),i--),n}),r.formatArgs.call(e,t),(e.log||r.log).apply(e,t)}return o.namespace=t,o.enabled=r.enabled(t),o.useColors=r.useColors(),o.color=e(t),o.destroy=s,o.extend=i,"function"==typeof r.init&&r.init(o),r.instances.push(o),o}function s(){const t=r.instances.indexOf(this);return-1!==t&&(r.instances.splice(t,1),!0)}function i(t,e){const n=r(this.namespace+(void 0===e?":":e)+t);return n.log=this.log,n}function o(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(t){return t instanceof Error?t.stack||t.message:t},r.disable=function(){const t=[...r.names.map(o),...r.skips.map(o).map(t=>"-"+t)].join(",");return r.enable(""),t},r.enable=function(t){let e;r.save(t),r.names=[],r.skips=[];const n=("string"==typeof t?t:"").split(/[\s,]+/),s=n.length;for(e=0;e<s;e++)n[e]&&("-"===(t=n[e].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+t.substr(1)+"$")):r.names.push(new RegExp("^"+t+"$")));for(e=0;e<r.instances.length;e++){const t=r.instances[e];t.enabled=r.enabled(t.namespace)}},r.enabled=function(t){if("*"===t[t.length-1])return!0;let e,n;for(e=0,n=r.skips.length;e<n;e++)if(r.skips[e].test(t))return!1;for(e=0,n=r.names.length;e<n;e++)if(r.names[e].test(t))return!0;return!1},r.humanize=n("xc6+"),Object.keys(t).forEach(e=>{r[e]=t[e]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=e,r.enable(r.load()),r}},fg2H:function(t,e,n){var r=n("yeub");t.exports=function(t){var e=t.xdomain,n=t.xscheme,s=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||r))return new XMLHttpRequest}catch(i){}try{if("undefined"!=typeof XDomainRequest&&!n&&s)return new XDomainRequest}catch(i){}if(!e)try{return new(self[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(i){}}},g5Dd:function(t,e){!function(){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<t.length;r++)n[t.charCodeAt(r)]=r;e.encode=function(e){var n,r=new Uint8Array(e),s=r.length,i="";for(n=0;n<s;n+=3)i+=t[r[n]>>2],i+=t[(3&r[n])<<4|r[n+1]>>4],i+=t[(15&r[n+1])<<2|r[n+2]>>6],i+=t[63&r[n+2]];return s%3==2?i=i.substring(0,i.length-1)+"=":s%3==1&&(i=i.substring(0,i.length-2)+"=="),i},e.decode=function(t){var e,r,s,i,o,l=.75*t.length,a=t.length,c=0;"="===t[t.length-1]&&(l--,"="===t[t.length-2]&&l--);var u=new ArrayBuffer(l),h=new Uint8Array(u);for(e=0;e<a;e+=4)r=n[t.charCodeAt(e)],s=n[t.charCodeAt(e+1)],i=n[t.charCodeAt(e+2)],o=n[t.charCodeAt(e+3)],h[c++]=r<<2|s>>4,h[c++]=(15&s)<<4|i>>2,h[c++]=(3&i)<<6|63&o;return u}}()},"hWa/":function(t,e,n){var r,s=n("k7Z5"),i=n("WLGk"),o=n("ypnn"),l=n("zMFY"),a=n("c3EK");"undefined"!=typeof ArrayBuffer&&(r=n("g5Dd"));var c="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),u="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),h=c||u;e.protocol=3;var d=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},p=s(d),f={type:"error",data:"parser error"},g=n("14A5");function m(t,e,n){for(var r=new Array(t.length),s=l(t.length,n),i=function(t,n,s){e(n,(function(e,n){r[t]=n,s(e,r)}))},o=0;o<t.length;o++)i(o,t[o],s)}e.encodePacket=function(t,n,r,s){"function"==typeof n&&(s=n,n=!1),"function"==typeof r&&(s=r,r=null);var i=void 0===t.data?void 0:t.data.buffer||t.data;if("undefined"!=typeof ArrayBuffer&&i instanceof ArrayBuffer)return function(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var s=t.data,i=new Uint8Array(s),o=new Uint8Array(1+s.byteLength);o[0]=d[t.type];for(var l=0;l<i.length;l++)o[l+1]=i[l];return r(o.buffer)}(t,n,s);if(void 0!==g&&i instanceof g)return function(t,n,r){if(!n)return e.encodeBase64Packet(t,r);if(h)return function(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var s=new FileReader;return s.onload=function(){e.encodePacket({type:t.type,data:s.result},n,!0,r)},s.readAsArrayBuffer(t.data)}(t,n,r);var s=new Uint8Array(1);return s[0]=d[t.type],r(new g([s.buffer,t.data]))}(t,n,s);if(i&&i.base64)return function(t,n){return n("b"+e.packets[t.type]+t.data.data)}(t,s);var o=d[t.type];return void 0!==t.data&&(o+=r?a.encode(String(t.data),{strict:!1}):String(t.data)),s(""+o)},e.encodeBase64Packet=function(t,n){var r,s="b"+e.packets[t.type];if(void 0!==g&&t.data instanceof g){var i=new FileReader;return i.onload=function(){var t=i.result.split(",")[1];n(s+t)},i.readAsDataURL(t.data)}try{r=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(c){for(var o=new Uint8Array(t.data),l=new Array(o.length),a=0;a<o.length;a++)l[a]=o[a];r=String.fromCharCode.apply(null,l)}return s+=btoa(r),n(s)},e.decodePacket=function(t,n,r){if(void 0===t)return f;if("string"==typeof t){if("b"===t.charAt(0))return e.decodeBase64Packet(t.substr(1),n);if(r&&!1===(t=function(t){try{t=a.decode(t,{strict:!1})}catch(e){return!1}return t}(t)))return f;var s=t.charAt(0);return Number(s)==s&&p[s]?t.length>1?{type:p[s],data:t.substring(1)}:{type:p[s]}:f}s=new Uint8Array(t)[0];var i=o(t,1);return g&&"blob"===n&&(i=new g([i])),{type:p[s],data:i}},e.decodeBase64Packet=function(t,e){var n=p[t.charAt(0)];if(!r)return{type:n,data:{base64:!0,data:t.substr(1)}};var s=r.decode(t.substr(1));return"blob"===e&&g&&(s=new g([s])),{type:n,data:s}},e.encodePayload=function(t,n,r){"function"==typeof n&&(r=n,n=null);var s=i(t);return n&&s?g&&!h?e.encodePayloadAsBlob(t,r):e.encodePayloadAsArrayBuffer(t,r):t.length?void m(t,(function(t,r){e.encodePacket(t,!!s&&n,!1,(function(t){r(null,function(t){return t.length+":"+t}(t))}))}),(function(t,e){return r(e.join(""))})):r("0:")},e.decodePayload=function(t,n,r){if("string"!=typeof t)return e.decodePayloadAsBinary(t,n,r);var s;if("function"==typeof n&&(r=n,n=null),""===t)return r(f,0,1);for(var i,o,l="",a=0,c=t.length;a<c;a++){var u=t.charAt(a);if(":"===u){if(""===l||l!=(i=Number(l)))return r(f,0,1);if(l!=(o=t.substr(a+1,i)).length)return r(f,0,1);if(o.length){if(s=e.decodePacket(o,n,!1),f.type===s.type&&f.data===s.data)return r(f,0,1);if(!1===r(s,a+i,c))return}a+=i,l=""}else l+=u}return""!==l?r(f,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,n){if(!t.length)return n(new ArrayBuffer(0));m(t,(function(t,n){e.encodePacket(t,!0,!0,(function(t){return n(null,t)}))}),(function(t,e){var r=e.reduce((function(t,e){var n;return t+(n="string"==typeof e?e.length:e.byteLength).toString().length+n+2}),0),s=new Uint8Array(r),i=0;return e.forEach((function(t){var e="string"==typeof t,n=t;if(e){for(var r=new Uint8Array(t.length),o=0;o<t.length;o++)r[o]=t.charCodeAt(o);n=r.buffer}s[i++]=e?0:1;var l=n.byteLength.toString();for(o=0;o<l.length;o++)s[i++]=parseInt(l[o]);for(s[i++]=255,r=new Uint8Array(n),o=0;o<r.length;o++)s[i++]=r[o]})),n(s.buffer)}))},e.encodePayloadAsBlob=function(t,n){m(t,(function(t,n){e.encodePacket(t,!0,!0,(function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var r=new Uint8Array(t.length),s=0;s<t.length;s++)r[s]=t.charCodeAt(s);t=r.buffer,e[0]=0}var i=(t instanceof ArrayBuffer?t.byteLength:t.size).toString(),o=new Uint8Array(i.length+1);for(s=0;s<i.length;s++)o[s]=parseInt(i[s]);if(o[i.length]=255,g){var l=new g([e.buffer,o.buffer,t]);n(null,l)}}))}),(function(t,e){return n(new g(e))}))},e.decodePayloadAsBinary=function(t,n,r){"function"==typeof n&&(r=n,n=null);for(var s=t,i=[];s.byteLength>0;){for(var l=new Uint8Array(s),a=0===l[0],c="",u=1;255!==l[u];u++){if(c.length>310)return r(f,0,1);c+=l[u]}s=o(s,2+c.length),c=parseInt(c);var h=o(s,0,c);if(a)try{h=String.fromCharCode.apply(null,new Uint8Array(h))}catch(g){var d=new Uint8Array(h);for(h="",u=0;u<d.length;u++)h+=String.fromCharCode(d[u])}i.push(h),s=o(s,c)}var p=i.length;i.forEach((function(t,s){r(e.decodePacket(t,n,!0),s,p)}))}},k7Z5:function(t,e){t.exports=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var r in t)n.call(t,r)&&e.push(r);return e}},kSER:function(t,e){t.exports=function(t,e){for(var n=[],r=(e=e||0)||0;r<t.length;r++)n[r-e]=t[r];return n}},l518:function(t,e,n){function r(){var t;try{t=e.storage.debug}catch(n){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t}(e=t.exports=n("Rpy8")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),n){var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var s=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(s++,"%c"===t&&(i=s))})),t.splice(i,0,r)}},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(n){}},e.load=r,e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},e.enable(r())},pqID:function(t,e,n){var r=n("qp7M"),s=n("s1oe"),i=n("wlXU"),o=n("Bn1Y")("socket.io-client");t.exports=e=a;var l=e.managers={};function a(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,s=r(t),a=s.source,c=s.id;return e.forceNew||e["force new connection"]||!1===e.multiplex||l[c]&&s.path in l[c].nsps?(o("ignoring socket cache for %s",a),n=i(a,e)):(l[c]||(o("new io instance for %s",a),l[c]=i(a,e)),n=l[c]),s.query&&!e.query&&(e.query=s.query),n.socket(s.path,e)}e.protocol=s.protocol,e.connect=a,e.Manager=n("wlXU"),e.Socket=n("OAgL")},qp7M:function(t,e,n){var r=n("Uxeu"),s=n("Bn1Y")("socket.io-client:url");t.exports=function(t,e){var n=t;e=e||"undefined"!=typeof location&&location,null==t&&(t=e.protocol+"//"+e.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?e.protocol+t:e.host+t),/^(https?|wss?):\/\//.test(t)||(s("protocol-less url %s",t),t=void 0!==e?e.protocol+"//"+t:"https://"+t),s("parse %s",t),n=r(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var i=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port,n.href=n.protocol+"://"+i+(e&&e.port===n.port?"":":"+n.port),n}},rfC7:function(t,e,n){var r=n("3exg"),s=n("Yvos");t.exports=u;var i,o=/\n/g,l=/\\n/g;function a(){}function c(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}}function u(t){if(r.call(this,t),this.query=this.query||{},!i){var e=c();i=e.___eio=e.___eio||[]}this.index=i.length;var n=this;i.push((function(t){n.onData(t)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){n.script&&(n.script.onerror=a)}),!1)}s(u,r),u.prototype.supportsBinary=!1,u.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},u.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)}),100)},u.prototype.doWrite=function(t,e){var n=this;if(!this.form){var r,s=document.createElement("form"),i=document.createElement("textarea"),a=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=a,s.method="POST",s.setAttribute("accept-charset","utf-8"),i.name="d",s.appendChild(i),document.body.appendChild(s),this.form=s,this.area=i}function c(){u(),e()}function u(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(t){n.onError("jsonp polling iframe removal error",t)}try{r=document.createElement('<iframe src="javascript:0" name="'+n.iframeId+'">')}catch(t){(r=document.createElement("iframe")).name=n.iframeId,r.src="javascript:0"}r.id=n.iframeId,n.form.appendChild(r),n.iframe=r}this.form.action=this.uri(),u(),t=t.replace(l,"\\\n"),this.area.value=t.replace(o,"\\n");try{this.form.submit()}catch(h){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&c()}:this.iframe.onload=c}},s1oe:function(t,e,n){var r=n("l518")("socket.io-parser"),s=n("/RX3"),i=n("M/K+"),o=n("Qsis"),l=n("Id/V");function a(){}e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=a,e.Decoder=h;var c=e.ERROR+'"encode error"';function u(t){var n=""+t.type;if(e.BINARY_EVENT!==t.type&&e.BINARY_ACK!==t.type||(n+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(n+=t.nsp+","),null!=t.id&&(n+=t.id),null!=t.data){var s=function(t){try{return JSON.stringify(t)}catch(e){return!1}}(t.data);if(!1===s)return c;n+=s}return r("encoded %j as %s",t,n),n}function h(){this.reconstructor=null}function d(t){this.reconPack=t,this.buffers=[]}function p(t){return{type:e.ERROR,data:"parser error: "+t}}a.prototype.encode=function(t,n){r("encoding packet %j",t),e.BINARY_EVENT===t.type||e.BINARY_ACK===t.type?function(t,e){i.removeBlobs(t,(function(t){var n=i.deconstructPacket(t),r=u(n.packet),s=n.buffers;s.unshift(r),e(s)}))}(t,n):n([u(t)])},s(h.prototype),h.prototype.add=function(t){var n;if("string"==typeof t)n=function(t){var n=0,s={type:Number(t.charAt(0))};if(null==e.types[s.type])return p("unknown packet type "+s.type);if(e.BINARY_EVENT===s.type||e.BINARY_ACK===s.type){for(var i="";"-"!==t.charAt(++n)&&(i+=t.charAt(n),n!=t.length););if(i!=Number(i)||"-"!==t.charAt(n))throw new Error("Illegal attachments");s.attachments=Number(i)}if("/"===t.charAt(n+1))for(s.nsp="";++n&&","!==(a=t.charAt(n))&&(s.nsp+=a,n!==t.length););else s.nsp="/";var l=t.charAt(n+1);if(""!==l&&Number(l)==l){for(s.id="";++n;){var a;if(null==(a=t.charAt(n))||Number(a)!=a){--n;break}if(s.id+=t.charAt(n),n===t.length)break}s.id=Number(s.id)}if(t.charAt(++n)){var c=function(t){try{return JSON.parse(t)}catch(e){return!1}}(t.substr(n));if(!1===c||s.type!==e.ERROR&&!o(c))return p("invalid payload");s.data=c}return r("decoded %s as %j",t,s),s}(t),e.BINARY_EVENT===n.type||e.BINARY_ACK===n.type?(this.reconstructor=new d(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!l(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",n))}},h.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},d.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=i.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},d.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},uKDP:function(t,e,n){var r=n("0+mJ"),s=n("/RX3"),i=n("Bn1Y")("engine.io-client:socket"),o=n("7jRU"),l=n("hWa/"),a=n("Uxeu"),c=n("TypT");function u(t,e){if(!(this instanceof u))return new u(t,e);e=e||{},t&&"object"==typeof t&&(e=t,t=null),t?(t=a(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=a(e.host).host),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.agent=e.agent||!1,this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},"string"==typeof this.query&&(this.query=c.decode(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.withCredentials=!1!==e.withCredentials,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.transportOptions=e.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=!1!==e.perMessageDeflate&&(e.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||null,this.key=e.key||null,this.passphrase=e.passphrase||null,this.cert=e.cert||null,this.ca=e.ca||null,this.ciphers=e.ciphers||null,this.rejectUnauthorized=void 0===e.rejectUnauthorized||e.rejectUnauthorized,this.forceNode=!!e.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(e.extraHeaders&&Object.keys(e.extraHeaders).length>0&&(this.extraHeaders=e.extraHeaders),e.localAddress&&(this.localAddress=e.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}t.exports=u,u.priorWebsocketSuccess=!1,s(u.prototype),u.protocol=l.protocol,u.Socket=u,u.Transport=n("0zaL"),u.transports=n("0+mJ"),u.parser=n("hWa/"),u.prototype.createTransport=function(t){i('creating transport "%s"',t);var e=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(this.query);e.EIO=l.protocol,e.transport=t;var n=this.transportOptions[t]||{};return this.id&&(e.sid=this.id),new r[t]({query:e,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},u.prototype.open=function(){var t;if(this.rememberUpgrade&&u.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout((function(){e.emit("error","No transports available")}),0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(n){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},u.prototype.setTransport=function(t){i("setting transport %s",t.name);var e=this;this.transport&&(i("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",(function(){e.onDrain()})).on("packet",(function(t){e.onPacket(t)})).on("error",(function(t){e.onError(t)})).on("close",(function(){e.onClose("transport close")}))},u.prototype.probe=function(t){i('probing transport "%s"',t);var e=this.createTransport(t,{probe:1}),n=!1,r=this;function s(){r.onlyBinaryUpgrades&&(n=n||!this.supportsBinary&&r.transport.supportsBinary),n||(i('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",(function(s){if(!n)if("pong"===s.type&&"probe"===s.data){if(i('probe transport "%s" pong',t),r.upgrading=!0,r.emit("upgrading",e),!e)return;u.priorWebsocketSuccess="websocket"===e.name,i('pausing current transport "%s"',r.transport.name),r.transport.pause((function(){n||"closed"!==r.readyState&&(i("changing transport and sending upgrade packet"),d(),r.setTransport(e),e.send([{type:"upgrade"}]),r.emit("upgrade",e),e=null,r.upgrading=!1,r.flush())}))}else{i('probe transport "%s" failed',t);var o=new Error("probe error");o.transport=e.name,r.emit("upgradeError",o)}})))}function o(){n||(n=!0,d(),e.close(),e=null)}function l(n){var s=new Error("probe error: "+n);s.transport=e.name,o(),i('probe transport "%s" failed because of error: %s',t,n),r.emit("upgradeError",s)}function a(){l("transport closed")}function c(){l("socket closed")}function h(t){e&&t.name!==e.name&&(i('"%s" works - aborting "%s"',t.name,e.name),o())}function d(){e.removeListener("open",s),e.removeListener("error",l),e.removeListener("close",a),r.removeListener("close",c),r.removeListener("upgrading",h)}u.priorWebsocketSuccess=!1,e.once("open",s),e.once("error",l),e.once("close",a),this.once("close",c),this.once("upgrading",h),e.open()},u.prototype.onOpen=function(){if(i("socket open"),this.readyState="open",u.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){i("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},u.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(i('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else i('packet received with socket readyState "%s"',this.readyState)},u.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},u.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout((function(){"closed"!==e.readyState&&e.onClose("ping timeout")}),t||e.pingInterval+e.pingTimeout)},u.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout((function(){i("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)}),t.pingInterval)},u.prototype.ping=function(){var t=this;this.sendPacket("ping",(function(){t.emit("ping")}))},u.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},u.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(i("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},u.prototype.write=u.prototype.send=function(t,e,n){return this.sendPacket("message",t,e,n),this},u.prototype.sendPacket=function(t,e,n,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var s={type:t,data:e,options:n};this.emit("packetCreate",s),this.writeBuffer.push(s),r&&this.once("flush",r),this.flush()}},u.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?r():e()})):this.upgrading?r():e()}function e(){t.onClose("forced close"),i("socket closing - telling transport to close"),t.transport.close()}function n(){t.removeListener("upgrade",n),t.removeListener("upgradeError",n),e()}function r(){t.once("upgrade",n),t.once("upgradeError",n)}return this},u.prototype.onError=function(t){i("socket error %j",t),u.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},u.prototype.onClose=function(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(i('socket close with reason: "%s"',t),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)},u.prototype.filterUpgrades=function(t){for(var e=[],n=0,r=t.length;n<r;n++)~o(this.transports,t[n])&&e.push(t[n]);return e}},wlXU:function(t,e,n){var r=n("4+Ds"),s=n("OAgL"),i=n("/RX3"),o=n("s1oe"),l=n("Y4EA"),a=n("QN7Q"),c=n("Bn1Y")("socket.io-client:manager"),u=n("7jRU"),h=n("C2QD"),d=Object.prototype.hasOwnProperty;function p(t,e){if(!(this instanceof p))return new p(t,e);t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new h({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=e.parser||o;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}t.exports=p,p.prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)d.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},p.prototype.updateSocketIds=function(){for(var t in this.nsps)d.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},p.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},i(p.prototype),p.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},p.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},p.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},p.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},p.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},p.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},p.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},p.prototype.open=p.prototype.connect=function(t,e){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=r(this.uri,this.opts);var n=this.engine,s=this;this.readyState="opening",this.skipReconnect=!1;var i=l(n,"open",(function(){s.onopen(),t&&t()})),o=l(n,"error",(function(e){if(c("connect_error"),s.cleanup(),s.readyState="closed",s.emitAll("connect_error",e),t){var n=new Error("Connection error");n.data=e,t(n)}else s.maybeReconnectOnOpen()}));if(!1!==this._timeout){var a=this._timeout;c("connect attempt will timeout after %d",a);var u=setTimeout((function(){c("connect attempt timed out after %d",a),i.destroy(),n.close(),n.emit("error","timeout"),s.emitAll("connect_timeout",a)}),a);this.subs.push({destroy:function(){clearTimeout(u)}})}return this.subs.push(i),this.subs.push(o),this},p.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(l(t,"data",a(this,"ondata"))),this.subs.push(l(t,"ping",a(this,"onping"))),this.subs.push(l(t,"pong",a(this,"onpong"))),this.subs.push(l(t,"error",a(this,"onerror"))),this.subs.push(l(t,"close",a(this,"onclose"))),this.subs.push(l(this.decoder,"decoded",a(this,"ondecoded")))},p.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},p.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},p.prototype.ondata=function(t){this.decoder.add(t)},p.prototype.ondecoded=function(t){this.emit("packet",t)},p.prototype.onerror=function(t){c("error",t),this.emitAll("error",t)},p.prototype.socket=function(t,e){var n=this.nsps[t];if(!n){n=new s(this,t,e),this.nsps[t]=n;var r=this;n.on("connecting",i),n.on("connect",(function(){n.id=r.generateId(t)})),this.autoConnect&&i()}function i(){~u(r.connecting,n)||r.connecting.push(n)}return n},p.prototype.destroy=function(t){var e=u(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},p.prototype.packet=function(t){c("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,(function(n){for(var r=0;r<n.length;r++)e.engine.write(n[r],t.options);e.encoding=!1,e.processPacketQueue()})))},p.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},p.prototype.cleanup=function(){c("cleanup");for(var t=this.subs.length,e=0;e<t;e++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},p.prototype.close=p.prototype.disconnect=function(){c("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},p.prototype.onclose=function(t){c("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},p.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();c("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout((function(){t.skipReconnect||(c("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open((function(e){e?(c("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(c("reconnect success"),t.onreconnect())})))}),e);this.subs.push({destroy:function(){clearTimeout(n)}})}},p.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},"xc6+":function(t,e){var n=1e3,r=6e4,s=36e5,i=24*s;function o(t,e,n,r){var s=e>=1.5*n;return Math.round(t/n)+" "+r+(s?"s":"")}t.exports=function(t,e){e=e||{};var l,a,c=typeof t;if("string"===c&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var o=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*i;case"hours":case"hour":case"hrs":case"hr":case"h":return o*s;case"minutes":case"minute":case"mins":case"min":case"m":return o*r;case"seconds":case"second":case"secs":case"sec":case"s":return o*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(t);if("number"===c&&isFinite(t))return e.long?(l=t,(a=Math.abs(l))>=i?o(l,a,i,"day"):a>=s?o(l,a,s,"hour"):a>=r?o(l,a,r,"minute"):a>=n?o(l,a,n,"second"):l+" ms"):function(t){var e=Math.abs(t);return e>=i?Math.round(t/i)+"d":e>=s?Math.round(t/s)+"h":e>=r?Math.round(t/r)+"m":e>=n?Math.round(t/n)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},yeub:function(t,e){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(n){t.exports=!1}},ypnn:function(t,e){t.exports=function(t,e,n){var r=t.byteLength;if(e=e||0,n=n||r,t.slice)return t.slice(e,n);if(e<0&&(e+=r),n<0&&(n+=r),n>r&&(n=r),e>=r||e>=n||0===r)return new ArrayBuffer(0);for(var s=new Uint8Array(t),i=new Uint8Array(n-e),o=e,l=0;o<n;o++,l++)i[l]=s[o];return i.buffer}},zMFY:function(t,e){function n(){}t.exports=function(t,e,r){var s=!1;return r=r||n,i.count=t,0===t?e():i;function i(t,n){if(i.count<=0)throw new Error("after called too many times");--i.count,t?(s=!0,e(t),e=r):0!==i.count||s||e(null,n)}}},zUnb:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.r(e);let s=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){s=t},get useDeprecatedSynchronousErrorHandling(){return s}};function o(t){setTimeout(()=>{throw t})}const l={closed:!0,next(t){},error(t){if(i.useDeprecatedSynchronousErrorHandling)throw t;o(t)},complete(){}},a=Array.isArray||(t=>t&&"number"==typeof t.length);function c(t){return null!==t&&"object"==typeof t}function u(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}u.prototype=Object.create(Error.prototype);const h=u;let d=(()=>{class t{constructor(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let t,e=!1;if(this.closed)return;let{_parent:n,_parents:s,_unsubscribe:i,_subscriptions:o}=this;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;let l=-1,u=s?s.length:0;for(;n;)n.remove(this),n=++l<u&&s[l]||null;if(r(i))try{i.call(this)}catch(d){e=!0,t=d instanceof h?p(d.errors):[d]}if(a(o))for(l=-1,u=o.length;++l<u;){const n=o[l];if(c(n))try{n.unsubscribe()}catch(d){e=!0,t=t||[],d instanceof h?t=t.concat(p(d.errors)):t.push(d)}}if(e)throw new h(t)}add(e){let n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:if(!e)return t.EMPTY;throw new Error("unrecognized teardown "+e+" added to Subscription.")}if(n._addParent(this)){const t=this._subscriptions;t?t.push(n):this._subscriptions=[n]}return n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}_addParent(t){let{_parent:e,_parents:n}=this;return e!==t&&(e?n?-1===n.indexOf(t)&&(n.push(t),!0):(this._parents=[t],!0):(this._parent=t,!0))}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function p(t){return t.reduce((t,e)=>t.concat(e instanceof h?e.errors:e),[])}const f="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class g extends d{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=l;break;case 1:if(!t){this.destination=l;break}if("object"==typeof t){t instanceof g?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new m(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new m(this,t,e,n)}}[f](){return this}static create(t,e,n){const r=new g(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parent:t,_parents:e}=this;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this}}class m extends g{constructor(t,e,n,s){let i;super(),this._parentSubscriber=t;let o=this;r(e)?i=e:e&&(i=e.next,n=e.error,s=e.complete,e!==l&&(o=Object.create(e),r(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=i,this._error=n,this._complete=s}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;i.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=i;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):o(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;o(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);i.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),i.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}__tryOrSetError(t,e,n){if(!i.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return i.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(o(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const b="function"==typeof Symbol&&Symbol.observable||"@@observable";function v(){}function y(...t){return _(t)}function _(t){return t?1===t.length?t[0]:function(e){return t.reduce((t,e)=>e(t),e)}:v}let C=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,s=function(t,e,n){if(t){if(t instanceof g)return t;if(t[f])return t[f]()}return t||e||n?new g(t,e,n):new g(l)}(t,e,n);if(s.add(r?r.call(s,this.source):this.source||i.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),i.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s}_trySubscribe(t){try{return this._subscribe(t)}catch(e){i.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof g?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=w(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(s){n(s),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[b](){return this}pipe(...t){return 0===t.length?this:_(t)(this)}toPromise(t){return new(t=w(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function w(t){if(t||(t=i.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function x(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}x.prototype=Object.create(Error.prototype);const S=x;class O extends d{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class k extends g{constructor(t){super(t),this.destination=t}}let P=(()=>{class t extends C{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[f](){return new k(this)}lift(t){const e=new E(this,this);return e.operator=t,e}next(t){if(this.closed)throw new S;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let s=0;s<n;s++)r[s].next(t)}}error(t){if(this.closed)throw new S;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let s=0;s<n;s++)r[s].error(t);this.observers.length=0}complete(){if(this.closed)throw new S;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new S;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new S;return this.hasError?(t.error(this.thrownError),d.EMPTY):this.isStopped?(t.complete(),d.EMPTY):(this.observers.push(t),new O(this,t))}asObservable(){const t=new C;return t.source=this,t}}return t.create=(t,e)=>new E(t,e),t})();class E extends P{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):d.EMPTY}}function M(t){return t&&"function"==typeof t.schedule}class T extends g{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const A=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()},I=t=>e=>(t.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,o),e);function R(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const N=R(),D=t=>e=>{const n=t[N]();for(;;){const t=n.next();if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e},V=t=>e=>{const n=t[b]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)},F=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function U(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const j=t=>{if(t instanceof C)return e=>t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e);if(t&&"function"==typeof t[b])return V(t);if(F(t))return A(t);if(U(t))return I(t);if(t&&"function"==typeof t[N])return D(t);{const e=c(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}};function L(t,e,n,r,s=new T(t,n,r)){if(!s.closed)return j(e)(s)}class $ extends g{notifyNext(t,e,n,r,s){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}function B(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new z(t,e))}}class z{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new G(t,this.project,this.thisArg))}}class G extends g{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function H(t,e){return new C(e?n=>{const r=new d;let s=0;return r.add(e.schedule((function(){s!==t.length?(n.next(t[s++]),n.closed||r.add(this.schedule())):n.complete()}))),r}:A(t))}function q(t,e){if(!e)return t instanceof C?t:new C(j(t));if(null!=t){if(function(t){return t&&"function"==typeof t[b]}(t))return function(t,e){return new C(e?n=>{const r=new d;return r.add(e.schedule(()=>{const s=t[b]();r.add(s.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r}:V(t))}(t,e);if(U(t))return function(t,e){return new C(e?n=>{const r=new d;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r}:I(t))}(t,e);if(F(t))return H(t,e);if(function(t){return t&&"function"==typeof t[N]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new C(e?n=>{const r=new d;let s;return r.add(()=>{s&&"function"==typeof s.return&&s.return()}),r.add(e.schedule(()=>{s=t[N](),r.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=s.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())})))})),r}:D(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function W(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(W((n,r)=>q(t(n,r)).pipe(B((t,s)=>e(n,t,r,s))),n)):("number"==typeof e&&(n=e),e=>e.lift(new K(t,n)))}class K{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new Z(t,this.project,this.concurrent))}}class Z extends ${constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){const r=new T(this,void 0,void 0);this.destination.add(r),L(this,t,e,n,r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,r,s){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Y(t){return t}function Q(t=Number.POSITIVE_INFINITY){return W(Y,t)}function X(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return M(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof C?t[0]:Q(e)(H(t,n))}function J(){return function(t){return t.lift(new tt(t))}}class tt{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new et(t,n),s=e.subscribe(r);return r.closed||(r.connection=n.connect()),s}}class et extends g{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}const nt=class extends C{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new d,t.add(this.source.subscribe(new st(this.getSubject(),this))),t.closed?(this._connection=null,t=d.EMPTY):this._connection=t),t}refCount(){return J()(this)}}.prototype,rt={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:nt._subscribe},_isComplete:{value:nt._isComplete,writable:!0},getSubject:{value:nt.getSubject},connect:{value:nt.connect},refCount:{value:nt.refCount}};class st extends k{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function it(){return new P}function ot(){return t=>{return J()((e=it,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,rt);return r.source=t,r.subjectFactory=n,r})(t));var e}}function lt(t,e,n){const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function s(...t){if(this instanceof s)return r.apply(this,t),this;const e=new s(...t);return n.annotation=e,n;function n(t,n,r){const s=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;for(;s.length<=r;)s.push(null);return(s[r]=s[r]||[]).push(e),t}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=t,s.annotationCls=s,s}const at=lt("Inject",t=>({token:t})),ct=lt("Optional"),ut=lt("Self"),ht=lt("SkipSelf");var dt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function pt(t){for(let e in t)if(t[e]===pt)return e;throw Error("Could not find renamed property on target object.")}function ft(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function gt(t){const e=t[mt];return e&&e.token===t?e:null}const mt=pt({ngInjectableDef:pt});function bt(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(bt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}const vt=pt({__forward_ref__:pt});function yt(t){return t.__forward_ref__=yt,t.toString=function(){return bt(this())},t}function _t(t){const e=t;return"function"==typeof e&&e.hasOwnProperty(vt)&&e.__forward_ref__===yt?e():t}const Ct="undefined"!=typeof globalThis&&globalThis,wt="undefined"!=typeof window&&window,xt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,St="undefined"!=typeof global&&global,Ot=Ct||St||wt||xt;class kt{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.ngInjectableDef=ft({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Pt=new kt("INJECTOR",-1),Et=new Object,Mt=/\n/gm,Tt=pt({provide:String,useValue:pt});let At=void 0;function It(t){const e=At;return At=t,e}function Rt(t,e=dt.Default){return function(t,e=dt.Default){if(void 0===At)throw new Error("inject() must be called from an injection context");return null===At?function(t,e,n){const r=gt(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&dt.Optional)return null;throw new Error(`Injector: NOT_FOUND [${bt(t)}]`)}(t,0,e):At.get(t,e&dt.Optional?null:void 0,e)}(t,e)}class Nt{get(t,e=Et){if(e===Et){const e=new Error(`NullInjectorError: No provider for ${bt(t)}!`);throw e.name="NullInjectorError",e}return e}}function Dt(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let s=bt(e);if(e instanceof Array)s=e.map(bt).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):bt(r)))}s=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${s}]: ${t.replace(Mt,"\n  ")}`}const Vt=new kt("The presence of this token marks an injector as being the root injector."),Ft=function(t,e,n){return new zt(t,e,n)};let Ut=(()=>{class t{static create(t,e){return Array.isArray(t)?Ft(t,e,""):Ft(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=Et,t.NULL=new Nt,t.ngInjectableDef=ft({token:t,providedIn:"any",factory:()=>Rt(Pt)}),t.__NG_ELEMENT_ID__=-1,t})();const jt=function(t){return t},Lt=[],$t=jt,Bt=function(){return Array.prototype.slice.call(arguments)};class zt{constructor(t,e=Ut.NULL,n=null){this.parent=e,this.source=n;const r=this._records=new Map;r.set(Ut,{token:Ut,fn:jt,deps:Lt,value:this,useNew:!1}),r.set(Pt,{token:Pt,fn:jt,deps:Lt,value:this,useNew:!1}),function t(e,n){if(n)if((n=_t(n))instanceof Array)for(let r=0;r<n.length;r++)t(e,n[r]);else{if("function"==typeof n)throw Ht("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw Ht("Unexpected provider",n);{let t=_t(n.provide);const r=function(t){const e=function(t){let e=Lt;const n=t.deps;if(n&&n.length){e=[];for(let t=0;t<n.length;t++){let r=6,s=_t(n[t]);if(s instanceof Array)for(let t=0,e=s;t<e.length;t++){const n=e[t];n instanceof ct||n==ct?r|=1:n instanceof ht||n==ht?r&=-3:n instanceof ut||n==ut?r&=-5:s=n instanceof at?n.token:_t(n)}e.push({token:s,options:r})}}else if(t.useExisting)e=[{token:_t(t.useExisting),options:6}];else if(!(n||Tt in t))throw Ht("'deps' required",t);return e}(t);let n=jt,r=Lt,s=!1,i=_t(t.provide);if(Tt in t)r=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)s=!0,n=_t(t.useClass);else{if("function"!=typeof i)throw Ht("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);s=!0,n=i}return{deps:e,fn:n,useNew:s,value:r}}(n);if(!0===n.multi){let r=e.get(t);if(r){if(r.fn!==Bt)throw Gt(t)}else e.set(t,r={token:n.provide,deps:[],useNew:!1,fn:Bt,value:Lt});t=n,r.deps.push({token:t,options:6})}const s=e.get(t);if(s&&s.fn==Bt)throw Gt(t);e.set(t,r)}}}(r,t)}get(t,e,n=dt.Default){const r=this._records.get(t);try{return function t(e,n,r,s,i,o){try{return function(e,n,r,s,i,o){let l;if(!n||o&dt.SkipSelf)o&dt.Self||(l=s.get(e,i,dt.Default));else{if(l=n.value,l==$t)throw Error("\u0275Circular dependency");if(l===Lt){n.value=$t;let e=void 0,i=n.useNew,o=n.fn,a=n.deps,c=Lt;if(a.length){c=[];for(let e=0;e<a.length;e++){const n=a[e],i=n.options,o=2&i?r.get(n.token):void 0;c.push(t(n.token,o,r,o||4&i?s:Ut.NULL,1&i?null:Ut.THROW_IF_NOT_FOUND,dt.Default))}}n.value=l=i?new o(...c):o.apply(e,c)}}return l}(e,n,r,s,i,o)}catch(l){throw l instanceof Error||(l=new Error(l)),(l.ngTempTokenPath=l.ngTempTokenPath||[]).unshift(e),n&&n.value==$t&&(n.value=Lt),l}}(t,r,this._records,this.parent,e,n)}catch(s){return function(t,e,n,r){const s=t.ngTempTokenPath;throw e.__source&&s.unshift(e.__source),t.message=Dt("\n"+t.message,s,"StaticInjectorError",r),t.ngTokenPath=s,t.ngTempTokenPath=null,t}(s,t,0,this.source)}}toString(){const t=[];return this._records.forEach((e,n)=>t.push(bt(n))),`StaticInjector[${t.join(", ")}]`}}function Gt(t){return Ht("Cannot mix multi providers and regular providers",t)}function Ht(t,e){return new Error(Dt(t,e,"StaticInjectorError"))}const qt=new kt("AnalyzeForEntryComponents"),Wt=function(){var t={Emulated:0,Native:1,None:2,ShadowDom:3};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t[t.ShadowDom]="ShadowDom",t}(),Kt=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ot))();let Zt=!0,Yt=!1;function Qt(){return Yt=!0,Zt}class Xt{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t),this.inertBodyElement=this.inertDocument.createElement("body"),t.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}getInertBodyElement_XHR(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(r){return null}const e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(void 0);const n=e.response.body;return n.removeChild(n.firstChild),n}getInertBodyElement_DOMParser(t){t="<body><remove></remove>"+t+"</body>";try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}getInertBodyElement_InertDocument(t){const e=this.inertDocument.createElement("template");return"content"in e?(e.innerHTML=t,e):(this.inertBodyElement.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Jt=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,te=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ee(t){return(t=String(t)).match(Jt)||t.match(te)?t:(Qt()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function ne(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function re(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const se=ne("area,br,col,hr,img,wbr"),ie=ne("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),oe=ne("rp,rt"),le=re(oe,ie),ae=re(se,re(ie,ne("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),re(oe,ne("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),le),ce=ne("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ue=ne("srcset"),he=re(ce,ue,ne("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ne("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),de=ne("script,style,template");class pe{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!ae.hasOwnProperty(e))return this.sanitizedSomething=!0,!de.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let s=0;s<n.length;s++){const t=n.item(s),e=t.name,i=e.toLowerCase();if(!he.hasOwnProperty(i)){this.sanitizedSomething=!0;continue}let o=t.value;ce[i]&&(o=ee(o)),ue[i]&&(r=o,o=(r=String(r)).split(",").map(t=>ee(t.trim())).join(", ")),this.buf.push(" ",e,'="',me(o),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();ae.hasOwnProperty(e)&&!se.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(me(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const fe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ge=/([^\#-~ |!])/g;function me(t){return t.replace(/&/g,"&amp;").replace(fe,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(ge,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let be;function ve(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}const ye=function(){var t={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return t[t.NONE]="NONE",t[t.HTML]="HTML",t[t.STYLE]="STYLE",t[t.SCRIPT]="SCRIPT",t[t.URL]="URL",t[t.RESOURCE_URL]="RESOURCE_URL",t}();class _e{}const Ce=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),we=/^url\(([^)]+)\)$/;function xe(t){return t.ngDebugContext}function Se(t){return t.ngOriginalError}function Oe(t,...e){t.error(...e)}class ke{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Oe}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?xe(t)?xe(t):this._findContext(Se(t)):null}_findOriginalError(t){let e=Se(t);for(;e&&Se(e);)e=Se(e);return e}}const Pe=/([A-Z])/g;function Ee(t){try{return null!=t?t.toString().slice(0,30):t}catch(e){return"[ERROR] Exception while trying to serialize the value"}}let Me=null;function Te(){if(!Me){const t=Ot.Symbol;if(t&&t.iterator)Me=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Me=n)}}}return Me}function Ae(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function Ie(t,e){const n=Ne(t),r=Ne(e);if(n&&r)return function(t,e,n){const r=t[Te()](),s=e[Te()]();for(;;){const t=r.next(),e=s.next();if(t.done&&e.done)return!0;if(t.done||e.done)return!1;if(!n(t.value,e.value))return!1}}(t,e,Ie);{const s=t&&("object"==typeof t||"function"==typeof t),i=e&&("object"==typeof e||"function"==typeof e);return!(n||!s||r||!i)||Ae(t,e)}}class Re{constructor(t){this.wrapped=t}static wrap(t){return new Re(t)}static unwrap(t){return Re.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Re}}function Ne(t){return!!De(t)&&(Array.isArray(t)||!(t instanceof Map)&&Te()in t)}function De(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ve(t){return!!t&&"function"==typeof t.then}function Fe(t){return!!t&&"function"==typeof t.subscribe}class Ue{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}class je{}function Le(t){const e=Error(`No component factory found for ${bt(t)}. Did you add it to @NgModule.entryComponents?`);return e[$e]=t,e}const $e="ngComponent";class Be{resolveComponentFactory(t){throw Le(t)}}let ze=(()=>{class t{}return t.NULL=new Be,t})();class Ge{constructor(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(let r=0;r<t.length;r++){const e=t[r];this._factories.set(e.componentType,e)}}resolveComponentFactory(t){let e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw Le(t);return new He(e,this._ngModule)}}class He extends je{constructor(t,e){super(),this.factory=t,this.ngModule=e,this.selector=t.selector,this.componentType=t.componentType,this.ngContentSelectors=t.ngContentSelectors,this.inputs=t.inputs,this.outputs=t.outputs}create(t,e,n,r){return this.factory.create(t,e,n,r||this.ngModule)}}class qe{}class We{}function Ke(...t){}let Ze=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>Ye(t),t})();const Ye=Ke;class Qe{}class Xe{}const Je=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}();let tn=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>en(),t})();const en=Ke;class nn{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const rn=new nn("8.1.3");class sn{constructor(){}supports(t){return Ne(t)}create(t){return new ln(t)}}const on=(t,e)=>e;class ln{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||on}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,s=null;for(;e||n;){const i=!n||e&&e.currentIndex<hn(n,r,s)?e:n,o=hn(i,r,s),l=i.currentIndex;if(i===n)r--,n=n._nextRemoved;else if(e=e._next,null==i.previousIndex)r++;else{s||(s=[]);const t=o-r,e=l-r;if(t!=e){for(let n=0;n<t;n++){const r=n<s.length?s[n]:s[n]=0,i=r+n;e<=i&&i<t&&(s[n]=r+1)}s[i.previousIndex]=e-t}}o!==l&&t(i,o,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Ne(t))throw new Error(`Error trying to diff '${bt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,s=this._itHead,i=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==s&&Ae(s.trackById,r)?(i&&(s=this._verifyReinsertion(s,n,r,e)),Ae(s.item,n)||this._addIdentityChange(s,n)):(s=this._mismatch(s,n,r,e),i=!0),s=s._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Te()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==s&&Ae(s.trackById,r)?(i&&(s=this._verifyReinsertion(s,t,r,e)),Ae(s.item,t)||this._addIdentityChange(s,t)):(s=this._mismatch(s,t,r,e),i=!0),s=s._next,e++}),this.length=e;return this._truncate(s),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Ae(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Ae(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):t=this._addAfter(new an(e,n),s,r),t}_verifyReinsertion(t,e,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,s=t._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new un),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new un),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class an{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class cn{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Ae(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class un{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new cn,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function hn(t,e,n){const r=t.previousIndex;if(null===r)return r;let s=0;return n&&r<n.length&&(s=n[r]),r+e+s}class dn{constructor(){}supports(t){return t instanceof Map||De(t)}create(){return new pn}}class pn{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||De(t)))throw new Error(`Error trying to diff '${bt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,s=n._next;return r&&(r._next=s),s&&(s._prev=r),n._next=null,n._prev=null,n}const n=new fn(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Ae(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class fn{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let gn=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new ht,new ct]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.ngInjectableDef=ft({token:t,providedIn:"root",factory:()=>new t([new sn])}),t})(),mn=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new ht,new ct]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.ngInjectableDef=ft({token:t,providedIn:"root",factory:()=>new t([new dn])}),t})(),bn=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>vn(),t})();const vn=(...t)=>{},yn=[new dn],_n=new gn([new sn]),Cn=new mn(yn);let wn=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>xn(t,Ze),t})();const xn=Ke;let Sn=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>On(t,Ze),t})();const On=Ke;function kn(t,e,n,r){let s=`ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '${e}'. Current value: '${n}'.`;return r&&(s+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){const n=new Error(t);return Pn(n,e),n}(s,t)}function Pn(t,e){t.ngDebugContext=e,t.ngErrorLogger=e.logError.bind(e)}function En(t){return new Error(`ViewDestroyedError: Attempt to use a destroyed view: ${t}`)}function Mn(t,e,n){const r=t.state,s=1792&r;return s===e?(t.state=-1793&r|n,t.initIndex=-1,!0):s===n}function Tn(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function An(t,e){return t.nodes[e]}function In(t,e){return t.nodes[e]}function Rn(t,e){return t.nodes[e]}function Nn(t,e){return t.nodes[e]}function Dn(t,e){return t.nodes[e]}const Vn={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},Fn=()=>{},Un=new Map;function jn(t){let e=Un.get(t);return e||(e=bt(t)+"_"+Un.size,Un.set(t,e)),e}function Ln(t,e,n,r){if(Re.isWrapped(r)){r=Re.unwrap(r);const s=t.def.nodes[e].bindingIndex+n,i=Re.unwrap(t.oldValues[s]);t.oldValues[s]=new Re(i)}return r}function $n(t){return{id:"$$undefined",styles:t.styles,encapsulation:t.encapsulation,data:t.data}}let Bn=0;function zn(t,e,n,r){return!(!(2&t.state)&&Ae(t.oldValues[e.bindingIndex+n],r))}function Gn(t,e,n,r){return!!zn(t,e,n,r)&&(t.oldValues[e.bindingIndex+n]=r,!0)}function Hn(t,e,n,r){const s=t.oldValues[e.bindingIndex+n];if(1&t.state||!Ie(s,r)){const i=e.bindings[n].name;throw kn(Vn.createDebugContext(t,e.nodeIndex),`${i}: ${s}`,`${i}: ${r}`,0!=(1&t.state))}}function qn(t){let e=t;for(;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function Wn(t,e){let n=t;for(;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function Kn(t,e,n,r){try{return qn(33554432&t.def.nodes[e].flags?In(t,e).componentView:t),Vn.handleEvent(t,e,n,r)}catch(s){t.root.errorHandler.handleError(s)}}function Zn(t){return t.parent?In(t.parent,t.parentNodeDef.nodeIndex):null}function Yn(t){return t.parent?t.parentNodeDef.parent:null}function Qn(t,e){switch(201347067&e.flags){case 1:return In(t,e.nodeIndex).renderElement;case 2:return An(t,e.nodeIndex).renderText}}function Xn(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function Jn(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function tr(t){return 1<<t%32}function er(t){const e={};let n=0;const r={};return t&&t.forEach(([t,s])=>{"number"==typeof t?(e[t]=s,n|=tr(t)):r[t]=s}),{matchedQueries:e,references:r,matchedQueryIds:n}}function nr(t,e){return t.map(t=>{let n,r;return Array.isArray(t)?[r,n]=t:(r=0,n=t),n&&("function"==typeof n||"object"==typeof n)&&e&&Object.defineProperty(n,"__source",{value:e,configurable:!0}),{flags:r,token:n,tokenKey:jn(n)}})}function rr(t,e,n){let r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===Wt.Native?In(t,n.renderParent.nodeIndex).renderElement:void 0:e}const sr=new WeakMap;function ir(t){let e=sr.get(t);return e||(e=t(()=>Fn),e.factory=t,sr.set(t,e)),e}function or(t,e,n,r,s){3===e&&(n=t.renderer.parentNode(Qn(t,t.def.lastRenderRootNode))),lr(t,e,0,t.def.nodes.length-1,n,r,s)}function lr(t,e,n,r,s,i,o){for(let l=n;l<=r;l++){const n=t.def.nodes[l];11&n.flags&&cr(t,n,e,s,i,o),l+=n.childCount}}function ar(t,e,n,r,s,i){let o=t;for(;o&&!Xn(o);)o=o.parent;const l=o.parent,a=Yn(o),c=a.nodeIndex+a.childCount;for(let u=a.nodeIndex+1;u<=c;u++){const t=l.def.nodes[u];t.ngContentIndex===e&&cr(l,t,n,r,s,i),u+=t.childCount}if(!l.parent){const o=t.root.projectableNodes[e];if(o)for(let e=0;e<o.length;e++)ur(t,o[e],n,r,s,i)}}function cr(t,e,n,r,s,i){if(8&e.flags)ar(t,e.ngContent.index,n,r,s,i);else{const o=Qn(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&ur(t,o,n,r,s,i),32&e.bindingFlags&&ur(In(t,e.nodeIndex).componentView,o,n,r,s,i)):ur(t,o,n,r,s,i),16777216&e.flags){const o=In(t,e.nodeIndex).viewContainer._embeddedViews;for(let t=0;t<o.length;t++)or(o[t],n,r,s,i)}1&e.flags&&!e.element.name&&lr(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,r,s,i)}}function ur(t,e,n,r,s,i){const o=t.renderer;switch(n){case 1:o.appendChild(r,e);break;case 2:o.insertBefore(r,e,s);break;case 3:o.removeChild(r,e);break;case 0:i.push(e)}}const hr=/^:([^:]+):(.+)$/;function dr(t){if(":"===t[0]){const e=t.match(hr);return[e[1],e[2]]}return["",t]}function pr(t){let e=0;for(let n=0;n<t.length;n++)e|=t[n].flags;return e}const fr=new Object,gr=jn(Ut),mr=jn(Pt),br=jn(qe);function vr(t,e,n,r){return n=_t(n),{index:-1,deps:nr(r,bt(e)),flags:t,token:e,value:n}}function yr(t,e,n=Ut.THROW_IF_NOT_FOUND){const r=It(t);try{if(8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);const o=e.tokenKey;switch(o){case gr:case mr:case br:return t}const l=t._def.providersByKey[o];let a;if(l){let e=t._providers[l.index];return void 0===e&&(e=t._providers[l.index]=_r(t,l)),e===fr?void 0:e}if((a=gt(e.token))&&(s=t,null!=(i=a).providedIn&&(function(t,e){return t._def.modules.indexOf(e)>-1}(s,i.providedIn)||"root"===i.providedIn&&s._def.isRoot))){const n=t._providers.length;return t._def.providers[n]=t._def.providersByKey[e.tokenKey]={flags:5120,value:a.factory,deps:[],index:n,token:e.token},t._providers[n]=fr,t._providers[n]=_r(t,t._def.providersByKey[e.tokenKey])}return 4&e.flags?n:t._parent.get(e.token,n)}finally{It(r)}var s,i}function _r(t,e){let n;switch(201347067&e.flags){case 512:n=function(t,e,n){const r=n.length;switch(r){case 0:return new e;case 1:return new e(yr(t,n[0]));case 2:return new e(yr(t,n[0]),yr(t,n[1]));case 3:return new e(yr(t,n[0]),yr(t,n[1]),yr(t,n[2]));default:const s=new Array(r);for(let e=0;e<r;e++)s[e]=yr(t,n[e]);return new e(...s)}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){const r=n.length;switch(r){case 0:return e();case 1:return e(yr(t,n[0]));case 2:return e(yr(t,n[0]),yr(t,n[1]));case 3:return e(yr(t,n[0]),yr(t,n[1]),yr(t,n[2]));default:const s=Array(r);for(let e=0;e<r;e++)s[e]=yr(t,n[e]);return e(...s)}}(t,e.value,e.deps);break;case 2048:n=yr(t,e.deps[0]);break;case 256:n=e.value}return n===fr||null===n||"object"!=typeof n||131072&e.flags||"function"!=typeof n.ngOnDestroy||(e.flags|=131072),void 0===n?fr:n}function Cr(t,e){const n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;const r=n[e];return r.viewContainerParent=null,Or(n,e),Vn.dirtyParentQueries(r),xr(r),r}function wr(t,e,n){const r=e?Qn(e,e.def.lastRenderRootNode):t.renderElement,s=n.renderer.parentNode(r),i=n.renderer.nextSibling(r);or(n,2,s,i,void 0)}function xr(t){or(t,3,null,null,void 0)}function Sr(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Or(t,e){e>=t.length-1?t.pop():t.splice(e,1)}const kr=new Object;function Pr(t,e,n,r,s,i){return new Er(t,e,n,r,s,i)}class Er extends je{constructor(t,e,n,r,s,i){super(),this.selector=t,this.componentType=e,this._inputs=r,this._outputs=s,this.ngContentSelectors=i,this.viewDefFactory=n}get inputs(){const t=[],e=this._inputs;for(let n in e)t.push({propName:n,templateName:e[n]});return t}get outputs(){const t=[];for(let e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t}create(t,e,n,r){if(!r)throw new Error("ngModule should be provided");const s=ir(this.viewDefFactory),i=s.nodes[0].element.componentProvider.nodeIndex,o=Vn.createRootView(t,e||[],n,s,r,kr),l=Rn(o,i).instance;return n&&o.renderer.setAttribute(In(o,0).renderElement,"ng-version",rn.full),new Mr(o,new Rr(o),l)}}class Mr extends class{}{constructor(t,e,n){super(),this._view=t,this._viewRef=e,this._component=n,this._elDef=this._view.def.nodes[0],this.hostView=e,this.changeDetectorRef=e,this.instance=n}get location(){return new Ze(In(this._view,this._elDef.nodeIndex).renderElement)}get injector(){return new Fr(this._view,this._elDef)}get componentType(){return this._component.constructor}destroy(){this._viewRef.destroy()}onDestroy(t){this._viewRef.onDestroy(t)}}function Tr(t,e,n){return new Ar(t,e,n)}class Ar{constructor(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}get element(){return new Ze(this._data.renderElement)}get injector(){return new Fr(this._view,this._elDef)}get parentInjector(){let t=this._view,e=this._elDef.parent;for(;!e&&t;)e=Yn(t),t=t.parent;return t?new Fr(t,e):new Fr(this._view,null)}clear(){for(let t=this._embeddedViews.length-1;t>=0;t--){const e=Cr(this._data,t);Vn.destroyView(e)}}get(t){const e=this._embeddedViews[t];if(e){const t=new Rr(e);return t.attachToViewContainerRef(this),t}return null}get length(){return this._embeddedViews.length}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,s){const i=n||this.parentInjector;s||t instanceof He||(s=i.get(qe));const o=t.create(i,r,void 0,s);return this.insert(o.hostView,e),o}insert(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");const n=t;return function(t,e,n,r){let s=e.viewContainer._embeddedViews;null==n&&(n=s.length),r.viewContainerParent=t,Sr(s,n,r),function(t,e){const n=Zn(e);if(!n||n===t||16&e.state)return;e.state|=16;let r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(e),function(t,e){if(4&e.flags)return;t.nodeFlags|=4,e.flags|=4;let n=e.parent;for(;n;)n.childFlags|=4,n=n.parent}(e.parent.def,e.parentNodeDef)}(e,r),Vn.dirtyParentQueries(r),wr(e,n>0?s[n-1]:null,r)}(this._view,this._data,e,n._view),n.attachToViewContainerRef(this),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");const n=this._embeddedViews.indexOf(t._view);return function(t,e,n){const r=t.viewContainer._embeddedViews,s=r[e];Or(r,e),null==n&&(n=r.length),Sr(r,n,s),Vn.dirtyParentQueries(s),xr(s),wr(t,n>0?r[n-1]:null,s)}(this._data,n,e),t}indexOf(t){return this._embeddedViews.indexOf(t._view)}remove(t){const e=Cr(this._data,t);e&&Vn.destroyView(e)}detach(t){const e=Cr(this._data,t);return e?new Rr(e):null}}function Ir(t){return new Rr(t)}class Rr{constructor(t){this._view=t,this._viewContainerRef=null,this._appRef=null}get rootNodes(){return function(t){const e=[];return or(t,0,void 0,void 0,e),e}(this._view)}get context(){return this._view.context}get destroyed(){return 0!=(128&this._view.state)}markForCheck(){qn(this._view)}detach(){this._view.state&=-5}detectChanges(){const t=this._view.root.rendererFactory;t.begin&&t.begin();try{Vn.checkAndUpdateView(this._view)}finally{t.end&&t.end()}}checkNoChanges(){Vn.checkNoChangesView(this._view)}reattach(){this._view.state|=4}onDestroy(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)}destroy(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Vn.destroyView(this._view)}detachFromAppRef(){this._appRef=null,xr(this._view),Vn.dirtyParentQueries(this._view)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}}function Nr(t,e){return new Dr(t,e)}class Dr extends wn{constructor(t,e){super(),this._parentView=t,this._def=e}createEmbeddedView(t){return new Rr(Vn.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))}get elementRef(){return new Ze(In(this._parentView,this._def.nodeIndex).renderElement)}}function Vr(t,e){return new Fr(t,e)}class Fr{constructor(t,e){this.view=t,this.elDef=e}get(t,e=Ut.THROW_IF_NOT_FOUND){return Vn.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:jn(t)},e)}}function Ur(t,e){const n=t.def.nodes[e];if(1&n.flags){const e=In(t,n.nodeIndex);return n.element.template?e.template:e.renderElement}if(2&n.flags)return An(t,n.nodeIndex).renderText;if(20240&n.flags)return Rn(t,n.nodeIndex).instance;throw new Error(`Illegal state: read nodeValue for node index ${e}`)}function jr(t){return new Lr(t.renderer)}class Lr{constructor(t){this.delegate=t}selectRootElement(t){return this.delegate.selectRootElement(t)}createElement(t,e){const[n,r]=dr(e),s=this.delegate.createElement(r,n);return t&&this.delegate.appendChild(t,s),s}createViewRoot(t){return t}createTemplateAnchor(t){const e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e}createText(t,e){const n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n}projectNodes(t,e){for(let n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])}attachViewAfter(t,e){const n=this.delegate.parentNode(t),r=this.delegate.nextSibling(t);for(let s=0;s<e.length;s++)this.delegate.insertBefore(n,e[s],r)}detachView(t){for(let e=0;e<t.length;e++){const n=t[e],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}}destroyView(t,e){for(let n=0;n<e.length;n++)this.delegate.destroyNode(e[n])}listen(t,e,n){return this.delegate.listen(t,e,n)}listenGlobal(t,e,n){return this.delegate.listen(t,e,n)}setElementProperty(t,e,n){this.delegate.setProperty(t,e,n)}setElementAttribute(t,e,n){const[r,s]=dr(e);null!=n?this.delegate.setAttribute(t,s,n,r):this.delegate.removeAttribute(t,s,r)}setBindingDebugInfo(t,e,n){}setElementClass(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)}setElementStyle(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)}invokeElementMethod(t,e,n){t[e].apply(t,n)}setText(t,e){this.delegate.setValue(t,e)}animate(){throw new Error("Renderer.animate is no longer supported!")}}function $r(t,e,n,r){return new Br(t,e,n,r)}class Br{constructor(t,e,n,r){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){const e=t._def,n=t._providers=new Array(e.providers.length);for(let r=0;r<e.providers.length;r++){const s=e.providers[r];4096&s.flags||void 0===n[r]&&(n[r]=_r(t,s))}}(this)}get(t,e=Ut.THROW_IF_NOT_FOUND,n=dt.Default){let r=0;return n&dt.SkipSelf?r|=1:n&dt.Self&&(r|=4),yr(this,{token:t,tokenKey:jn(t),flags:r},e)}get instance(){return this.get(this._moduleType)}get componentFactoryResolver(){return this.get(ze)}destroy(){if(this._destroyed)throw new Error(`The ng module ${bt(this.instance.constructor)} has already been destroyed.`);this._destroyed=!0,function(t,e){const n=t._def,r=new Set;for(let s=0;s<n.providers.length;s++)if(131072&n.providers[s].flags){const e=t._providers[s];if(e&&e!==fr){const t=e.ngOnDestroy;"function"!=typeof t||r.has(e)||(t.apply(e),r.add(e))}}}(this),this._destroyListeners.forEach(t=>t())}onDestroy(t){this._destroyListeners.push(t)}}const zr=jn(Qe),Gr=jn(tn),Hr=jn(Ze),qr=jn(Sn),Wr=jn(wn),Kr=jn(bn),Zr=jn(Ut),Yr=jn(Pt);function Qr(t,e,n,r,s,i,o,l){const a=[];if(o)for(let u in o){const[t,e]=o[u];a[t]={flags:8,name:u,nonMinifiedName:e,ns:null,securityContext:null,suffix:null}}const c=[];if(l)for(let u in l)c.push({type:1,propName:u,target:null,eventName:l[u]});return ts(t,e|=16384,n,r,s,s,i,a,c)}function Xr(t,e,n){return ts(-1,t|=16,null,0,e,e,n)}function Jr(t,e,n,r,s){return ts(-1,t,e,0,n,r,s)}function ts(t,e,n,r,s,i,o,l,a){const{matchedQueries:c,references:u,matchedQueryIds:h}=er(n);a||(a=[]),l||(l=[]),i=_t(i);const d=nr(o,bt(s));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:c,matchedQueryIds:h,references:u,ngContentIndex:-1,childCount:r,bindings:l,bindingFlags:pr(l),outputs:a,element:null,provider:{token:s,value:i,deps:d},text:null,query:null,ngContent:null}}function es(t,e){return is(t,e)}function ns(t,e){let n=t;for(;n.parent&&!Xn(n);)n=n.parent;return os(n.parent,Yn(n),!0,e.provider.value,e.provider.deps)}function rs(t,e){const n=os(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(let r=0;r<e.outputs.length;r++){const s=e.outputs[r],i=n[s.propName];if(!Fe(i))throw new Error(`@Output ${s.propName} not initialized in '${n.constructor.name}'.`);{const n=i.subscribe(ss(t,e.parent.nodeIndex,s.eventName));t.disposables[e.outputIndex+r]=n.unsubscribe.bind(n)}}return n}function ss(t,e,n){return r=>Kn(t,e,n,r)}function is(t,e){const n=(8192&e.flags)>0,r=e.provider;switch(201347067&e.flags){case 512:return os(t,e.parent,n,r.value,r.deps);case 1024:return function(t,e,n,r,s){const i=s.length;switch(i){case 0:return r();case 1:return r(as(t,e,n,s[0]));case 2:return r(as(t,e,n,s[0]),as(t,e,n,s[1]));case 3:return r(as(t,e,n,s[0]),as(t,e,n,s[1]),as(t,e,n,s[2]));default:const o=Array(i);for(let r=0;r<i;r++)o[r]=as(t,e,n,s[r]);return r(...o)}}(t,e.parent,n,r.value,r.deps);case 2048:return as(t,e.parent,n,r.deps[0]);case 256:return r.value}}function os(t,e,n,r,s){const i=s.length;switch(i){case 0:return new r;case 1:return new r(as(t,e,n,s[0]));case 2:return new r(as(t,e,n,s[0]),as(t,e,n,s[1]));case 3:return new r(as(t,e,n,s[0]),as(t,e,n,s[1]),as(t,e,n,s[2]));default:const o=new Array(i);for(let r=0;r<i;r++)o[r]=as(t,e,n,s[r]);return new r(...o)}}const ls={};function as(t,e,n,r,s=Ut.THROW_IF_NOT_FOUND){if(8&r.flags)return r.token;const i=t;2&r.flags&&(s=null);const o=r.tokenKey;o===Kr&&(n=!(!e||!e.element.componentView)),e&&1&r.flags&&(n=!1,e=e.parent);let l=t;for(;l;){if(e)switch(o){case zr:return jr(cs(l,e,n));case Gr:return cs(l,e,n).renderer;case Hr:return new Ze(In(l,e.nodeIndex).renderElement);case qr:return In(l,e.nodeIndex).viewContainer;case Wr:if(e.element.template)return In(l,e.nodeIndex).template;break;case Kr:return Ir(cs(l,e,n));case Zr:case Yr:return Vr(l,e);default:const t=(n?e.element.allProviders:e.element.publicProviders)[o];if(t){let e=Rn(l,t.nodeIndex);return e||(e={instance:is(l,t)},l.nodes[t.nodeIndex]=e),e.instance}}n=Xn(l),e=Yn(l),l=l.parent,4&r.flags&&(l=null)}const a=i.root.injector.get(r.token,ls);return a!==ls||s===ls?a:i.root.ngModule.injector.get(r.token,s)}function cs(t,e,n){let r;if(n)r=In(t,e.nodeIndex).componentView;else for(r=t;r.parent&&!Xn(r);)r=r.parent;return r}function us(t,e,n,r,s,i){if(32768&n.flags){const e=In(t,n.parent.nodeIndex).componentView;2&e.def.flags&&(e.state|=8)}if(e.instance[n.bindings[r].name]=s,524288&n.flags){i=i||{};const e=Re.unwrap(t.oldValues[n.bindingIndex+r]);i[n.bindings[r].nonMinifiedName]=new Ue(e,s,0!=(2&t.state))}return t.oldValues[n.bindingIndex+r]=s,i}function hs(t,e){if(!(t.def.nodeFlags&e))return;const n=t.def.nodes;let r=0;for(let s=0;s<n.length;s++){const i=n[s];let o=i.parent;for(!o&&i.flags&e&&ps(t,s,i.flags&e,r++),0==(i.childFlags&e)&&(s+=i.childCount);o&&1&o.flags&&s===o.nodeIndex+o.childCount;)o.directChildFlags&e&&(r=ds(t,o,e,r)),o=o.parent}}function ds(t,e,n,r){for(let s=e.nodeIndex+1;s<=e.nodeIndex+e.childCount;s++){const e=t.def.nodes[s];e.flags&n&&ps(t,s,e.flags&n,r++),s+=e.childCount}return r}function ps(t,e,n,r){const s=Rn(t,e);if(!s)return;const i=s.instance;i&&(Vn.setCurrentNode(t,e),1048576&n&&Tn(t,512,r)&&i.ngAfterContentInit(),2097152&n&&i.ngAfterContentChecked(),4194304&n&&Tn(t,768,r)&&i.ngAfterViewInit(),8388608&n&&i.ngAfterViewChecked(),131072&n&&i.ngOnDestroy())}const fs=new kt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Kt}),gs={},ms=function(){var t={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencySymbol:15,CurrencyName:16,Currencies:17,PluralCase:18,ExtraData:19};return t[t.LocaleId]="LocaleId",t[t.DayPeriodsFormat]="DayPeriodsFormat",t[t.DayPeriodsStandalone]="DayPeriodsStandalone",t[t.DaysFormat]="DaysFormat",t[t.DaysStandalone]="DaysStandalone",t[t.MonthsFormat]="MonthsFormat",t[t.MonthsStandalone]="MonthsStandalone",t[t.Eras]="Eras",t[t.FirstDayOfWeek]="FirstDayOfWeek",t[t.WeekendRange]="WeekendRange",t[t.DateFormat]="DateFormat",t[t.TimeFormat]="TimeFormat",t[t.DateTimeFormat]="DateTimeFormat",t[t.NumberSymbols]="NumberSymbols",t[t.NumberFormats]="NumberFormats",t[t.CurrencySymbol]="CurrencySymbol",t[t.CurrencyName]="CurrencyName",t[t.Currencies]="Currencies",t[t.PluralCase]="PluralCase",t[t.ExtraData]="ExtraData",t}();var bs=["en",[["a","p"],["AM","PM"],void 0],[["AM","PM"],void 0,void 0],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],void 0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",void 0,"{1} 'at' {0}",void 0],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];function vs(t){const e=t.toLowerCase().replace(/_/g,"-");let n=gs[e];if(n)return n;const r=e.split("-")[0];if(n=gs[r],n)return n;if("en"===r)return bs;throw new Error(`Missing locale data for the locale "${t}".`)}let ys="en-US";class _s extends P{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,s=t=>null,i=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(s=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(i=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(s=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(i=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const o=super.subscribe(r,s,i);return t instanceof d&&t.add(o),o}}function Cs(){return this._results[Te()]()}class ws{constructor(){this.dirty=!0,this._results=[],this.changes=new _s,this.length=0;const t=Te(),e=ws.prototype;e[t]||(e[t]=Cs)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?(n===e&&(n=e.slice(0,r)),t(s,n)):n!==e&&n.push(s)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}const xs=new kt("Application Initializer");let Ss=(()=>class{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Ve(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}})();const Os=new kt("AppId");function ks(){return`${Ps()}${Ps()}${Ps()}`}function Ps(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Es=new kt("Platform Initializer"),Ms=new kt("Platform ID"),Ts=new kt("appBootstrapListener");let As=(()=>class{log(t){console.log(t)}warn(t){console.warn(t)}})();const Is=new kt("LocaleId");function Rs(){throw new Error("Runtime compiler is not loaded")}const Ns=Rs,Ds=Rs,Vs=Rs,Fs=Rs;let Us,js,Ls=(()=>class{constructor(){this.compileModuleSync=Ns,this.compileModuleAsync=Ds,this.compileModuleAndAllComponentsSync=Vs,this.compileModuleAndAllComponentsAsync=Fs}clearCache(){}clearCacheFor(t){}getModuleId(t){}})();class $s{}function Bs(){const t=Ot.wtf;return!(!t||(Us=t.trace,!Us)||(js=Us.events,0))}const zs=Bs();function Gs(t,e){return null}const Hs=zs?function(t,e=null){return js.createScope(t,e)}:(t,e)=>Gs,qs=zs?function(t,e){return Us.leaveScope(t,e),e}:(t,e)=>e,Ws=(()=>Promise.resolve(0))();function Ks(t){"undefined"==typeof Zone?Ws.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Zs{constructor({enableLongStackTrace:t=!1}){if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _s(!1),this.onMicrotaskEmpty=new _s(!1),this.onStable=new _s(!1),this.onError=new _s(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");var e;Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(e=this)._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,n,r,s,i,o)=>{try{return Js(e),t.invokeTask(r,s,i,o)}finally{ti(e)}},onInvoke:(t,n,r,s,i,o,l)=>{try{return Js(e),t.invoke(r,s,i,o,l)}finally{ti(e)}},onHasTask:(t,n,r,s)=>{t.hasTask(r,s),n===r&&("microTask"==s.change?(e.hasPendingMicrotasks=s.microTask,Xs(e)):"macroTask"==s.change&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,n,r,s)=>(t.handleError(r,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Zs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Zs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const s=this._inner,i=s.scheduleEventTask("NgZoneEvent: "+r,t,Qs,Ys,Ys);try{return s.runTask(i,e,n)}finally{s.cancelTask(i)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function Ys(){}const Qs={};function Xs(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Js(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ti(t){t._nesting--,Xs(t)}class ei{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _s,this.onMicrotaskEmpty=new _s,this.onStable=new _s,this.onError=new _s}run(t){return t()}runGuarded(t){return t()}runOutsideAngular(t){return t()}runTask(t){return t()}}let ni=(()=>class{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Zs.assertNotInAngularZone(),Ks(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ks(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}})(),ri=(()=>{class t{constructor(){this._applications=new Map,oi.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return oi.findTestabilityInTree(this,t,e)}}return t.ctorParameters=()=>[],t})();class si{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let ii,oi=new si;const li=new kt("AllowMultipleToken");class ai{constructor(t,e){this.name=t,this.token=e}}function ci(t,e,n=[]){const r=`Platform: ${e}`,s=new kt(r);return(e=[])=>{let i=ui();if(!i||i.injector.get(li,!1))if(t)t(n.concat(e).concat({provide:s,useValue:!0}));else{const t=n.concat(e).concat({provide:s,useValue:!0});!function(t){if(ii&&!ii.destroyed&&!ii.injector.get(li,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ii=t.get(hi);const e=t.get(Es,null);e&&e.forEach(t=>t())}(Ut.create({providers:t,name:r}))}return function(t){const e=ui();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(s)}}function ui(){return ii&&!ii.destroyed?ii:null}let hi=(()=>class{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t){let e;return e="noop"===t?new ei:("zone.js"===t?void 0:t)||new Zs({enableLongStackTrace:Qt()}),e}(e?e.ngZone:void 0),r=[{provide:Zs,useValue:n}];return n.run(()=>{const e=Ut.create({providers:r,parent:this.injector,name:t.moduleType.name}),s=t.create(e),i=s.injector.get(ke,null);if(!i)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return o=s.injector.get(Is,"en-US"),ys=o.toLowerCase().replace(/_/g,"-"),s.onDestroy(()=>fi(this._modules,s)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{i.handleError(t)}})),function(t,e,n){try{const r=n();return Ve(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(i,n,()=>{const t=s.injector.get(Ss);return t.runInitializers(),t.donePromise.then(()=>(this._moduleDoBootstrap(s),s))});var o})}bootstrapModule(t,e=[]){const n=di({},e);return function(t,e,n){return t.get($s).createCompiler([e]).compileModuleAsync(n)}(this.injector,n,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(pi);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${bt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}})();function di(t,e){return Array.isArray(e)?e.reduce(di,t):Object.assign({},t,e)}let pi=(()=>{class t{constructor(t,e,n,r,s,i){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=s,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Qt(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new C(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new C(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Zs.assertNotInAngularZone(),Ks(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Zs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=X(o,l.pipe(ot()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof je?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n instanceof He?null:this._injector.get(qe),s=n.create(Ut.NULL,[],e||n.selector,r);s.onDestroy(()=>{this._unloadComponent(s)});const i=s.injector.get(ni,null);return i&&s.injector.get(ri).registerApplication(s.location.nativeElement,i),this._loadComponent(s),Qt()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),s}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");const e=t._tickScope();try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1,qs(e)}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;fi(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ts,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),fi(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t._tickScope=Hs("ApplicationRef#tick()"),t})();function fi(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class gi{}class mi{}const bi={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let vi=(()=>class{constructor(t,e){this._compiler=t,this._config=e||bi}load(t){return this._compiler instanceof Ls?this.loadFactory(t):this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>yi(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),s="NgFactory";return void 0===r&&(r="default",s=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+s]).then(t=>yi(t,e,r))}})();function yi(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}class _i{constructor(t,e){this.name=t,this.callback=e}}class Ci{constructor(t,e,n){this.listeners=[],this.parent=null,this._debugContext=n,this.nativeNode=t,e&&e instanceof wi&&e.addChild(this)}get injector(){return this._debugContext.injector}get componentInstance(){return this._debugContext.component}get context(){return this._debugContext.context}get references(){return this._debugContext.references}get providerTokens(){return this._debugContext.providerTokens}}class wi extends Ci{constructor(t,e,n){super(t,e,n),this.properties={},this.attributes={},this.classes={},this.styles={},this.childNodes=[],this.nativeElement=t}addChild(t){t&&(this.childNodes.push(t),t.parent=this)}removeChild(t){const e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))}insertChildrenAfter(t,e){const n=this.childNodes.indexOf(t);-1!==n&&(this.childNodes.splice(n+1,0,...e),e.forEach(e=>{e.parent&&e.parent.removeChild(e),t.parent=this}))}insertBefore(t,e){const n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))}query(t){return this.queryAll(t)[0]||null}queryAll(t){const e=[];return function t(e,n,r){e.childNodes.forEach(e=>{e instanceof wi&&(n(e)&&r.push(e),t(e,n,r))})}(this,t,e),e}queryAllNodes(t){const e=[];return function t(e,n,r){e instanceof wi&&e.childNodes.forEach(e=>{n(e)&&r.push(e),e instanceof wi&&t(e,n,r)})}(this,t,e),e}get children(){return this.childNodes.filter(t=>t instanceof wi)}triggerEventHandler(t,e){this.listeners.forEach(n=>{n.name==t&&n.callback(e)})}}const xi=new Map,Si=function(t){return xi.get(t)||null};function Oi(t){xi.set(t.nativeNode,t)}const ki=ci(null,"core",[{provide:Ms,useValue:"unknown"},{provide:hi,deps:[Ut]},{provide:ri,deps:[]},{provide:As,deps:[]}]);function Pi(){return _n}function Ei(){return Cn}function Mi(t){return t||"en-US"}function Ti(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}let Ai=(()=>class{constructor(t){}})();function Ii(t,e,n,r,s,i){t|=1;const{matchedQueries:o,references:l,matchedQueryIds:a}=er(e);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:o,matchedQueryIds:a,references:l,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:i?ir(i):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:s||Fn},provider:null,text:null,query:null,ngContent:null}}function Ri(t,e,n,r,s,i,o=[],l,a,c,u,h){c||(c=Fn);const{matchedQueries:d,references:p,matchedQueryIds:f}=er(n);let g=null,m=null;i&&([g,m]=dr(i)),l=l||[];const b=new Array(l.length);for(let _=0;_<l.length;_++){const[t,e,n]=l[_],[r,s]=dr(e);let i=void 0,o=void 0;switch(15&t){case 4:o=n;break;case 1:case 8:i=n}b[_]={flags:t,ns:r,name:s,nonMinifiedName:s,securityContext:i,suffix:o}}a=a||[];const v=new Array(a.length);for(let _=0;_<a.length;_++){const[t,e]=a[_];v[_]={type:0,target:t,eventName:e,propName:null}}const y=(o=o||[]).map(([t,e])=>{const[n,r]=dr(t);return[n,r,e]});return h=function(t){if(t&&"$$undefined"===t.id){const e=null!=t.encapsulation&&t.encapsulation!==Wt.None||t.styles.length||Object.keys(t.data).length;t.id=e?`c${Bn++}`:"$$empty"}return t&&"$$empty"===t.id&&(t=null),t||null}(h),u&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:d,matchedQueryIds:f,references:p,ngContentIndex:r,childCount:s,bindings:b,bindingFlags:pr(b),outputs:v,element:{ns:g,name:m,attrs:y,template:null,componentProvider:null,componentView:u||null,componentRendererType:h,publicProviders:null,allProviders:null,handleEvent:c||Fn},provider:null,text:null,query:null,ngContent:null}}function Ni(t,e,n){const r=n.element,s=t.root.selectorOrNode,i=t.renderer;let o;if(t.parent||!s){o=r.name?i.createElement(r.name,r.ns):i.createComment("");const s=rr(t,e,n);s&&i.appendChild(s,o)}else o=i.selectRootElement(s,!!r.componentRendererType&&r.componentRendererType.encapsulation===Wt.ShadowDom);if(r.attrs)for(let l=0;l<r.attrs.length;l++){const[t,e,n]=r.attrs[l];i.setAttribute(o,e,n,t)}return o}function Di(t,e,n,r){for(let o=0;o<n.outputs.length;o++){const l=n.outputs[o],a=Vi(t,n.nodeIndex,(i=l.eventName,(s=l.target)?`${s}:${i}`:i));let c=l.target,u=t;"component"===l.target&&(c=null,u=e);const h=u.renderer.listen(c||r,l.eventName,a);t.disposables[n.outputIndex+o]=h}var s,i}function Vi(t,e,n){return r=>Kn(t,e,n,r)}function Fi(t,e,n,r){if(!Gn(t,e,n,r))return!1;const s=e.bindings[n],i=In(t,e.nodeIndex),o=i.renderElement,l=s.name;switch(15&s.flags){case 1:!function(t,e,n,r,s,i){const o=e.securityContext;let l=o?t.root.sanitizer.sanitize(o,i):i;l=null!=l?l.toString():null;const a=t.renderer;null!=i?a.setAttribute(n,s,l,r):a.removeAttribute(n,s,r)}(t,s,o,s.ns,l,r);break;case 2:!function(t,e,n,r){const s=t.renderer;r?s.addClass(e,n):s.removeClass(e,n)}(t,o,l,r);break;case 4:!function(t,e,n,r,s){let i=t.root.sanitizer.sanitize(ye.STYLE,s);if(null!=i){i=i.toString();const t=e.suffix;null!=t&&(i+=t)}else i=null;const o=t.renderer;null!=i?o.setStyle(n,r,i):o.removeStyle(n,r)}(t,s,o,l,r);break;case 8:!function(t,e,n,r,s){const i=e.securityContext;let o=i?t.root.sanitizer.sanitize(i,s):s;t.renderer.setProperty(n,r,o)}(33554432&e.flags&&32&s.flags?i.componentView:t,s,o,l,r)}return!0}function Ui(t,e,n){let r=[];for(let s in n)r.push({propName:s,bindingType:n[s]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:e,filterId:tr(e),bindings:r},ngContent:null}}function ji(t){const e=t.def.nodeMatchedQueries;for(;t.parent&&Jn(t);){let n=t.parentNodeDef;t=t.parent;const r=n.nodeIndex+n.childCount;for(let s=0;s<=r;s++){const r=t.def.nodes[s];67108864&r.flags&&536870912&r.flags&&(r.query.filterId&e)===r.query.filterId&&Dn(t,s).setDirty(),!(1&r.flags&&s+r.childCount<n.nodeIndex)&&67108864&r.childFlags&&536870912&r.childFlags||(s+=r.childCount)}}if(134217728&t.def.nodeFlags)for(let n=0;n<t.def.nodes.length;n++){const e=t.def.nodes[n];134217728&e.flags&&536870912&e.flags&&Dn(t,n).setDirty(),n+=e.childCount}}function Li(t,e){const n=Dn(t,e.nodeIndex);if(!n.dirty)return;let r,s=void 0;if(67108864&e.flags){const n=e.parent.parent;s=$i(t,n.nodeIndex,n.nodeIndex+n.childCount,e.query,[]),r=Rn(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(s=$i(t,0,t.def.nodes.length-1,e.query,[]),r=t.component);n.reset(s);const i=e.query.bindings;let o=!1;for(let l=0;l<i.length;l++){const t=i[l];let e;switch(t.bindingType){case 0:e=n.first;break;case 1:e=n,o=!0}r[t.propName]=e}o&&n.notifyOnChanges()}function $i(t,e,n,r,s){for(let i=e;i<=n;i++){const e=t.def.nodes[i],n=e.matchedQueries[r.id];if(null!=n&&s.push(Bi(t,e,n)),1&e.flags&&e.element.template&&(e.element.template.nodeMatchedQueries&r.filterId)===r.filterId){const n=In(t,i);if((e.childMatchedQueries&r.filterId)===r.filterId&&($i(t,i+1,i+e.childCount,r,s),i+=e.childCount),16777216&e.flags){const t=n.viewContainer._embeddedViews;for(let e=0;e<t.length;e++){const i=t[e],o=Zn(i);o&&o===n&&$i(i,0,i.def.nodes.length-1,r,s)}}const o=n.template._projectedViews;if(o)for(let t=0;t<o.length;t++){const e=o[t];$i(e,0,e.def.nodes.length-1,r,s)}}(e.childMatchedQueries&r.filterId)!==r.filterId&&(i+=e.childCount)}return s}function Bi(t,e,n){if(null!=n)switch(n){case 1:return In(t,e.nodeIndex).renderElement;case 0:return new Ze(In(t,e.nodeIndex).renderElement);case 2:return In(t,e.nodeIndex).template;case 3:return In(t,e.nodeIndex).viewContainer;case 4:return Rn(t,e.nodeIndex).instance}}function zi(t,e,n){const r=rr(t,e,n);r&&ar(t,n.ngContent.index,1,r,null,void 0)}function Gi(t,e){return qi(128,t,new Array(e+1))}function Hi(t,e){const n=Object.keys(e),r=n.length,s=new Array(r);for(let i=0;i<r;i++){const t=n[i];s[e[t]]=t}return qi(64,t,s)}function qi(t,e,n){const r=new Array(n.length);for(let s=0;s<n.length;s++){const t=n[s];r[s]={flags:8,name:t,ns:null,nonMinifiedName:t,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:r,bindingFlags:pr(r),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function Wi(t,e,n){const r=new Array(n.length-1);for(let s=1;s<n.length;s++)r[s-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[s]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function Ki(t,e,n){let r;const s=t.renderer;r=s.createText(n.text.prefix);const i=rr(t,e,n);return i&&s.appendChild(i,r),{renderText:r}}function Zi(t,e){return(null!=t?t.toString():"")+e.suffix}function Yi(t,e,n,r){let s=0,i=0,o=0,l=0,a=0,c=null,u=null,h=!1,d=!1,p=null;for(let f=0;f<e.length;f++){const t=e[f];if(t.nodeIndex=f,t.parent=c,t.bindingIndex=s,t.outputIndex=i,t.renderParent=u,o|=t.flags,a|=t.matchedQueryIds,t.element){const e=t.element;e.publicProviders=c?c.element.publicProviders:Object.create(null),e.allProviders=e.publicProviders,h=!1,d=!1,t.element.template&&(a|=t.element.template.nodeMatchedQueries)}if(Xi(c,t,e.length),s+=t.bindings.length,i+=t.outputs.length,!u&&3&t.flags&&(p=t),20224&t.flags){h||(h=!0,c.element.publicProviders=Object.create(c.element.publicProviders),c.element.allProviders=c.element.publicProviders);const e=0!=(32768&t.flags);0==(8192&t.flags)||e?c.element.publicProviders[jn(t.provider.token)]=t:(d||(d=!0,c.element.allProviders=Object.create(c.element.publicProviders)),c.element.allProviders[jn(t.provider.token)]=t),e&&(c.element.componentProvider=t)}if(c?(c.childFlags|=t.flags,c.directChildFlags|=t.flags,c.childMatchedQueries|=t.matchedQueryIds,t.element&&t.element.template&&(c.childMatchedQueries|=t.element.template.nodeMatchedQueries)):l|=t.flags,t.childCount>0)c=t,Qi(t)||(u=t);else for(;c&&f===c.nodeIndex+c.childCount;){const t=c.parent;t&&(t.childFlags|=c.childFlags,t.childMatchedQueries|=c.childMatchedQueries),c=t,u=c&&Qi(c)?c.renderParent:c}}return{factory:null,nodeFlags:o,rootNodeFlags:l,nodeMatchedQueries:a,flags:t,nodes:e,updateDirectives:n||Fn,updateRenderer:r||Fn,handleEvent:(t,n,r,s)=>e[n].element.handleEvent(t,r,s),bindingCount:s,outputCount:i,lastRenderRootNode:p}}function Qi(t){return 0!=(1&t.flags)&&null===t.element.name}function Xi(t,e,n){const r=e.element&&e.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error(`Illegal State: Last root node of a template can't have embedded views, at index ${e.nodeIndex}!`)}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error(`Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ${e.nodeIndex}!`);if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error(`Illegal State: Content Query nodes need to be children of directives, at index ${e.nodeIndex}!`);if(134217728&e.flags&&t)throw new Error(`Illegal State: View Query nodes have to be top level nodes, at index ${e.nodeIndex}!`)}if(e.childCount){const r=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=r&&e.nodeIndex+e.childCount>r)throw new Error(`Illegal State: childCount of node leads outside of parent, at index ${e.nodeIndex}!`)}}function Ji(t,e,n,r){const s=no(t.root,t.renderer,t,e,n);return ro(s,t.component,r),so(s),s}function to(t,e,n){const r=no(t,t.renderer,null,null,e);return ro(r,n,n),so(r),r}function eo(t,e,n,r){const s=e.element.componentRendererType;let i;return i=s?t.root.rendererFactory.createRenderer(r,s):t.root.renderer,no(t.root,i,t,e.element.componentProvider,n)}function no(t,e,n,r,s){const i=new Array(s.nodes.length),o=s.outputCount?new Array(s.outputCount):null;return{def:s,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:i,state:13,root:t,renderer:e,oldValues:new Array(s.bindingCount),disposables:o,initIndex:-1}}function ro(t,e,n){t.component=e,t.context=n}function so(t){let e;Xn(t)&&(e=In(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);const n=t.def,r=t.nodes;for(let s=0;s<n.nodes.length;s++){const i=n.nodes[s];let o;switch(Vn.setCurrentNode(t,s),201347067&i.flags){case 1:const n=Ni(t,e,i);let l=void 0;if(33554432&i.flags){const e=ir(i.element.componentView);l=Vn.createComponentView(t,i,e,n)}Di(t,l,i,n),o={renderElement:n,componentView:l,viewContainer:null,template:i.element.template?Nr(t,i):void 0},16777216&i.flags&&(o.viewContainer=Tr(t,i,o));break;case 2:o=Ki(t,e,i);break;case 512:case 1024:case 2048:case 256:o=r[s],o||4096&i.flags||(o={instance:es(t,i)});break;case 16:o={instance:ns(t,i)};break;case 16384:o=r[s],o||(o={instance:rs(t,i)}),32768&i.flags&&ro(In(t,i.parent.nodeIndex).componentView,o.instance,o.instance);break;case 32:case 64:case 128:o={value:void 0};break;case 67108864:case 134217728:o=new ws;break;case 8:zi(t,e,i),o=void 0}r[s]=o}fo(t,po.CreateViewNodes),vo(t,201326592,268435456,0)}function io(t){ao(t),Vn.updateDirectives(t,1),go(t,po.CheckNoChanges),Vn.updateRenderer(t,1),fo(t,po.CheckNoChanges),t.state&=-97}function oo(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,Mn(t,0,256),ao(t),Vn.updateDirectives(t,0),go(t,po.CheckAndUpdate),vo(t,67108864,536870912,0);let e=Mn(t,256,512);hs(t,2097152|(e?1048576:0)),Vn.updateRenderer(t,0),fo(t,po.CheckAndUpdate),vo(t,134217728,536870912,0),e=Mn(t,512,768),hs(t,8388608|(e?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,Mn(t,768,1024)}function lo(t,e,n,r,s,i,o,l,a,c,u,h,d){return 0===n?function(t,e,n,r,s,i,o,l,a,c,u,h){switch(201347067&e.flags){case 1:return function(t,e,n,r,s,i,o,l,a,c,u,h){const d=e.bindings.length;let p=!1;return d>0&&Fi(t,e,0,n)&&(p=!0),d>1&&Fi(t,e,1,r)&&(p=!0),d>2&&Fi(t,e,2,s)&&(p=!0),d>3&&Fi(t,e,3,i)&&(p=!0),d>4&&Fi(t,e,4,o)&&(p=!0),d>5&&Fi(t,e,5,l)&&(p=!0),d>6&&Fi(t,e,6,a)&&(p=!0),d>7&&Fi(t,e,7,c)&&(p=!0),d>8&&Fi(t,e,8,u)&&(p=!0),d>9&&Fi(t,e,9,h)&&(p=!0),p}(t,e,n,r,s,i,o,l,a,c,u,h);case 2:return function(t,e,n,r,s,i,o,l,a,c,u,h){let d=!1;const p=e.bindings,f=p.length;if(f>0&&Gn(t,e,0,n)&&(d=!0),f>1&&Gn(t,e,1,r)&&(d=!0),f>2&&Gn(t,e,2,s)&&(d=!0),f>3&&Gn(t,e,3,i)&&(d=!0),f>4&&Gn(t,e,4,o)&&(d=!0),f>5&&Gn(t,e,5,l)&&(d=!0),f>6&&Gn(t,e,6,a)&&(d=!0),f>7&&Gn(t,e,7,c)&&(d=!0),f>8&&Gn(t,e,8,u)&&(d=!0),f>9&&Gn(t,e,9,h)&&(d=!0),d){let d=e.text.prefix;f>0&&(d+=Zi(n,p[0])),f>1&&(d+=Zi(r,p[1])),f>2&&(d+=Zi(s,p[2])),f>3&&(d+=Zi(i,p[3])),f>4&&(d+=Zi(o,p[4])),f>5&&(d+=Zi(l,p[5])),f>6&&(d+=Zi(a,p[6])),f>7&&(d+=Zi(c,p[7])),f>8&&(d+=Zi(u,p[8])),f>9&&(d+=Zi(h,p[9]));const g=An(t,e.nodeIndex).renderText;t.renderer.setValue(g,d)}return d}(t,e,n,r,s,i,o,l,a,c,u,h);case 16384:return function(t,e,n,r,s,i,o,l,a,c,u,h){const d=Rn(t,e.nodeIndex),p=d.instance;let f=!1,g=void 0;const m=e.bindings.length;return m>0&&zn(t,e,0,n)&&(f=!0,g=us(t,d,e,0,n,g)),m>1&&zn(t,e,1,r)&&(f=!0,g=us(t,d,e,1,r,g)),m>2&&zn(t,e,2,s)&&(f=!0,g=us(t,d,e,2,s,g)),m>3&&zn(t,e,3,i)&&(f=!0,g=us(t,d,e,3,i,g)),m>4&&zn(t,e,4,o)&&(f=!0,g=us(t,d,e,4,o,g)),m>5&&zn(t,e,5,l)&&(f=!0,g=us(t,d,e,5,l,g)),m>6&&zn(t,e,6,a)&&(f=!0,g=us(t,d,e,6,a,g)),m>7&&zn(t,e,7,c)&&(f=!0,g=us(t,d,e,7,c,g)),m>8&&zn(t,e,8,u)&&(f=!0,g=us(t,d,e,8,u,g)),m>9&&zn(t,e,9,h)&&(f=!0,g=us(t,d,e,9,h,g)),g&&p.ngOnChanges(g),65536&e.flags&&Tn(t,256,e.nodeIndex)&&p.ngOnInit(),262144&e.flags&&p.ngDoCheck(),f}(t,e,n,r,s,i,o,l,a,c,u,h);case 32:case 64:case 128:return function(t,e,n,r,s,i,o,l,a,c,u,h){const d=e.bindings;let p=!1;const f=d.length;if(f>0&&Gn(t,e,0,n)&&(p=!0),f>1&&Gn(t,e,1,r)&&(p=!0),f>2&&Gn(t,e,2,s)&&(p=!0),f>3&&Gn(t,e,3,i)&&(p=!0),f>4&&Gn(t,e,4,o)&&(p=!0),f>5&&Gn(t,e,5,l)&&(p=!0),f>6&&Gn(t,e,6,a)&&(p=!0),f>7&&Gn(t,e,7,c)&&(p=!0),f>8&&Gn(t,e,8,u)&&(p=!0),f>9&&Gn(t,e,9,h)&&(p=!0),p){const p=Nn(t,e.nodeIndex);let g;switch(201347067&e.flags){case 32:g=new Array(d.length),f>0&&(g[0]=n),f>1&&(g[1]=r),f>2&&(g[2]=s),f>3&&(g[3]=i),f>4&&(g[4]=o),f>5&&(g[5]=l),f>6&&(g[6]=a),f>7&&(g[7]=c),f>8&&(g[8]=u),f>9&&(g[9]=h);break;case 64:g={},f>0&&(g[d[0].name]=n),f>1&&(g[d[1].name]=r),f>2&&(g[d[2].name]=s),f>3&&(g[d[3].name]=i),f>4&&(g[d[4].name]=o),f>5&&(g[d[5].name]=l),f>6&&(g[d[6].name]=a),f>7&&(g[d[7].name]=c),f>8&&(g[d[8].name]=u),f>9&&(g[d[9].name]=h);break;case 128:const t=n;switch(f){case 1:g=t.transform(n);break;case 2:g=t.transform(r);break;case 3:g=t.transform(r,s);break;case 4:g=t.transform(r,s,i);break;case 5:g=t.transform(r,s,i,o);break;case 6:g=t.transform(r,s,i,o,l);break;case 7:g=t.transform(r,s,i,o,l,a);break;case 8:g=t.transform(r,s,i,o,l,a,c);break;case 9:g=t.transform(r,s,i,o,l,a,c,u);break;case 10:g=t.transform(r,s,i,o,l,a,c,u,h)}}p.value=g}return p}(t,e,n,r,s,i,o,l,a,c,u,h);default:throw"unreachable"}}(t,e,r,s,i,o,l,a,c,u,h,d):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){let r=!1;for(let s=0;s<n.length;s++)Fi(t,e,s,n[s])&&(r=!0);return r}(t,e,n);case 2:return function(t,e,n){const r=e.bindings;let s=!1;for(let i=0;i<n.length;i++)Gn(t,e,i,n[i])&&(s=!0);if(s){let s="";for(let t=0;t<n.length;t++)s+=Zi(n[t],r[t]);s=e.text.prefix+s;const i=An(t,e.nodeIndex).renderText;t.renderer.setValue(i,s)}return s}(t,e,n);case 16384:return function(t,e,n){const r=Rn(t,e.nodeIndex),s=r.instance;let i=!1,o=void 0;for(let l=0;l<n.length;l++)zn(t,e,l,n[l])&&(i=!0,o=us(t,r,e,l,n[l],o));return o&&s.ngOnChanges(o),65536&e.flags&&Tn(t,256,e.nodeIndex)&&s.ngOnInit(),262144&e.flags&&s.ngDoCheck(),i}(t,e,n);case 32:case 64:case 128:return function(t,e,n){const r=e.bindings;let s=!1;for(let i=0;i<n.length;i++)Gn(t,e,i,n[i])&&(s=!0);if(s){const s=Nn(t,e.nodeIndex);let i;switch(201347067&e.flags){case 32:i=n;break;case 64:i={};for(let s=0;s<n.length;s++)i[r[s].name]=n[s];break;case 128:const t=n[0],e=n.slice(1);i=t.transform(...e)}s.value=i}return s}(t,e,n);default:throw"unreachable"}}(t,e,r)}function ao(t){const e=t.def;if(4&e.nodeFlags)for(let n=0;n<e.nodes.length;n++){const r=e.nodes[n];if(4&r.flags){const e=In(t,n).template._projectedViews;if(e)for(let n=0;n<e.length;n++){const r=e[n];r.state|=32,Wn(r,t)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function co(t,e,n,r,s,i,o,l,a,c,u,h,d){return 0===n?function(t,e,n,r,s,i,o,l,a,c,u,h){const d=e.bindings.length;d>0&&Hn(t,e,0,n),d>1&&Hn(t,e,1,r),d>2&&Hn(t,e,2,s),d>3&&Hn(t,e,3,i),d>4&&Hn(t,e,4,o),d>5&&Hn(t,e,5,l),d>6&&Hn(t,e,6,a),d>7&&Hn(t,e,7,c),d>8&&Hn(t,e,8,u),d>9&&Hn(t,e,9,h)}(t,e,r,s,i,o,l,a,c,u,h,d):function(t,e,n){for(let r=0;r<n.length;r++)Hn(t,e,r,n[r])}(t,e,r),!1}function uo(t,e){if(Dn(t,e.nodeIndex).dirty)throw kn(Vn.createDebugContext(t,e.nodeIndex),`Query ${e.query.id} not dirty`,`Query ${e.query.id} dirty`,0!=(1&t.state))}function ho(t){if(!(128&t.state)){if(go(t,po.Destroy),fo(t,po.Destroy),hs(t,131072),t.disposables)for(let e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(!(16&t.state))return;const e=Zn(t);if(e){const n=e.template._projectedViews;n&&(Or(n,n.indexOf(t)),Vn.dirtyParentQueries(t))}}(t),t.renderer.destroyNode&&function(t){const e=t.def.nodes.length;for(let n=0;n<e;n++){const e=t.def.nodes[n];1&e.flags?t.renderer.destroyNode(In(t,n).renderElement):2&e.flags?t.renderer.destroyNode(An(t,n).renderText):(67108864&e.flags||134217728&e.flags)&&Dn(t,n).destroy()}}(t),Xn(t)&&t.renderer.destroy(),t.state|=128}}const po=function(){var t={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return t[t.CreateViewNodes]="CreateViewNodes",t[t.CheckNoChanges]="CheckNoChanges",t[t.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",t[t.Destroy]="Destroy",t}();function fo(t,e){const n=t.def;if(33554432&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const s=n.nodes[r];33554432&s.flags?mo(In(t,r).componentView,e):0==(33554432&s.childFlags)&&(r+=s.childCount)}}function go(t,e){const n=t.def;if(16777216&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const s=n.nodes[r];if(16777216&s.flags){const n=In(t,r).viewContainer._embeddedViews;for(let t=0;t<n.length;t++)mo(n[t],e)}else 0==(16777216&s.childFlags)&&(r+=s.childCount)}}function mo(t,e){const n=t.state;switch(e){case po.CheckNoChanges:0==(128&n)&&(12==(12&n)?io(t):64&n&&bo(t,po.CheckNoChangesProjectedViews));break;case po.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?io(t):64&n&&bo(t,e));break;case po.CheckAndUpdate:0==(128&n)&&(12==(12&n)?oo(t):64&n&&bo(t,po.CheckAndUpdateProjectedViews));break;case po.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?oo(t):64&n&&bo(t,e));break;case po.Destroy:ho(t);break;case po.CreateViewNodes:so(t)}}function bo(t,e){go(t,e),fo(t,e)}function vo(t,e,n,r){if(!(t.def.nodeFlags&e&&t.def.nodeFlags&n))return;const s=t.def.nodes.length;for(let i=0;i<s;i++){const s=t.def.nodes[i];if(s.flags&e&&s.flags&n)switch(Vn.setCurrentNode(t,s.nodeIndex),r){case 0:Li(t,s);break;case 1:uo(t,s)}s.childFlags&e&&s.childFlags&n||(i+=s.childCount)}}let yo=!1;function _o(t,e,n,r,s,i){const o=s.injector.get(Xe);return to(wo(t,s,o,e,n),r,i)}function Co(t,e,n,r,s,i){const o=s.injector.get(Xe),l=wo(t,s,new tl(o),e,n),a=Io(r);return Xo(Uo.create,to,null,[l,a,i])}function wo(t,e,n,r,s){const i=e.injector.get(_e),o=e.injector.get(ke),l=n.createRenderer(null,null);return{ngModule:e,injector:t,projectableNodes:r,selectorOrNode:s,sanitizer:i,rendererFactory:n,renderer:l,errorHandler:o}}function xo(t,e,n,r){const s=Io(n);return Xo(Uo.create,Ji,null,[t,e,s,r])}function So(t,e,n,r){return n=Eo.get(e.element.componentProvider.provider.token)||Io(n),Xo(Uo.create,eo,null,[t,e,n,r])}function Oo(t,e,n,r){return $r(t,e,n,function(t){const{hasOverrides:e,hasDeprecatedOverrides:n}=function(t){let e=!1,n=!1;return 0===ko.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach(t=>{const r=ko.get(t.token);3840&t.flags&&r&&(e=!0,n=n||r.deprecatedBehavior)}),t.modules.forEach(t=>{Po.forEach((r,s)=>{gt(s).providedIn===t&&(e=!0,n=n||r.deprecatedBehavior)})}),{hasOverrides:e,hasDeprecatedOverrides:n})}(t);return e?(function(t){for(let e=0;e<t.providers.length;e++){const r=t.providers[e];n&&(r.flags|=4096);const s=ko.get(r.token);s&&(r.flags=-3841&r.flags|s.flags,r.deps=nr(s.deps),r.value=s.value)}if(Po.size>0){let e=new Set(t.modules);Po.forEach((r,s)=>{if(e.has(gt(s).providedIn)){let e={token:s,flags:r.flags|(n?4096:0),deps:nr(r.deps),value:r.value,index:t.providers.length};t.providers.push(e),t.providersByKey[jn(s)]=e}})}}(t=t.factory(()=>Fn)),t):t}(r))}const ko=new Map,Po=new Map,Eo=new Map;function Mo(t){let e;ko.set(t.token,t),"function"==typeof t.token&&(e=gt(t.token))&&"function"==typeof e.providedIn&&Po.set(t.token,t)}function To(t,e){const n=ir(e.viewDefFactory),r=ir(n.nodes[0].element.componentView);Eo.set(t,r)}function Ao(){ko.clear(),Po.clear(),Eo.clear()}function Io(t){if(0===ko.size)return t;const e=function(t){const e=[];let n=null;for(let r=0;r<t.nodes.length;r++){const s=t.nodes[r];1&s.flags&&(n=s),n&&3840&s.flags&&ko.has(s.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(()=>Fn);for(let r=0;r<e.length;r++)n(t,e[r]);return t;function n(t,e){for(let n=e+1;n<t.nodes.length;n++){const e=t.nodes[n];if(1&e.flags)return;if(3840&e.flags){const t=e.provider,n=ko.get(t.token);n&&(e.flags=-3841&e.flags|n.flags,t.deps=nr(n.deps),t.value=n.value)}}}}function Ro(t,e,n,r,s,i,o,l,a,c,u,h,d){const p=t.def.nodes[e];return lo(t,p,n,r,s,i,o,l,a,c,u,h,d),224&p.flags?Nn(t,e).value:void 0}function No(t,e,n,r,s,i,o,l,a,c,u,h,d){const p=t.def.nodes[e];return co(t,p,n,r,s,i,o,l,a,c,u,h,d),224&p.flags?Nn(t,e).value:void 0}function Do(t){return Xo(Uo.detectChanges,oo,null,[t])}function Vo(t){return Xo(Uo.checkNoChanges,io,null,[t])}function Fo(t){return Xo(Uo.destroy,ho,null,[t])}const Uo=function(){var t={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return t[t.create]="create",t[t.detectChanges]="detectChanges",t[t.checkNoChanges]="checkNoChanges",t[t.destroy]="destroy",t[t.handleEvent]="handleEvent",t}();let jo,Lo,$o;function Bo(t,e){Lo=t,$o=e}function zo(t,e,n,r){return Bo(t,e),Xo(Uo.handleEvent,t.def.handleEvent,null,[t,e,n,r])}function Go(t,e){if(128&t.state)throw En(Uo[jo]);return Bo(t,Ko(t,0)),t.def.updateDirectives((function(t,n,r,...s){const i=t.def.nodes[n];return 0===e?qo(t,i,r,s):Wo(t,i,r,s),16384&i.flags&&Bo(t,Ko(t,n)),224&i.flags?Nn(t,i.nodeIndex).value:void 0}),t)}function Ho(t,e){if(128&t.state)throw En(Uo[jo]);return Bo(t,Zo(t,0)),t.def.updateRenderer((function(t,n,r,...s){const i=t.def.nodes[n];return 0===e?qo(t,i,r,s):Wo(t,i,r,s),3&i.flags&&Bo(t,Zo(t,n)),224&i.flags?Nn(t,i.nodeIndex).value:void 0}),t)}function qo(t,e,n,r){if(lo(t,e,n,...r)){const o=1===n?r[0]:r;if(16384&e.flags){const n={};for(let t=0;t<e.bindings.length;t++){const r=e.bindings[t],l=o[t];8&r.flags&&(n[(s=r.nonMinifiedName,i=void 0,i=s.replace(/[$@]/g,"_"),`ng-reflect-${s=i.replace(Pe,(...t)=>"-"+t[1].toLowerCase())}`)]=Ee(l))}const r=e.parent,l=In(t,r.nodeIndex).renderElement;if(r.element.name)for(let e in n){const r=n[e];null!=r?t.renderer.setAttribute(l,e,r):t.renderer.removeAttribute(l,e)}else t.renderer.setValue(l,`bindings=${JSON.stringify(n,null,2)}`)}}var s,i}function Wo(t,e,n,r){co(t,e,n,...r)}function Ko(t,e){for(let n=e;n<t.def.nodes.length;n++){const e=t.def.nodes[n];if(16384&e.flags&&e.bindings&&e.bindings.length)return n}return null}function Zo(t,e){for(let n=e;n<t.def.nodes.length;n++){const e=t.def.nodes[n];if(3&e.flags&&e.bindings&&e.bindings.length)return n}return null}class Yo{constructor(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];let n=this.nodeDef,r=t;for(;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=Yn(r),r=r.parent;this.elDef=n,this.elView=r}get elOrCompView(){return In(this.elView,this.elDef.nodeIndex).componentView||this.view}get injector(){return Vr(this.elView,this.elDef)}get component(){return this.elOrCompView.component}get context(){return this.elOrCompView.context}get providerTokens(){const t=[];if(this.elDef)for(let e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){const n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t}get references(){const t={};if(this.elDef){Qo(this.elView,this.elDef,t);for(let e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){const n=this.elView.def.nodes[e];20224&n.flags&&Qo(this.elView,n,t),e+=n.childCount}}return t}get componentRenderElement(){const t=function(t){for(;t&&!Xn(t);)t=t.parent;return t.parent?In(t.parent,Yn(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0}get renderNode(){return 2&this.nodeDef.flags?Qn(this.view,this.nodeDef):Qn(this.elView,this.elDef)}logError(t,...e){let n,r;2&this.nodeDef.flags?(n=this.view.def,r=this.nodeDef.nodeIndex):(n=this.elView.def,r=this.elDef.nodeIndex);const s=function(t,e){let n=-1;for(let r=0;r<=e;r++)3&t.nodes[r].flags&&n++;return n}(n,r);let i=-1;n.factory(()=>(i++,i===s?t.error.bind(t,...e):Fn)),i<s&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error(...e))}}function Qo(t,e,n){for(let r in e.references)n[r]=Bi(t,e,e.references[r])}function Xo(t,e,n,r){const s=jo,i=Lo,o=$o;try{jo=t;const l=e.apply(n,r);return Lo=i,$o=o,jo=s,l}catch(l){if(xe(l)||!Lo)throw l;throw function(t,e){return t instanceof Error||(t=new Error(t.toString())),Pn(t,e),t}(l,Jo())}}function Jo(){return Lo?new Yo(Lo,$o):null}class tl{constructor(t){this.delegate=t}createRenderer(t,e){return new el(this.delegate.createRenderer(t,e))}begin(){this.delegate.begin&&this.delegate.begin()}end(){this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}class el{constructor(t){this.delegate=t,this.debugContextFactory=Jo,this.data=this.delegate.data}createDebugContext(t){return this.debugContextFactory(t)}destroyNode(t){!function(t){xi.delete(t.nativeNode)}(Si(t)),this.delegate.destroyNode&&this.delegate.destroyNode(t)}destroy(){this.delegate.destroy()}createElement(t,e){const n=this.delegate.createElement(t,e),r=this.createDebugContext(n);if(r){const e=new wi(n,null,r);e.name=t,Oi(e)}return n}createComment(t){const e=this.delegate.createComment(t),n=this.createDebugContext(e);return n&&Oi(new Ci(e,null,n)),e}createText(t){const e=this.delegate.createText(t),n=this.createDebugContext(e);return n&&Oi(new Ci(e,null,n)),e}appendChild(t,e){const n=Si(t),r=Si(e);n&&r&&n instanceof wi&&n.addChild(r),this.delegate.appendChild(t,e)}insertBefore(t,e,n){const r=Si(t),s=Si(e),i=Si(n);r&&s&&r instanceof wi&&r.insertBefore(i,s),this.delegate.insertBefore(t,e,n)}removeChild(t,e){const n=Si(t),r=Si(e);n&&r&&n instanceof wi&&n.removeChild(r),this.delegate.removeChild(t,e)}selectRootElement(t,e){const n=this.delegate.selectRootElement(t,e),r=Jo();return r&&Oi(new wi(n,null,r)),n}setAttribute(t,e,n,r){const s=Si(t);s&&s instanceof wi&&(s.attributes[r?r+":"+e:e]=n),this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){const r=Si(t);r&&r instanceof wi&&(r.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)}addClass(t,e){const n=Si(t);n&&n instanceof wi&&(n.classes[e]=!0),this.delegate.addClass(t,e)}removeClass(t,e){const n=Si(t);n&&n instanceof wi&&(n.classes[e]=!1),this.delegate.removeClass(t,e)}setStyle(t,e,n,r){const s=Si(t);s&&s instanceof wi&&(s.styles[e]=n),this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){const r=Si(t);r&&r instanceof wi&&(r.styles[e]=null),this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){const r=Si(t);r&&r instanceof wi&&(r.properties[e]=n),this.delegate.setProperty(t,e,n)}listen(t,e,n){if("string"!=typeof t){const r=Si(t);r&&r.listeners.push(new _i(e,n))}return this.delegate.listen(t,e,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setValue(t,e){return this.delegate.setValue(t,e)}}function nl(t,e,n){return new rl(t,e,n)}class rl extends We{constructor(t,e,n){super(),this.moduleType=t,this._bootstrapComponents=e,this._ngModuleDefFactory=n}create(t){!function(){if(yo)return;yo=!0;const t=Qt()?{setCurrentNode:Bo,createRootView:Co,createEmbeddedView:xo,createComponentView:So,createNgModuleRef:Oo,overrideProvider:Mo,overrideComponentView:To,clearOverrides:Ao,checkAndUpdateView:Do,checkNoChangesView:Vo,destroyView:Fo,createDebugContext:(t,e)=>new Yo(t,e),handleEvent:zo,updateDirectives:Go,updateRenderer:Ho}:{setCurrentNode:()=>{},createRootView:_o,createEmbeddedView:Ji,createComponentView:eo,createNgModuleRef:$r,overrideProvider:Fn,overrideComponentView:Fn,clearOverrides:Fn,checkAndUpdateView:oo,checkNoChangesView:io,destroyView:ho,createDebugContext:(t,e)=>new Yo(t,e),handleEvent:(t,e,n,r)=>t.def.handleEvent(t,e,n,r),updateDirectives:(t,e)=>t.def.updateDirectives(0===e?Ro:No,t),updateRenderer:(t,e)=>t.def.updateRenderer(0===e?Ro:No,t)};Vn.setCurrentNode=t.setCurrentNode,Vn.createRootView=t.createRootView,Vn.createEmbeddedView=t.createEmbeddedView,Vn.createComponentView=t.createComponentView,Vn.createNgModuleRef=t.createNgModuleRef,Vn.overrideProvider=t.overrideProvider,Vn.overrideComponentView=t.overrideComponentView,Vn.clearOverrides=t.clearOverrides,Vn.checkAndUpdateView=t.checkAndUpdateView,Vn.checkNoChangesView=t.checkNoChangesView,Vn.destroyView=t.destroyView,Vn.resolveDep=as,Vn.createDebugContext=t.createDebugContext,Vn.handleEvent=t.handleEvent,Vn.updateDirectives=t.updateDirectives,Vn.updateRenderer=t.updateRenderer,Vn.dirtyParentQueries=ji}();const e=function(t){const e=Array.from(t.providers),n=Array.from(t.modules),r={};for(const s in t.providersByKey)r[s]=t.providersByKey[s];return{factory:t.factory,isRoot:t.isRoot,providers:e,modules:n,providersByKey:r}}(ir(this._ngModuleDefFactory));return Vn.createNgModuleRef(this.moduleType,t||Ut.NULL,this._bootstrapComponents,e)}}class sl{}class il{constructor(){this.title="chatbox"}}class ol{}const ll=new kt("Location Initialized");class al{}const cl=new kt("appBaseHref");let ul=(()=>{class t{constructor(e,n){this._subject=new _s,this._urlChangeListeners=[],this._platformStrategy=e;const r=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=t.stripTrailingSlash(hl(r)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+t.normalizeQueryParams(n))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,hl(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(e,n="",r=null){this._platformStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+t.normalizeQueryParams(n)),r)}replaceState(e,n="",r=null){this._platformStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+t.normalizeQueryParams(n)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)})}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}static normalizeQueryParams(t){return t&&"?"!==t[0]?"?"+t:t}static joinWithSlash(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}static stripTrailingSlash(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}}return t})();function hl(t){return t.replace(/\/index.html$/,"")}let dl=(()=>class extends al{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=ul.joinWithSlash(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let s=this.prepareExternalUrl(n+ul.normalizeQueryParams(r));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,e,s)}replaceState(t,e,n,r){let s=this.prepareExternalUrl(n+ul.normalizeQueryParams(r));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}})(),pl=(()=>class extends al{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ul.joinWithSlash(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+ul.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const s=this.prepareExternalUrl(n+ul.normalizeQueryParams(r));this._platformLocation.pushState(t,e,s)}replaceState(t,e,n,r){const s=this.prepareExternalUrl(n+ul.normalizeQueryParams(r));this._platformLocation.replaceState(t,e,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}})();const fl=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}(),gl=function(){var t={Format:0,Standalone:1};return t[t.Format]="Format",t[t.Standalone]="Standalone",t}(),ml=function(){var t={Narrow:0,Abbreviated:1,Wide:2,Short:3};return t[t.Narrow]="Narrow",t[t.Abbreviated]="Abbreviated",t[t.Wide]="Wide",t[t.Short]="Short",t}(),bl=function(){var t={Short:0,Medium:1,Long:2,Full:3};return t[t.Short]="Short",t[t.Medium]="Medium",t[t.Long]="Long",t[t.Full]="Full",t}(),vl=function(){var t={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};return t[t.Decimal]="Decimal",t[t.Group]="Group",t[t.List]="List",t[t.PercentSign]="PercentSign",t[t.PlusSign]="PlusSign",t[t.MinusSign]="MinusSign",t[t.Exponential]="Exponential",t[t.SuperscriptingExponent]="SuperscriptingExponent",t[t.PerMille]="PerMille",t[t.Infinity]="Infinity",t[t.NaN]="NaN",t[t.TimeSeparator]="TimeSeparator",t[t.CurrencyDecimal]="CurrencyDecimal",t[t.CurrencyGroup]="CurrencyGroup",t}();function yl(t,e){return Sl(vs(t)[ms.DateFormat],e)}function _l(t,e){return Sl(vs(t)[ms.TimeFormat],e)}function Cl(t,e){return Sl(vs(t)[ms.DateTimeFormat],e)}function wl(t,e){const n=vs(t),r=n[ms.NumberSymbols][e];if(void 0===r){if(e===vl.CurrencyDecimal)return n[ms.NumberSymbols][vl.Decimal];if(e===vl.CurrencyGroup)return n[ms.NumberSymbols][vl.Group]}return r}function xl(t){if(!t[ms.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[ms.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Sl(t,e){for(let n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function Ol(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const kl=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Pl={},El=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Ml=function(){var t={Short:0,ShortGMT:1,Long:2,Extended:3};return t[t.Short]="Short",t[t.ShortGMT]="ShortGMT",t[t.Long]="Long",t[t.Extended]="Extended",t}(),Tl=function(){var t={FullYear:0,Month:1,Date:2,Hours:3,Minutes:4,Seconds:5,FractionalSeconds:6,Day:7};return t[t.FullYear]="FullYear",t[t.Month]="Month",t[t.Date]="Date",t[t.Hours]="Hours",t[t.Minutes]="Minutes",t[t.Seconds]="Seconds",t[t.FractionalSeconds]="FractionalSeconds",t[t.Day]="Day",t}(),Al=function(){var t={DayPeriods:0,Days:1,Months:2,Eras:3};return t[t.DayPeriods]="DayPeriods",t[t.Days]="Days",t[t.Months]="Months",t[t.Eras]="Eras",t}();function Il(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,(function(t,n){return null!=e&&n in e?e[n]:t}))),t}function Rl(t,e,n="-",r,s){let i="";(t<0||s&&t<=0)&&(s?t=1-t:(t=-t,i=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.substr(o.length-e)),i+o}function Nl(t,e,n=0,r=!1,s=!1){return function(i,o){let l=function(t,e){switch(t){case Tl.FullYear:return e.getFullYear();case Tl.Month:return e.getMonth();case Tl.Date:return e.getDate();case Tl.Hours:return e.getHours();case Tl.Minutes:return e.getMinutes();case Tl.Seconds:return e.getSeconds();case Tl.FractionalSeconds:return e.getMilliseconds();case Tl.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,i);if((n>0||l>-n)&&(l+=n),t===Tl.Hours)0===l&&-12===n&&(l=12);else if(t===Tl.FractionalSeconds)return a=e,Rl(l,3).substr(0,a);var a;const c=wl(o,vl.MinusSign);return Rl(l,e,c,r,s)}}function Dl(t,e,n=gl.Format,r=!1){return function(s,i){return function(t,e,n,r,s,i){switch(n){case Al.Months:return function(t,e,n){const r=vs(t),s=Sl([r[ms.MonthsFormat],r[ms.MonthsStandalone]],e);return Sl(s,n)}(e,s,r)[t.getMonth()];case Al.Days:return function(t,e,n){const r=vs(t),s=Sl([r[ms.DaysFormat],r[ms.DaysStandalone]],e);return Sl(s,n)}(e,s,r)[t.getDay()];case Al.DayPeriods:const o=t.getHours(),l=t.getMinutes();if(i){const t=function(t){const e=vs(t);return xl(e),(e[ms.ExtraData][2]||[]).map(t=>"string"==typeof t?Ol(t):[Ol(t[0]),Ol(t[1])])}(e),n=function(t,e,n){const r=vs(t);xl(r);const s=Sl([r[ms.ExtraData][0],r[ms.ExtraData][1]],e)||[];return Sl(s,n)||[]}(e,s,r);let i;if(t.forEach((t,e)=>{if(Array.isArray(t)){const{hours:r,minutes:s}=t[0],{hours:a,minutes:c}=t[1];o>=r&&l>=s&&(o<a||o===a&&l<c)&&(i=n[e])}else{const{hours:r,minutes:s}=t;r===o&&s===l&&(i=n[e])}}),i)return i}return function(t,e,n){const r=vs(t),s=Sl([r[ms.DayPeriodsFormat],r[ms.DayPeriodsStandalone]],e);return Sl(s,n)}(e,s,r)[o<12?0:1];case Al.Eras:return function(t,e){return Sl(vs(t)[ms.Eras],e)}(e,r)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(s,i,t,e,n,r)}}function Vl(t){return function(e,n,r){const s=-1*r,i=wl(n,vl.MinusSign),o=s>0?Math.floor(s/60):Math.ceil(s/60);switch(t){case Ml.Short:return(s>=0?"+":"")+Rl(o,2,i)+Rl(Math.abs(s%60),2,i);case Ml.ShortGMT:return"GMT"+(s>=0?"+":"")+Rl(o,1,i);case Ml.Long:return"GMT"+(s>=0?"+":"")+Rl(o,2,i)+":"+Rl(Math.abs(s%60),2,i);case Ml.Extended:return 0===r?"Z":(s>=0?"+":"")+Rl(o,2,i)+":"+Rl(Math.abs(s%60),2,i);default:throw new Error(`Unknown zone width "${t}"`)}}}function Fl(t,e=!1){return function(n,r){let s;if(e){const t=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,e=n.getDate();s=1+Math.floor((e+t)/7)}else{const t=function(t){const e=new Date(t,0,1).getDay();return new Date(t,0,1+(e<=4?4:11)-e)}(n.getFullYear()),e=(i=n,new Date(i.getFullYear(),i.getMonth(),i.getDate()+(4-i.getDay()))).getTime()-t.getTime();s=1+Math.round(e/6048e5)}var i;return Rl(s,t,wl(r,vl.MinusSign))}}const Ul={};function jl(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function Ll(t){return t instanceof Date&&!isNaN(t.valueOf())}const $l=new kt("UseV4Plurals");class Bl{}let zl=(()=>class extends Bl{constructor(t,e){super(),this.locale=t,this.deprecatedPluralFn=e}getPluralCategory(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):function(t){return vs(t)[ms.PluralCase]}(e||this.locale)(t)){case fl.Zero:return"zero";case fl.One:return"one";case fl.Two:return"two";case fl.Few:return"few";case fl.Many:return"many";default:return"other"}}})();function Gl(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,s]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}class Hl{}let ql=(()=>class{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._initialClasses=[]}getValue(){return null}setClass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}setNgClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Ne(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}applyChanges(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${bt(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}})(),Wl=(()=>{class t{constructor(t){this._delegate=t}getValue(){return this._delegate.getValue()}}return t.ngDirectiveDef=void 0,t})(),Kl=(()=>class extends Wl{constructor(t){super(t)}set klass(t){this._delegate.setClass(t)}set ngClass(t){this._delegate.setNgClass(t)}ngDoCheck(){this._delegate.applyChanges()}})();class Zl{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Yl=(()=>class{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Qt()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. `+"See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Zl(null,this._ngForOf,-1,-1),r),s=new Ql(t,n);e.push(s)}else if(null==r)this._viewContainer.remove(n);else{const s=this._viewContainer.get(n);this._viewContainer.move(s,r);const i=new Ql(t,s);e.push(i)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}})();class Ql{constructor(t,e){this.record=t,this.view=e}}let Xl=(()=>class{constructor(t,e){this._viewContainer=t,this._context=new Jl,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ta("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ta("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}})();class Jl{constructor(){this.$implicit=null,this.ngIf=null}}function ta(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${bt(e)}'.`)}class ea{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let na=(()=>class{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}})(),ra=(()=>class{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new ea(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}})();class sa{}let ia=(()=>class{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n}getValue(){return null}setNgStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}applyChanges(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}_setStyle(t,e){const[n,r]=t.split(".");null!=(e=null!=e&&r?`${e}${r}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}})(),oa=(()=>{class t{constructor(t){this._delegate=t}getValue(){return this._delegate.getValue()}}return t.ngDirectiveDef=void 0,t})(),la=(()=>class extends oa{constructor(t){super(t)}set ngStyle(t){this._delegate.setNgStyle(t)}ngDoCheck(){this._delegate.applyChanges()}})(),aa=(()=>{class t{constructor(t){this.locale=t}transform(e,n="mediumDate",r,s){if(null==e||""===e||e!=e)return null;try{return function(t,e,n,r){let s=function(t){if(Ll(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){t=t.trim();const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(t)){const[e,n,r]=t.split("-").map(t=>+t);return new Date(e,n-1,r)}let n;if(n=t.match(kl))return function(t){const e=new Date(0);let n=0,r=0;const s=t[8]?e.setUTCFullYear:e.setFullYear,i=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),s.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const o=Number(t[4]||0)-n,l=Number(t[5]||0)-r,a=Number(t[6]||0),c=Math.round(1e3*parseFloat("0."+(t[7]||0)));return i.call(e,o,l,a,c),e}(n)}const e=new Date(t);if(!Ll(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=function t(e,n){const r=function(t){return vs(t)[ms.LocaleId]}(e);if(Pl[r]=Pl[r]||{},Pl[r][n])return Pl[r][n];let s="";switch(n){case"shortDate":s=yl(e,bl.Short);break;case"mediumDate":s=yl(e,bl.Medium);break;case"longDate":s=yl(e,bl.Long);break;case"fullDate":s=yl(e,bl.Full);break;case"shortTime":s=_l(e,bl.Short);break;case"mediumTime":s=_l(e,bl.Medium);break;case"longTime":s=_l(e,bl.Long);break;case"fullTime":s=_l(e,bl.Full);break;case"short":const n=t(e,"shortTime"),r=t(e,"shortDate");s=Il(Cl(e,bl.Short),[n,r]);break;case"medium":const i=t(e,"mediumTime"),o=t(e,"mediumDate");s=Il(Cl(e,bl.Medium),[i,o]);break;case"long":const l=t(e,"longTime"),a=t(e,"longDate");s=Il(Cl(e,bl.Long),[l,a]);break;case"full":const c=t(e,"fullTime"),u=t(e,"fullDate");s=Il(Cl(e,bl.Full),[c,u])}return s&&(Pl[r][n]=s),s}(n,e)||e;let i,o=[];for(;e;){if(i=El.exec(e),!i){o.push(e);break}{o=o.concat(i.slice(1));const t=o.pop();if(!t)break;e=t}}let l=s.getTimezoneOffset();r&&(l=jl(r,l),s=function(t,e,n){const r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(jl(e,r)-r))}(s,r));let a="";return o.forEach(t=>{const e=function(t){if(Ul[t])return Ul[t];let e;switch(t){case"G":case"GG":case"GGG":e=Dl(Al.Eras,ml.Abbreviated);break;case"GGGG":e=Dl(Al.Eras,ml.Wide);break;case"GGGGG":e=Dl(Al.Eras,ml.Narrow);break;case"y":e=Nl(Tl.FullYear,1,0,!1,!0);break;case"yy":e=Nl(Tl.FullYear,2,0,!0,!0);break;case"yyy":e=Nl(Tl.FullYear,3,0,!1,!0);break;case"yyyy":e=Nl(Tl.FullYear,4,0,!1,!0);break;case"M":case"L":e=Nl(Tl.Month,1,1);break;case"MM":case"LL":e=Nl(Tl.Month,2,1);break;case"MMM":e=Dl(Al.Months,ml.Abbreviated);break;case"MMMM":e=Dl(Al.Months,ml.Wide);break;case"MMMMM":e=Dl(Al.Months,ml.Narrow);break;case"LLL":e=Dl(Al.Months,ml.Abbreviated,gl.Standalone);break;case"LLLL":e=Dl(Al.Months,ml.Wide,gl.Standalone);break;case"LLLLL":e=Dl(Al.Months,ml.Narrow,gl.Standalone);break;case"w":e=Fl(1);break;case"ww":e=Fl(2);break;case"W":e=Fl(1,!0);break;case"d":e=Nl(Tl.Date,1);break;case"dd":e=Nl(Tl.Date,2);break;case"E":case"EE":case"EEE":e=Dl(Al.Days,ml.Abbreviated);break;case"EEEE":e=Dl(Al.Days,ml.Wide);break;case"EEEEE":e=Dl(Al.Days,ml.Narrow);break;case"EEEEEE":e=Dl(Al.Days,ml.Short);break;case"a":case"aa":case"aaa":e=Dl(Al.DayPeriods,ml.Abbreviated);break;case"aaaa":e=Dl(Al.DayPeriods,ml.Wide);break;case"aaaaa":e=Dl(Al.DayPeriods,ml.Narrow);break;case"b":case"bb":case"bbb":e=Dl(Al.DayPeriods,ml.Abbreviated,gl.Standalone,!0);break;case"bbbb":e=Dl(Al.DayPeriods,ml.Wide,gl.Standalone,!0);break;case"bbbbb":e=Dl(Al.DayPeriods,ml.Narrow,gl.Standalone,!0);break;case"B":case"BB":case"BBB":e=Dl(Al.DayPeriods,ml.Abbreviated,gl.Format,!0);break;case"BBBB":e=Dl(Al.DayPeriods,ml.Wide,gl.Format,!0);break;case"BBBBB":e=Dl(Al.DayPeriods,ml.Narrow,gl.Format,!0);break;case"h":e=Nl(Tl.Hours,1,-12);break;case"hh":e=Nl(Tl.Hours,2,-12);break;case"H":e=Nl(Tl.Hours,1);break;case"HH":e=Nl(Tl.Hours,2);break;case"m":e=Nl(Tl.Minutes,1);break;case"mm":e=Nl(Tl.Minutes,2);break;case"s":e=Nl(Tl.Seconds,1);break;case"ss":e=Nl(Tl.Seconds,2);break;case"S":e=Nl(Tl.FractionalSeconds,1);break;case"SS":e=Nl(Tl.FractionalSeconds,2);break;case"SSS":e=Nl(Tl.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Vl(Ml.Short);break;case"ZZZZZ":e=Vl(Ml.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Vl(Ml.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Vl(Ml.Long);break;default:return null}return Ul[t]=e,e}(t);a+=e?e(s,n,l):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),a}(e,n,s||this.locale,r)}catch(i){throw function(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${bt(t)}'`)}(t,i.message)}}}return t})(),ca=(()=>class{})();const ua=new kt("DocumentToken");let ha=(()=>{class t{}return t.ngInjectableDef=ft({token:t,providedIn:"root",factory:()=>new da(Rt(ua),window,Rt(ke))}),t})();class da{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportScrollRestoration()){t=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(t):t.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const e=this.document.querySelector(`#${t}`);if(e)return void this.scrollToElement(e);const n=this.document.querySelector(`[name='${t}']`);if(n)return void this.scrollToElement(n)}catch(e){this.errorHandler.handleError(e)}}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}}}const pa=new C(t=>t.complete());function fa(t){return t?function(t){return new C(e=>t.schedule(()=>e.complete()))}(t):pa}function ga(t){const e=new C(e=>{e.next(t),e.complete()});return e._isScalar=!0,e.value=t,e}function ma(...t){let e=t[t.length-1];switch(M(e)?t.pop():e=void 0,t.length){case 0:return fa(e);case 1:return e?H(t,e):ga(t[0]);default:return H(t,e)}}class ba extends P{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new S;return this._value}next(t){super.next(this._value=t)}}function va(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}va.prototype=Object.create(Error.prototype);const ya=va,_a={};class Ca{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new wa(t,this.resultSelector))}}class wa extends ${constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(_a),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(L(this,e,e,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n,r,s){const i=this.values,o=this.toRespond?i[n]===_a?--this.toRespond:this.toRespond:0;i[n]=e,0===o&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function xa(t){return new C(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?q(n):fa()).subscribe(e)})}function Sa(){return Q(1)}function Oa(t,e){return function(n){return n.lift(new ka(t,e))}}class ka{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Pa(t,this.predicate,this.thisArg))}}class Pa extends g{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function Ea(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}Ea.prototype=Object.create(Error.prototype);const Ma=Ea;function Ta(t){return function(e){return 0===t?fa():e.lift(new Aa(t))}}class Aa{constructor(t){if(this.total=t,this.total<0)throw new Ma}call(t,e){return e.subscribe(new Ia(t,this.total))}}class Ia extends g{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let s=0;s<n;s++){const s=e++%n;t.next(r[s])}}t.complete()}}function Ra(t,e,n){return function(r){return r.lift(new Na(t,e,n))}}class Na{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new Da(t,this.nextOrObserver,this.error,this.complete))}}class Da extends g{constructor(t,e,n,s){super(t),this._tapNext=v,this._tapError=v,this._tapComplete=v,this._tapError=n||v,this._tapComplete=s||v,r(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||v,this._tapError=e.error||v,this._tapComplete=e.complete||v)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}const Va=(t=Fa)=>Ra({hasValue:!1,next(){this.hasValue=!0},complete(){if(!this.hasValue)throw t()}});function Fa(){return new ya}function Ua(t=null){return e=>e.lift(new ja(t))}class ja{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new La(t,this.defaultValue))}}class La extends g{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function $a(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Oa((e,n)=>t(e,n,r)):Y,Ta(1),n?Ua(e):Va(()=>new ya))}function Ba(t){return function(e){const n=new za(t),r=e.lift(n);return n.caught=r}}class za{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Ga(t,this.selector,this.caught))}}class Ga extends ${constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new T(this,void 0,void 0);this.add(r),L(this,n,void 0,void 0,r)}}}function Ha(t){return e=>0===t?fa():e.lift(new qa(t))}class qa{constructor(t){if(this.total=t,this.total<0)throw new Ma}call(t,e){return e.subscribe(new Wa(t,this.total))}}class Wa extends g{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Ka(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Oa((e,n)=>t(e,n,r)):Y,Ha(1),n?Ua(e):Va(()=>new ya))}class Za{constructor(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}call(t,e){return e.subscribe(new Ya(t,this.predicate,this.thisArg,this.source))}}class Ya extends g{constructor(t,e,n,r){super(t),this.predicate=e,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function Qa(t,e){return"function"==typeof e?n=>n.pipe(Qa((n,r)=>q(t(n,r)).pipe(B((t,s)=>e(n,t,r,s))))):e=>e.lift(new Xa(t))}class Xa{constructor(t){this.project=t}call(t,e){return e.subscribe(new Ja(t,this.project))}}class Ja extends ${constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)}_innerSub(t,e,n){const r=this.innerSubscription;r&&r.unsubscribe();const s=new T(this,void 0,void 0);this.destination.add(s),this.innerSubscription=L(this,t,e,n,s)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,n,r,s){this.destination.next(e)}}function tc(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new ec(t,e,n))}}class ec{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new nc(t,this.accumulator,this.seed,this.hasSeed))}}class nc extends g{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function rc(t,e){return W(t,e,1)}function sc(t){return e=>e.lift(new ic(t))}class ic{constructor(t){this.callback=t}call(t,e){return e.subscribe(new oc(t,this.callback))}}class oc extends g{constructor(t,e){super(t),this.add(new d(e))}}let lc=null;function ac(){return lc}const cc={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},uc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hc={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},dc=(()=>{if(Ot.Node)return Ot.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))}})();class pc extends class extends class{constructor(){this.resourceLoaderType=null}get attrToPropMap(){return this._attrToPropMap}set attrToPropMap(t){this._attrToPropMap=t}}{constructor(){super(),this._animationPrefix=null,this._transitionEnd=null;try{const t=this.createElement("div",document);if(null!=this.getStyle(t,"animationName"))this._animationPrefix="";else{const e=["Webkit","Moz","O","ms"];for(let n=0;n<e.length;n++)if(null!=this.getStyle(t,e[n]+"AnimationName")){this._animationPrefix="-"+e[n].toLowerCase()+"-";break}}const e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(e).forEach(n=>{null!=this.getStyle(t,n)&&(this._transitionEnd=e[n])})}catch(t){this._animationPrefix=null,this._transitionEnd=null}}getDistributedNodes(t){return t.getDistributedNodes()}resolveAndSetHref(t,e,n){t.href=null==n?e:e+"/../"+n}supportsDOMEvents(){return!0}supportsNativeShadowDOM(){return"function"==typeof document.body.createShadowRoot}getAnimationPrefix(){return this._animationPrefix?this._animationPrefix:""}getTransitionEnd(){return this._transitionEnd?this._transitionEnd:""}supportsAnimation(){return null!=this._animationPrefix&&null!=this._transitionEnd}}{parse(t){throw new Error("parse not implemented")}static makeCurrent(){var t;t=new pc,lc||(lc=t)}hasProperty(t,e){return e in t}setProperty(t,e,n){t[e]=n}getProperty(t,e){return t[e]}invoke(t,e,n){t[e](...n)}logError(t){window.console&&(console.error?console.error(t):console.log(t))}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}get attrToPropMap(){return cc}contains(t,e){return dc.call(t,e)}querySelector(t,e){return t.querySelector(e)}querySelectorAll(t,e){return t.querySelectorAll(e)}on(t,e,n){t.addEventListener(e,n,!1)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}createMouseEvent(t){const e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e}createEvent(t){const e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e}preventDefault(t){t.preventDefault(),t.returnValue=!1}isPrevented(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue}getInnerHTML(t){return t.innerHTML}getTemplateContent(t){return"content"in t&&this.isTemplateElement(t)?t.content:null}getOuterHTML(t){return t.outerHTML}nodeName(t){return t.nodeName}nodeValue(t){return t.nodeValue}type(t){return t.type}content(t){return this.hasProperty(t,"content")?t.content:t}firstChild(t){return t.firstChild}nextSibling(t){return t.nextSibling}parentElement(t){return t.parentNode}childNodes(t){return t.childNodes}childNodesAsList(t){const e=t.childNodes,n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r];return n}clearNodes(t){for(;t.firstChild;)t.removeChild(t.firstChild)}appendChild(t,e){t.appendChild(e)}removeChild(t,e){t.removeChild(e)}replaceChild(t,e,n){t.replaceChild(e,n)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}insertBefore(t,e,n){t.insertBefore(n,e)}insertAllBefore(t,e,n){n.forEach(n=>t.insertBefore(n,e))}insertAfter(t,e,n){t.insertBefore(n,e.nextSibling)}setInnerHTML(t,e){t.innerHTML=e}getText(t){return t.textContent}setText(t,e){t.textContent=e}getValue(t){return t.value}setValue(t,e){t.value=e}getChecked(t){return t.checked}setChecked(t,e){t.checked=e}createComment(t){return this.getDefaultDocument().createComment(t)}createTemplate(t){const e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createElementNS(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)}createTextNode(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)}createScriptTag(t,e,n){const r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(t,e),r}createStyleElement(t,e){const n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n}createShadowRoot(t){return t.createShadowRoot()}getShadowRoot(t){return t.shadowRoot}getHost(t){return t.host}clone(t){return t.cloneNode(!0)}getElementsByClassName(t,e){return t.getElementsByClassName(e)}getElementsByTagName(t,e){return t.getElementsByTagName(e)}classList(t){return Array.prototype.slice.call(t.classList,0)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}hasClass(t,e){return t.classList.contains(e)}setStyle(t,e,n){t.style[e]=n}removeStyle(t,e){t.style[e]=""}getStyle(t,e){return t.style[e]}hasStyle(t,e,n){const r=this.getStyle(t,e)||"";return n?r==n:r.length>0}tagName(t){return t.tagName}attributeMap(t){const e=new Map,n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r);e.set(t.name,t.value)}return e}hasAttribute(t,e){return t.hasAttribute(e)}hasAttributeNS(t,e,n){return t.hasAttributeNS(e,n)}getAttribute(t,e){return t.getAttribute(e)}getAttributeNS(t,e,n){return t.getAttributeNS(e,n)}setAttribute(t,e,n){t.setAttribute(e,n)}setAttributeNS(t,e,n,r){t.setAttributeNS(e,n,r)}removeAttribute(t,e){t.removeAttribute(e)}removeAttributeNS(t,e,n){t.removeAttributeNS(e,n)}templateAwareRoot(t){return this.isTemplateElement(t)?this.content(t):t}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}getBoundingClientRect(t){try{return t.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}getTitle(t){return t.title}setTitle(t,e){t.title=e||""}elementMatches(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))}isTemplateElement(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName}isTextNode(t){return t.nodeType===Node.TEXT_NODE}isCommentNode(t){return t.nodeType===Node.COMMENT_NODE}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}hasShadowRoot(t){return null!=t.shadowRoot&&t instanceof HTMLElement}isShadowRoot(t){return t instanceof DocumentFragment}importIntoDoc(t){return document.importNode(this.templateAwareRoot(t),!0)}adoptNode(t){return document.adoptNode(t)}getHref(t){return t.getAttribute("href")}getEventKey(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&hc.hasOwnProperty(e)&&(e=hc[e]))}return uc[e]||e}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=gc||(gc=document.querySelector("base"),gc)?gc.getAttribute("href"):null;return null==e?null:(n=e,fc||(fc=document.createElement("a")),fc.setAttribute("href",n),"/"===fc.pathname.charAt(0)?fc.pathname:"/"+fc.pathname);var n}resetBaseElement(){gc=null}getUserAgent(){return window.navigator.userAgent}setData(t,e,n){this.setAttribute(t,"data-"+e,n)}getData(t,e){return this.getAttribute(t,"data-"+e)}getComputedStyle(t){return getComputedStyle(t)}supportsWebAnimation(){return"function"==typeof Element.prototype.animate}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return Gl(document.cookie,t)}setCookie(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)}}let fc,gc=null;function mc(){return!!window.history.pushState}let bc=(()=>{class t extends ol{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=ac().getLocation(),this._history=ac().getHistory()}getBaseHrefFromDOM(){return ac().getBaseHref(this._doc)}onPopState(t){ac().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){ac().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){mc()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){mc()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.ctorParameters=()=>[{type:void 0,decorators:[{type:at,args:[ua]}]}],t})();const vc=new kt("TRANSITION_ID"),yc=[{provide:xs,useFactory:function(t,e,n){return()=>{n.get(Ss).donePromise.then(()=>{const n=ac();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter(e=>n.getAttribute(e,"ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[vc,ua,Ut],multi:!0}];class _c{static init(){var t;t=new _c,oi=t}addToWindow(t){Ot.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},Ot.getAllAngularTestabilities=()=>t.getAllTestabilities(),Ot.getAllAngularRootElements=()=>t.getAllRootElements(),Ot.frameworkStabilizers||(Ot.frameworkStabilizers=[]),Ot.frameworkStabilizers.push(t=>{const e=Ot.getAllAngularTestabilities();let n=e.length,r=!1;const s=function(e){r=r||e,n--,0==n&&t(r)};e.forEach((function(t){t.whenStable(s)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?ac().isShadowRoot(e)?this.findTestabilityInTree(t,ac().getHost(e),!0):this.findTestabilityInTree(t,ac().parentElement(e),!0):null}}function Cc(t,e){"undefined"!=typeof COMPILED&&COMPILED||((Ot.ng=Ot.ng||{})[t]=e)}const wc=(()=>({ApplicationRef:pi,NgZone:Zs}))();function xc(t){return Si(t)}const Sc=new kt("EventManagerPlugins");let Oc=(()=>class{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}})();class kc{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=ac().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Pc=(()=>class{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}})(),Ec=(()=>class extends Pc{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>ac().remove(t))}})();const Mc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Tc=/%COMP%/g;function Ac(t,e,n){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?Ac(t,s,n):(s=s.replace(Tc,t),n.push(s))}return n}function Ic(t){return e=>{!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Rc=(()=>class{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Nc(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case Wt.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Fc(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case Wt.Native:case Wt.ShadowDom:return new Uc(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Ac(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}})();class Nc{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Mc[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const s=Mc[r];s?t.setAttributeNS(s,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Mc[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&Je.DashCase?t.style.setProperty(e,n,r&Je.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&Je.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){Vc(e,"property"),t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return Vc(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Ic(n)):this.eventManager.addEventListener(t,e,Ic(n))}}const Dc=(()=>"@".charCodeAt(0))();function Vc(t,e){if(t.charCodeAt(0)===Dc)throw new Error(`Found the synthetic ${e} ${t}. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.`)}class Fc extends Nc{constructor(t,e,n,r){super(t),this.component=n;const s=Ac(r+"-"+n.id,n.styles,[]);e.addStyles(s),this.contentAttr="_ngcontent-%COMP%".replace(Tc,r+"-"+n.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(Tc,t)}(r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Uc extends Nc{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=r,this.shadowRoot=r.encapsulation===Wt.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const s=Ac(r.id,r.styles,[]);for(let i=0;i<s.length;i++){const t=document.createElement("style");t.textContent=s[i],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}const jc=(()=>"undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t})(),Lc=jc("addEventListener"),$c=jc("removeEventListener"),Bc={},zc="__zone_symbol__propagationStopped",Gc=(()=>{const t="undefined"!=typeof Zone&&Zone[jc("BLACK_LISTED_EVENTS")];if(t){const e={};return t.forEach(t=>{e[t]=t}),e}})(),Hc=function(t){return!!Gc&&Gc.hasOwnProperty(t)},qc=function(t){const e=Bc[t.type];if(!e)return;const n=this[e];if(!n)return;const r=[t];if(1===n.length){const t=n[0];return t.zone!==Zone.current?t.zone.run(t.handler,this,r):t.handler.apply(this,r)}{const e=n.slice();for(let n=0;n<e.length&&!0!==t[zc];n++){const t=e[n];t.zone!==Zone.current?t.zone.run(t.handler,this,r):t.handler.apply(this,r)}}};let Wc=(()=>class extends kc{constructor(t,e,n){super(t),this.ngZone=e,n&&function(t){return"server"===t}(n)||this.patchEvent()}patchEvent(){if("undefined"==typeof Event||!Event||!Event.prototype)return;if(Event.prototype.__zone_symbol__stopImmediatePropagation)return;const t=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[zc]=!0),t&&t.apply(this,arguments)}}supports(t){return!0}addEventListener(t,e,n){let r=n;if(!t[Lc]||Zs.isInAngularZone()&&!Hc(e))t.addEventListener(e,r,!1);else{let n=Bc[e];n||(n=Bc[e]=jc("ANGULAR"+e+"FALSE"));let s=t[n];const i=s&&s.length>0;s||(s=t[n]=[]);const o=Hc(e)?Zone.root:Zone.current;if(0===s.length)s.push({zone:o,handler:r});else{let t=!1;for(let e=0;e<s.length;e++)if(s[e].handler===r){t=!0;break}t||s.push({zone:o,handler:r})}i||t[Lc](e,qc,!1)}return()=>this.removeEventListener(t,e,r)}removeEventListener(t,e,n){let r=t[$c];if(!r)return t.removeEventListener.apply(t,[e,n,!1]);let s=Bc[e],i=s&&t[s];if(!i)return t.removeEventListener.apply(t,[e,n,!1]);let o=!1;for(let l=0;l<i.length;l++)if(i[l].handler===n){o=!0,i.splice(l,1);break}o?0===i.length&&r.apply(t,[e,qc,!1]):t.removeEventListener.apply(t,[e,n,!1])}})();const Kc={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Zc=new kt("HammerGestureConfig"),Yc=new kt("HammerLoader");let Qc=(()=>class{constructor(){this.events=[],this.overrides={}}buildHammer(t){const e=new Hammer(t,this.options);e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0});for(const n in this.overrides)e.get(n).set(this.overrides[n]);return e}})(),Xc=(()=>class extends kc{constructor(t,e,n,r){super(t),this._config=e,this.console=n,this.loader=r}supports(t){return!(!Kc.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn(`The "${t}" event cannot be bound because Hammer.JS is not `+"loaded and no custom loader has been specified."),1))}addEventListener(t,e,n){const r=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){let r=!1,s=()=>{r=!0};return this.loader().then(()=>{if(!window.Hammer)return this.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(s=()=>{});r||(s=this.addEventListener(t,e,n))}).catch(()=>{this.console.warn(`The "${e}" event cannot be bound because the custom `+"Hammer.JS loader failed."),s=()=>{}}),()=>{s()}}return r.runOutsideAngular(()=>{const s=this._config.buildHammer(t),i=function(t){r.runGuarded((function(){n(t)}))};return s.on(e,i),()=>{s.off(e,i),"function"==typeof s.destroy&&s.destroy()}})}isCustomEvent(t){return this._config.events.indexOf(t)>-1}})();const Jc=["alt","control","meta","shift"],tu={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let eu=(()=>{class t extends kc{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const s=t.parseEventName(n),i=t.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ac().onAndCancel(e,s.domEventName,i))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=t._normalizeKey(n.pop());let i="";if(Jc.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),i+=t+".")}),i+=s,0!=n.length||0===s.length)return null;const o={};return o.domEventName=r,o.fullKey=i,o}static getEventFullKey(t){let e="",n=ac().getEventKey(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Jc.forEach(r=>{r!=n&&(0,tu[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return s=>{t.getEventFullKey(s)===e&&r.runGuarded(()=>n(s))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t})();class nu{}let ru=(()=>class extends nu{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case ye.NONE:return e;case ye.HTML:return e instanceof iu?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),function(t,e){let n=null;try{be=be||new Xt(t);let r=e?String(e):"";n=be.getInertBodyElement(r);let s=5,i=r;do{if(0===s)throw new Error("Failed to sanitize html because the input is unstable");s--,r=i,i=n.innerHTML,n=be.getInertBodyElement(r)}while(r!==i);const o=new pe,l=o.sanitizeChildren(ve(n)||n);return Qt()&&o.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),l}finally{if(n){const t=ve(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}(this._doc,String(e)));case ye.STYLE:return e instanceof ou?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),function(t){if(!(t=String(t).trim()))return"";const e=t.match(we);return e&&ee(e[1])===e[1]||t.match(Ce)&&function(t){let e=!0,n=!0;for(let r=0;r<t.length;r++){const s=t.charAt(r);"'"===s&&n?e=!e:'"'===s&&e&&(n=!n)}return e&&n}(t)?t:(Qt()&&console.warn(`WARNING: sanitizing unsafe style value ${t} (see http://g.co/ng/security#xss).`),"unsafe")}(e));case ye.SCRIPT:if(e instanceof lu)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case ye.URL:return e instanceof cu||e instanceof au?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),ee(String(e)));case ye.RESOURCE_URL:if(e instanceof cu)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see http://g.co/ng/security#xss)`)}}checkNotSafeValue(t,e){if(t instanceof su)throw new Error(`Required a safe ${e}, got a ${t.getTypeName()} `+"(see http://g.co/ng/security#xss)")}bypassSecurityTrustHtml(t){return new iu(t)}bypassSecurityTrustStyle(t){return new ou(t)}bypassSecurityTrustScript(t){return new lu(t)}bypassSecurityTrustUrl(t){return new au(t)}bypassSecurityTrustResourceUrl(t){return new cu(t)}})();class su{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}`+" (see http://g.co/ng/security#xss)"}}class iu extends su{getTypeName(){return"HTML"}}class ou extends su{getTypeName(){return"Style"}}class lu extends su{getTypeName(){return"Script"}}class au extends su{getTypeName(){return"URL"}}class cu extends su{getTypeName(){return"ResourceURL"}}const uu=ci(ki,"browser",[{provide:Ms,useValue:"browser"},{provide:Es,useValue:function(){pc.makeCurrent(),_c.init()},multi:!0},{provide:ol,useClass:bc,deps:[ua]},{provide:ua,useFactory:function(){return document},deps:[]}]);function hu(){return new ke}let du=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:Os,useValue:e.appId},{provide:vc,useExisting:Os},yc]}}}return t})();"undefined"!=typeof window&&window;class pu{constructor(t,e){this.id=t,this.url=e}}class fu extends pu{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class gu extends pu{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class mu extends pu{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class bu extends pu{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class vu extends pu{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yu extends pu{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _u extends pu{constructor(t,e,n,r,s){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Cu extends pu{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wu extends pu{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xu{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Su{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ou{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ku{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pu{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Eu{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mu{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Tu=(()=>class{})();class Au{constructor(t){this.params=t||{}}has(t){return this.params.hasOwnProperty(t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Iu(t){return new Au(t)}function Ru(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Nu(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const s={};for(let i=0;i<r.length;i++){const e=r[i],n=t[i];if(e.startsWith(":"))s[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:s}}class Du{constructor(t,e){this.routes=t,this.module=e}}function Vu(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Fu(r,Uu(e,r))}}function Fu(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&"primary"!==t.outlet)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&Vu(t.children,e)}function Uu(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function ju(t){const e=t.children&&t.children.map(ju),n=e?Object.assign({},t,{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=Tu),n}function Lu(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let s;for(let i=0;i<n.length;i++)if(s=n[i],t[s]!==e[s])return!1;return!0}function $u(t){return Array.prototype.concat.apply([],t)}function Bu(t){return t.length>0?t[t.length-1]:null}function zu(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Gu(t){return Fe(t)?t:Ve(t)?q(Promise.resolve(t)):ma(t)}function Hu(t,e,n){return n?function(t,e){return Lu(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!Zu(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>e[n]===t[n])}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,s){if(n.segments.length>s.length)return!!Zu(n.segments.slice(0,s.length),s)&&!r.hasChildren();if(n.segments.length===s.length){if(!Zu(n.segments,s))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=s.slice(0,n.segments.length),i=s.slice(n.segments.length);return!!Zu(n.segments,t)&&!!n.children.primary&&e(n.children.primary,r,i)}}(e,n,n.segments)}(t.root,e.root)}class qu{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Iu(this.queryParams)),this._queryParamMap}toString(){return Ju.serialize(this)}}class Wu{constructor(t,e){this.segments=t,this.children=e,this.parent=null,zu(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return th(this)}}class Ku{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Iu(this.parameters)),this._parameterMap}toString(){return oh(this)}}function Zu(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function Yu(t,e){let n=[];return zu(t.children,(t,r)=>{"primary"===r&&(n=n.concat(e(t,r)))}),zu(t.children,(t,r)=>{"primary"!==r&&(n=n.concat(e(t,r)))}),n}class Qu{}class Xu{parse(t){const e=new hh(t);return new qu(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`${`/${function t(e,n){if(!e.hasChildren())return th(e);if(n){const n=e.children.primary?t(e.children.primary,!1):"",r=[];return zu(e.children,(e,n)=>{"primary"!==n&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=Yu(e,(n,r)=>"primary"===r?[t(e.children.primary,!1)]:[`${r}:${t(n,!1)}`]);return`${th(e)}/(${n.join("//")})`}}(t.root,!0)}`}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${nh(e)}=${nh(t)}`).join("&"):`${nh(e)}=${nh(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Ju=new Xu;function th(t){return t.segments.map(t=>oh(t)).join("/")}function eh(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nh(t){return eh(t).replace(/%3B/gi,";")}function rh(t){return eh(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sh(t){return decodeURIComponent(t)}function ih(t){return sh(t.replace(/\+/g,"%20"))}function oh(t){return`${rh(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${rh(t)}=${rh(e[t])}`).join("")}`;var e}const lh=/^[^\/()?;=#]+/;function ah(t){const e=t.match(lh);return e?e[0]:""}const ch=/^[^=?&#]+/,uh=/^[^?&#]+/;class hh{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Wu([],{}):new Wu([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Wu(t,e)),n}parseSegment(){const t=ah(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Ku(sh(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=ah(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=ah(this.remaining);t&&(n=t,this.capture(n))}t[sh(e)]=sh(n)}parseQueryParam(t){const e=function(t){const e=t.match(ch);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(uh);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=ih(e),s=ih(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=ah(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s=void 0;n.indexOf(":")>-1?(s=n.substr(0,n.indexOf(":")),this.capture(s),this.capture(":")):t&&(s="primary");const i=this.parseChildren();e[s]=1===Object.keys(i).length?i.primary:new Wu([],i),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class dh{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=ph(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=ph(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=fh(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return fh(t,this._root).map(t=>t.value)}}function ph(t,e){if(t===e.value)return e;for(const n of e.children){const e=ph(t,n);if(e)return e}return null}function fh(t,e){if(t===e.value)return[e];for(const n of e.children){const r=fh(t,n);if(r.length)return r.unshift(e),r}return[]}class gh{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function mh(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class bh extends dh{constructor(t,e){super(t),this.snapshot=e,xh(this,t)}toString(){return this.snapshot.toString()}}function vh(t,e){const n=function(t,e){const n=new Ch([],{},{},"",{},"primary",e,null,t.root,-1,{});return new wh("",new gh(n,[]))}(t,e),r=new ba([new Ku("",{})]),s=new ba({}),i=new ba({}),o=new ba({}),l=new ba(""),a=new yh(r,s,o,l,i,"primary",e,n.root);return a.snapshot=n.root,new bh(new gh(a,[]),n)}class yh{constructor(t,e,n,r,s,i,o,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=i,this.component=o,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(B(t=>Iu(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(B(t=>Iu(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function _h(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign({},t.params,e.params),data:Object.assign({},t.data,e.data),resolve:Object.assign({},t.resolve,e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Ch{constructor(t,e,n,r,s,i,o,l,a,c,u){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=i,this.component=o,this.routeConfig=l,this._urlSegment=a,this._lastPathIndex=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Iu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Iu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class wh extends dh{constructor(t,e){super(e),this.url=t,xh(this,e)}toString(){return Sh(this._root)}}function xh(t,e){e.value._routerState=t,e.children.forEach(e=>xh(t,e))}function Sh(t){const e=t.children.length>0?` { ${t.children.map(Sh).join(", ")} } `:"";return`${t.value}${e}`}function Oh(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Lu(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Lu(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Lu(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Lu(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function kh(t,e){var n,r;return Lu(t.params,e.params)&&Zu(n=t.url,r=e.url)&&n.every((t,e)=>Lu(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||kh(t.parent,e.parent))}function Ph(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Eh(t,e,n,r,s){let i={};return r&&zu(r,(t,e)=>{i[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new qu(n.root===t?e:function t(e,n,r){const s={};return zu(e.children,(e,i)=>{s[i]=e===n?r:t(e,n,r)}),new Wu(e.segments,s)}(n.root,t,e),i,s)}class Mh{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Ph(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(r&&r!==Bu(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Th{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Ah(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets.primary:`${t}`}function Ih(t,e,n){if(t||(t=new Wu([],{})),0===t.segments.length&&t.hasChildren())return Rh(t,e,n);const r=function(t,e,n){let r=0,s=e;const i={match:!1,pathIndex:0,commandIndex:0};for(;s<t.segments.length;){if(r>=n.length)return i;const e=t.segments[s],o=Ah(n[r]),l=r<n.length-1?n[r+1]:null;if(s>0&&void 0===o)break;if(o&&l&&"object"==typeof l&&void 0===l.outlets){if(!Fh(o,l,e))return i;r+=2}else{if(!Fh(o,{},e))return i;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(t,e,n),s=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Wu(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Wu(t.segments.slice(r.pathIndex),t.children),Rh(e,0,s)}return r.match&&0===s.length?new Wu(t.segments,{}):r.match&&!t.hasChildren()?Nh(t,e,n):r.match?Rh(t,0,s):Nh(t,e,n)}function Rh(t,e,n){if(0===n.length)return new Wu(t.segments,{});{const r=function(t){return"object"!=typeof t[0]?{primary:t}:void 0===t[0].outlets?{primary:t}:t[0].outlets}(n),s={};return zu(r,(n,r)=>{null!==n&&(s[r]=Ih(t.children[r],e,n))}),zu(t.children,(t,e)=>{void 0===r[e]&&(s[e]=t)}),new Wu(t.segments,s)}}function Nh(t,e,n){const r=t.segments.slice(0,e);let s=0;for(;s<n.length;){if("object"==typeof n[s]&&void 0!==n[s].outlets){const t=Dh(n[s].outlets);return new Wu(r,t)}if(0===s&&Ph(n[0])){r.push(new Ku(t.segments[e].path,n[0])),s++;continue}const i=Ah(n[s]),o=s<n.length-1?n[s+1]:null;i&&o&&Ph(o)?(r.push(new Ku(i,Vh(o))),s+=2):(r.push(new Ku(i,{})),s++)}return new Wu(r,{})}function Dh(t){const e={};return zu(t,(t,n)=>{null!==t&&(e[n]=Nh(new Wu([],{}),0,t))}),e}function Vh(t){const e={};return zu(t,(t,n)=>e[n]=`${t}`),e}function Fh(t,e,n){return t==n.path&&Lu(e,n.parameters)}class Uh{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Oh(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=mh(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),zu(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const s=n.getContext(r.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,n);else s&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=mh(t),s=t.value.component?n.children:e;zu(r,(t,e)=>this.deactivateRouteAndItsChildren(t,s)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=mh(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Eu(t.value.snapshot))}),t.children.length&&this.forwardEvent(new ku(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(Oh(r),r===s)if(r.component){const s=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),jh(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),s=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=s,e.outlet&&e.outlet.activateWith(r,s),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function jh(t){Oh(t.value),t.children.forEach(jh)}function Lh(t){return"function"==typeof t}function $h(t){return t instanceof qu}class Bh{constructor(t){this.segmentGroup=t||null}}class zh{constructor(t){this.urlTree=t}}function Gh(t){return new C(e=>e.error(new Bh(t)))}function Hh(t){return new C(e=>e.error(new zh(t)))}function qh(t){return new C(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Wh{constructor(t,e,n,r,s){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(qe)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(B(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ba(t=>{if(t instanceof zh)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Bh)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(B(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(Ba(t=>{if(t instanceof Bh)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Wu([],{primary:t}):t;return new qu(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(B(t=>new Wu([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return ma({});const n=[],r=[],s={};return zu(t,(t,i)=>{const o=e(i,t).pipe(B(t=>s[i]=t));"primary"===i?n.push(o):r.push(o)}),ma.apply(null,n.concat(r)).pipe(Sa(),$a(),B(()=>s))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,s,i){return ma(...n).pipe(B(o=>this.expandSegmentAgainstRoute(t,e,n,o,r,s,i).pipe(Ba(t=>{if(t instanceof Bh)return ma(null);throw t}))),Sa(),Ka(t=>!!t),Ba((t,n)=>{if(t instanceof ya||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,s))return ma(new Wu([],{}));throw new Bh(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,s,i,o){return Qh(r)!==i?Gh(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,i):Gh(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,i){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,i):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,i)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Hh(s):this.lineralizeSegments(n,s).pipe(W(n=>{const s=new Wu(n,{});return this.expandSegment(t,s,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,i){const{matched:o,consumedSegments:l,lastChild:a,positionalParamSegments:c}=Kh(e,r,s);if(!o)return Gh(e);const u=this.applyRedirectCommands(l,r.redirectTo,c);return r.redirectTo.startsWith("/")?Hh(u):this.lineralizeSegments(r,u).pipe(W(r=>this.expandSegment(t,e,n,r.concat(s.slice(a)),i,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(B(t=>(n._loadedConfig=t,new Wu(r,{})))):ma(new Wu(r,{}));const{matched:s,consumedSegments:i,lastChild:o}=Kh(e,n,r);if(!s)return Gh(e);const l=r.slice(o);return this.getChildConfig(t,n,r).pipe(W(t=>{const n=t.module,r=t.routes,{segmentGroup:s,slicedSegments:o}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>Yh(t,e,n)&&"primary"!==Qh(n))}(t,n,r)?{segmentGroup:Zh(new Wu(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&"primary"!==Qh(r)&&(n[Qh(r)]=new Wu([],{}));return n}(r,new Wu(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>Yh(t,e,n))}(t,n,r)?{segmentGroup:Zh(new Wu(t.segments,function(t,e,n,r){const s={};for(const i of n)Yh(t,e,i)&&!r[Qh(i)]&&(s[Qh(i)]=new Wu([],{}));return Object.assign({},r,s)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,i,l,r);return 0===o.length&&s.hasChildren()?this.expandChildren(n,r,s).pipe(B(t=>new Wu(i,t))):0===r.length&&0===o.length?ma(new Wu(i,{})):this.expandSegment(n,s,r,o,"primary",!0).pipe(B(t=>new Wu(i.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?ma(new Du(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?ma(e._loadedConfig):function(t,e,n){const r=e.canLoad;return r&&0!==r.length?q(r).pipe(B(r=>{const s=t.get(r);let i;if(function(t){return t&&Lh(t.canLoad)}(s))i=s.canLoad(e,n);else{if(!Lh(s))throw new Error("Invalid CanLoad guard");i=s(e,n)}return Gu(i)})).pipe(Sa(),(s=t=>!0===t,t=>t.lift(new Za(s,void 0,t)))):ma(!0);var s}(t.injector,e,n).pipe(W(n=>n?this.configLoader.load(t.injector,e).pipe(B(t=>(e._loadedConfig=t,t))):function(t){return new C(e=>e.error(Ru(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):ma(new Du([],t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return ma(n);if(r.numberOfChildren>1||!r.children.primary)return qh(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const s=this.createSegmentGroup(t,e.root,n,r);return new qu(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return zu(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const s=t.substring(1);n[r]=e[s]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const s=this.createSegments(t,e.segments,n,r);let i={};return zu(e.children,(e,s)=>{i[s]=this.createSegmentGroup(t,e,n,r)}),new Wu(s,i)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Kh(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||Nu)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Zh(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Wu(t.segments.concat(e.segments),e.children)}return t}function Yh(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function Qh(t){return t.outlet||"primary"}class Xh{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Jh{constructor(t,e){this.component=t,this.route=e}}function td(t,e,n){const r=t._root;return function t(e,n,r,s,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=mh(n);return e.children.forEach(e=>{!function(e,n,r,s,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,l=n?n.value:null,a=r?r.getContext(e.value.outlet):null;if(l&&o.routeConfig===l.routeConfig){const c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Zu(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Zu(t.url,e.url)||!Lu(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kh(t,e)||!Lu(t.queryParams,e.queryParams);case"paramsChange":default:return!kh(t,e)}}(l,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Xh(s)):(o.data=l.data,o._resolvedData=l._resolvedData),t(e,n,o.component?a?a.children:null:r,s,i),c&&i.canDeactivateChecks.push(new Jh(a&&a.outlet&&a.outlet.component||null,l))}else l&&nd(n,a,i),i.canActivateChecks.push(new Xh(s)),t(e,null,o.component?a?a.children:null:r,s,i)}(e,o[e.value.outlet],r,s.concat([e.value]),i),delete o[e.value.outlet]}),zu(o,(t,e)=>nd(t,r.getContext(e),i)),i}(r,e?e._root:null,n,[r.value])}function ed(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function nd(t,e,n){const r=mh(t),s=t.value;zu(r,(t,r)=>{nd(t,s.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Jh(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}const rd=Symbol("INITIAL_VALUE");function sd(){return Qa(t=>function(...t){let e=null,n=null;return M(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&a(t[0])&&(t=t[0]),H(t,n).lift(new Ca(e))}(...t.map(t=>t.pipe(Ha(1),function(...t){return e=>{let n=t[t.length-1];M(n)?t.pop():n=null;const r=t.length;return function(...t){return Sa()(ma(...t))}(1!==r||n?r>0?H(t,n):fa(n):ga(t[0]),e)}}(rd)))).pipe(tc((t,e)=>{let n=!1;return e.reduce((t,r,s)=>{if(t!==rd)return t;if(r===rd&&(n=!0),!n){if(!1===r)return r;if(s===e.length-1||$h(r))return r}return t},t)},rd),Oa(t=>t!==rd),B(t=>$h(t)?t:!0===t),Ha(1)))}function id(t,e){return null!==t&&e&&e(new Pu(t)),ma(!0)}function od(t,e){return null!==t&&e&&e(new Ou(t)),ma(!0)}function ld(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?ma(r.map(r=>xa(()=>{const s=ed(r,e,n);let i;if(function(t){return t&&Lh(t.canActivate)}(s))i=Gu(s.canActivate(e,t));else{if(!Lh(s))throw new Error("Invalid CanActivate guard");i=Gu(s(e,t))}return i.pipe(Ka())}))).pipe(sd()):ma(!0)}function ad(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>xa(()=>ma(e.guards.map(s=>{const i=ed(s,e.node,n);let o;if(function(t){return t&&Lh(t.canActivateChild)}(i))o=Gu(i.canActivateChild(r,t));else{if(!Lh(i))throw new Error("Invalid CanActivateChild guard");o=Gu(i(r,t))}return o.pipe(Ka())})).pipe(sd())));return ma(s).pipe(sd())}class cd{}class ud{constructor(t,e,n,r,s,i){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=i}recognize(){try{const t=pd(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary"),n=new Ch([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new gh(n,e),s=new wh(this.url,r);return this.inheritParamsAndData(s._root),ma(s)}catch(t){return new C(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,n=_h(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=Yu(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const i of t)try{return this.processSegmentAgainstRoute(i,e,n,r)}catch(s){if(!(s instanceof cd))throw s}if(this.noLeftoversInUrl(e,n,r))return[];throw new cd}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new cd;if((t.outlet||"primary")!==r)throw new cd;let s,i=[],o=[];if("**"===t.path){const i=n.length>0?Bu(n).parameters:{};s=new Ch(n,i,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,md(t),r,t.component,t,hd(e),dd(e)+n.length,bd(t))}else{const l=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new cd;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||Nu)(n,t,e);if(!r)throw new cd;const s={};zu(r.posParams,(t,e)=>{s[e]=t.path});const i=r.consumed.length>0?Object.assign({},s,r.consumed[r.consumed.length-1].parameters):s;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:i}}(e,t,n);i=l.consumedSegments,o=n.slice(l.lastChild),s=new Ch(i,l.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,md(t),r,t.component,t,hd(e),dd(e)+i.length,bd(t))}const l=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:a,slicedSegments:c}=pd(e,i,o,l,this.relativeLinkResolution);if(0===c.length&&a.hasChildren()){const t=this.processChildren(l,a);return[new gh(s,t)]}if(0===l.length&&0===c.length)return[new gh(s,[])];const u=this.processSegment(l,a,c,"primary");return[new gh(s,u)]}}function hd(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function dd(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function pd(t,e,n,r,s){if(n.length>0&&function(t,e,n){return n.some(n=>fd(t,e,n)&&"primary"!==gd(n))}(t,n,r)){const s=new Wu(e,function(t,e,n,r){const s={};s.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const i of n)if(""===i.path&&"primary"!==gd(i)){const n=new Wu([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,s[gd(i)]=n}return s}(t,e,r,new Wu(n,t.children)));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>fd(t,e,n))}(t,n,r)){const i=new Wu(t.segments,function(t,e,n,r,s,i){const o={};for(const l of r)if(fd(t,n,l)&&!s[gd(l)]){const n=new Wu([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===i?t.segments.length:e.length,o[gd(l)]=n}return Object.assign({},s,o)}(t,e,n,r,t.children,s));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:n}}const i=new Wu(t.segments,t.children);return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:n}}function fd(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function gd(t){return t.outlet||"primary"}function md(t){return t.data||{}}function bd(t){return t.resolve||{}}function vd(t,e,n,r){const s=ed(t,e,r);return Gu(s.resolve?s.resolve(e,n):s(e,n))}function yd(t){return function(e){return e.pipe(Qa(e=>{const n=t(e);return n?q(n).pipe(B(()=>e)):q([e])}))}}class _d{}class Cd{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}const wd=new kt("ROUTES");class xd{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(B(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new Du($u(r.injector.get(wd)).map(ju),r)}))}loadModuleFactory(t){return"string"==typeof t?q(this.loader.load(t)):Gu(t()).pipe(W(t=>t instanceof We?ma(t):q(this.compiler.compileModuleAsync(t))))}}class Sd{}class Od{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function kd(t){throw t}function Pd(t,e,n){return e.parse("/")}function Ed(t,e){return ma(null)}class Md{constructor(t,e,n,r,s,i,o,l){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new P,this.errorHandler=kd,this.malformedUriErrorHandler=Pd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ed,afterPreactivation:Ed},this.urlHandlingStrategy=new Od,this.routeReuseStrategy=new Cd,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=s.get(qe),this.console=s.get(As);const a=s.get(Zs);this.isNgZoneEnabled=a instanceof Zs,this.resetConfig(l),this.currentUrlTree=new qu(new Wu([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new xd(i,o,t=>this.triggerEvent(new xu(t)),t=>this.triggerEvent(new Su(t))),this.routerState=vh(this.currentUrlTree,this.rootComponentType),this.transitions=new ba({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Oa(t=>0!==t.id),B(t=>Object.assign({},t,{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Qa(t=>{let n=!1,r=!1;return ma(t).pipe(Ra(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign({},this.lastSuccessfulNavigation,{previousNavigation:null}):null}}),Qa(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return ma(t).pipe(Qa(t=>{const n=this.transitions.getValue();return e.next(new fu(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?pa:[t]}),Qa(t=>Promise.resolve(t)),(r=this.ngModule.injector,s=this.configLoader,i=this.urlSerializer,o=this.config,function(t){return t.pipe(Qa(t=>function(t,e,n,r,s){return new Wh(t,e,n,r,s).apply()}(r,s,i,t.extractedUrl,o).pipe(B(e=>Object.assign({},t,{urlAfterRedirects:e})))))}),Ra(t=>{this.currentNavigation=Object.assign({},this.currentNavigation,{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,s){return function(i){return i.pipe(W(i=>function(t,e,n,r,s="emptyOnly",i="legacy"){return new ud(t,e,n,r,s,i).recognize()}(t,e,i.urlAfterRedirects,n(i.urlAfterRedirects),r,s).pipe(B(t=>Object.assign({},i,{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Ra(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Ra(t=>{const n=new vu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,s,i,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:s,restoredState:i,extras:o}=t,l=new fu(n,this.serializeUrl(r),s,i);e.next(l);const a=vh(r,this.rootComponentType).snapshot;return ma(Object.assign({},t,{targetSnapshot:a,urlAfterRedirects:r,extras:Object.assign({},o,{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),pa}),yd(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:s,extras:{skipLocationChange:i,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:s,skipLocationChange:!!i,replaceUrl:!!o})}),Ra(t=>{const e=new yu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),B(t=>Object.assign({},t,{guards:td(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(W(n=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:i,canDeactivateChecks:o}}=n;return 0===o.length&&0===i.length?ma(Object.assign({},n,{guardsResult:!0})):function(t,e,n,r){return q(t).pipe(W(t=>function(t,e,n,r,s){const i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return i&&0!==i.length?ma(i.map(i=>{const o=ed(i,e,s);let l;if(function(t){return t&&Lh(t.canDeactivate)}(o))l=Gu(o.canDeactivate(t,e,n,r));else{if(!Lh(o))throw new Error("Invalid CanDeactivate guard");l=Gu(o(t,e,n,r))}return l.pipe(Ka())})).pipe(sd()):ma(!0)}(t.component,t.route,n,e,r)),Ka(t=>!0!==t,!0))}(o,r,s,t).pipe(W(n=>n&&"boolean"==typeof n?function(t,e,n,r){return q(e).pipe(rc(e=>q([od(e.route.parent,r),id(e.route,r),ad(t,e.path,n),ld(t,e.route,n)]).pipe(Sa(),Ka(t=>!0!==t,!0))),Ka(t=>!0!==t,!0))}(r,i,t,e):ma(n)),B(t=>Object.assign({},n,{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Ra(t=>{if($h(t.guardsResult)){const e=Ru(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Ra(t=>{const e=new _u(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Oa(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new mu(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),yd(t=>{if(t.guards.canActivateChecks.length)return ma(t).pipe(Ra(t=>{const e=new Cu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(e=this.paramsInheritanceStrategy,n=this.ngModule.injector,function(t){return t.pipe(W(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;return s.length?q(s).pipe(rc(t=>function(t,e,n,r){return function(t,e,n,r){const s=Object.keys(t);if(0===s.length)return ma({});if(1===s.length){const i=s[0];return vd(t[i],e,n,r).pipe(B(t=>({[i]:t})))}const i={};return q(s).pipe(W(s=>vd(t[s],e,n,r).pipe(B(t=>(i[s]=t,t))))).pipe($a(),B(()=>i))}(t._resolve,t,e,r).pipe(B(e=>(t._resolvedData=e,t.data=Object.assign({},t.data,_h(t,n).resolve),null)))}(t.route,r,e,n)),function(t,e){return arguments.length>=2?function(n){return y(tc(t,e),Ta(1),Ua(e))(n)}:function(e){return y(tc((e,n,r)=>t(e,n,r+1)),Ta(1))(e)}}((t,e)=>t),B(e=>t)):ma(t)}))}),Ra(t=>{const e=new wu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}));var e,n}),yd(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:s,extras:{skipLocationChange:i,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:s,skipLocationChange:!!i,replaceUrl:!!o})}),B(t=>{const e=function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const s=r.value;s._futureSnapshot=n.value;const i=function(e,n,r){return n.children.map(n=>{for(const s of r.children)if(e.shouldReuseRoute(s.value.snapshot,n.value))return t(e,n,s);return t(e,n)})}(e,n,r);return new gh(s,i)}{const r=e.retrieve(n.value);if(r){const t=r.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new yh(new ba((s=n.value).url),new ba(s.params),new ba(s.queryParams),new ba(s.fragment),new ba(s.data),s.outlet,s.component,s),i=n.children.map(n=>t(e,n));return new gh(r,i)}}var s}(t,e._root,n?n._root:void 0);return new bh(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign({},t,{targetRouterState:e})}),Ra(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(s=this.rootContexts,i=this.routeReuseStrategy,o=t=>this.triggerEvent(t),B(t=>(new Uh(i,t.targetRouterState,t.currentRouterState,o).activate(s),t))),Ra({next(){n=!0},complete(){n=!0}}),sc(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new mu(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null}),Ba(n=>{if(r=!0,(s=n)&&s.ngNavigationCancelingError){const r=$h(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const s=new mu(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(s),t.resolve(!1),r&&this.navigateByUrl(n.url)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new bu(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(i){t.reject(i)}}var s;return pa}));var s,i,o}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign({},this.getTransition(),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{let e=this.parseUrl(t.url);const n="popstate"===t.type?"popstate":"hashchange",r=t.state&&t.state.navigationId?t.state:null;setTimeout(()=>{this.scheduleNavigation(e,n,r,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Vu(t),this.config=t.map(ju),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:s,preserveQueryParams:i,queryParamsHandling:o,preserveFragment:l}=e;Qt()&&i&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const a=n||this.routerState.root,c=l?this.currentUrlTree.fragment:s;let u=null;if(o)switch(o){case"merge":u=Object.assign({},this.currentUrlTree.queryParams,r);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}else u=i?this.currentUrlTree.queryParams:r||null;return null!==u&&(u=this.removeEmptyProps(u)),function(t,e,n,r,s){if(0===n.length)return Eh(e.root,e.root,e,r,s);const i=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Mh(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,s)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return zu(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===s?(r.split("/").forEach((r,s)=>{0==s&&"."===r||(0==s&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Mh(n,e,r)}(n);if(i.toRoot())return Eh(e.root,new Wu([],{}),e,r,s);const o=function(t,e,n){if(t.isAbsolute)return new Th(e.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new Th(n.snapshot._urlSegment,!0,0);const r=Ph(t.commands[0])?0:1;return function(t,e,n){let r=t,s=e,i=n;for(;i>s;){if(i-=s,r=r.parent,!r)throw new Error("Invalid number of '../'");s=r.segments.length}return new Th(r,!1,s-i)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(i,e,t),l=o.processChildren?Rh(o.segmentGroup,o.index,i.commands):Ih(o.segmentGroup,o.index,i.commands);return Eh(o.segmentGroup,l,e,r,s)}(a,this.currentUrlTree,t,u,c)}navigateByUrl(t,e={skipLocationChange:!1}){Qt()&&this.isNgZoneEnabled&&!Zs.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=$h(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if($h(t))return Hu(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Hu(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new gu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r){const s=this.getTransition();if(s&&"imperative"!==e&&"imperative"===s.source&&s.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(s&&"hashchange"==e&&"popstate"===s.source&&s.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(s&&"popstate"==e&&"hashchange"===s.source&&s.rawUrl.toString()===t.toString())return Promise.resolve(!0);let i=null,o=null;const l=new Promise((t,e)=>{i=t,o=e}),a=++this.navigationId;return this.setTransition({id:a,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:i,reject:o,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const s=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(s)||e?this.location.replaceState(s,"",Object.assign({},r,{navigationId:n})):this.location.go(s,"",Object.assign({},r,{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}class Td{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ad,this.attachRef=null}}class Ad{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Td,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let Id=(()=>class{constructor(t,e,n,r,s){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new _s,this.deactivateEvents=new _s,this.name=r||"primary",t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,s=new Rd(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,s),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}})();class Rd{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===yh?this.route:t===Ad?this.childContexts:this.parent.get(t,e)}}class Nd{}class Dd{preload(t,e){return e().pipe(Ba(()=>ma(null)))}}class Vd{preload(t,e){return ma(null)}}let Fd=(()=>class{constructor(t,e,n,r,s){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=new xd(e,n,e=>t.triggerEvent(new xu(e)),e=>t.triggerEvent(new Su(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Oa(t=>t instanceof gu),rc(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(qe);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return q(n).pipe(Q(),B(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(W(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}})();class Ud{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof fu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof gu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Mu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Mu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}const jd=new kt("ROUTER_CONFIGURATION"),Ld=new kt("ROUTER_FORROOT_GUARD"),$d=[ul,{provide:Qu,useClass:Xu},{provide:Md,useFactory:Kd,deps:[pi,Qu,Ad,ul,Ut,gi,Ls,wd,jd,[Sd,new ct],[_d,new ct]]},Ad,{provide:yh,useFactory:Zd,deps:[Md]},{provide:gi,useClass:vi},Fd,Vd,Dd,{provide:jd,useValue:{enableTracing:!1}}];function Bd(){return new ai("Router",Md)}let zd=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[$d,Wd(e),{provide:Ld,useFactory:qd,deps:[[Md,new ct,new ht]]},{provide:jd,useValue:n||{}},{provide:al,useFactory:Hd,deps:[ol,[new at(cl),new ct],jd]},{provide:Ud,useFactory:Gd,deps:[Md,ha,jd]},{provide:Nd,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Vd},{provide:ai,multi:!0,useFactory:Bd},[Yd,{provide:xs,multi:!0,useFactory:Qd,deps:[Yd]},{provide:Jd,useFactory:Xd,deps:[Yd]},{provide:Ts,multi:!0,useExisting:Jd}]]}}static forChild(e){return{ngModule:t,providers:[Wd(e)]}}}return t})();function Gd(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Ud(t,e,n)}function Hd(t,e,n={}){return n.useHash?new dl(t,e):new pl(t,e)}function qd(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Wd(t){return[{provide:qt,multi:!0,useValue:t},{provide:wd,multi:!0,useValue:t}]}function Kd(t,e,n,r,s,i,o,l,a={},c,u){const h=new Md(null,e,n,r,s,i,o,$u(l));if(c&&(h.urlHandlingStrategy=c),u&&(h.routeReuseStrategy=u),a.errorHandler&&(h.errorHandler=a.errorHandler),a.malformedUriErrorHandler&&(h.malformedUriErrorHandler=a.malformedUriErrorHandler),a.enableTracing){const t=ac();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return a.onSameUrlNavigation&&(h.onSameUrlNavigation=a.onSameUrlNavigation),a.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=a.paramsInheritanceStrategy),a.urlUpdateStrategy&&(h.urlUpdateStrategy=a.urlUpdateStrategy),a.relativeLinkResolution&&(h.relativeLinkResolution=a.relativeLinkResolution),h}function Zd(t){return t.routerState.root}let Yd=(()=>class{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new P}appInitializer(){return this.injector.get(ll,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Md),r=this.injector.get(jd);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?ma(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(jd),n=this.injector.get(Fd),r=this.injector.get(Ud),s=this.injector.get(Md),i=this.injector.get(pi);t===i.components[0]&&(this.isLegacyEnabled(e)?s.initialNavigation():this.isLegacyDisabled(e)&&s.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),s.resetRootComponentType(i.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}})();function Qd(t){return t.appInitializer.bind(t)}function Xd(t){return t.bootstrapListener.bind(t)}const Jd=new kt("Router Initializer");var tp=$n({encapsulation:2,styles:[],data:{}});function ep(t){return Yi(0,[(t()(),Ri(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),Qr(1,212992,null,0,Id,[Ad,Sn,ze,[8,null],bn],null,null)],(function(t,e){t(e,1,0)}),null)}function np(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"ng-component",[],null,null,null,ep,tp)),Qr(1,49152,null,0,Tu,[],null,null)],null,null)}var rp=Pr("ng-component",Tu,np,{},{},[]);class sp{constructor(t,e,n){this.sessionSV=t,this.router=e,this.userSV=n}ngOnInit(){console.log(this.sessionSV.data)}login(){this.win=window.open("https://ilogin.netlify.com","Login","dialog=yes,directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no")}onMessage(t){this.listentoWindowMessage(t)}listentoWindowMessage(t){switch(t.data.action){case"SSO_PAGE_LOADED":this.submitAppID();break;case"LOGIN":this.saveUserSession(t.data.data.data)}}saveUserSession(t){const{username:e,email:n,firstname:r,lastname:s}=t.user,i={token:t.token,user:{accountId:t.user._id,username:e,email:n,firstname:r,lastname:s}};this.sessionSV.save(i),this.userSV.createUser({username:e,email:n,firstname:r,lastname:s,accountId:t.user._id}).subscribe(t=>{i.user=t.data,this.sessionSV.save(i),this.router.navigate(["chat"])})}submitAppID(){this.win.postMessage({action:"SUBMIT_APP_ID",data:"5e15a157522bc3d4a4a0329b"},"https://ilogin.netlify.com")}}let ip=(()=>{class t{constructor(){this.retrieve()}save(t){this.userSession?this.userSession.next(t):this.userSession=new ba(t),localStorage.setItem("session",JSON.stringify(this.userSession.value))}get data(){return this.userSession?this.userSession.value:null}retrieve(){const t=localStorage.getItem("session");t&&this.save(JSON.parse(t))}logout(){localStorage.removeItem("session"),this.userSession.next(null)}}return t.ngInjectableDef=ft({factory:function(){return new t},token:t,providedIn:"root"}),t})();class op{constructor(t){this.payload=t,this.type="[Friend] load user list"}}class lp{constructor(t){this.payload=t,this.type="[Friend] load user list finish"}}class ap{constructor(t){this.payload=t,this.type="[Friend] User online"}}class cp{}class up{}class hp{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),s=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(s):this.headers.set(r,[s])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof hp?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new hp;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof hp?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===s.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class dp{encodeKey(t){return pp(t)}encodeValue(t){return pp(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function pp(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class fp{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new dp,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[s,i]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],o=n.get(s)||[];o.push(i),n.set(s,o)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).join("&")}clone(t){const e=new fp({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function gp(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function mp(t){return"undefined"!=typeof Blob&&t instanceof Blob}function bp(t){return"undefined"!=typeof FormData&&t instanceof FormData}class vp{constructor(t,e,n,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.params&&(this.params=s.params)),this.headers||(this.headers=new hp),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new fp,this.urlWithParams=e}serializeBody(){return null===this.body?null:gp(this.body)||mp(this.body)||bp(this.body)||"string"==typeof this.body?this.body:this.body instanceof fp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body?null:bp(this.body)?null:mp(this.body)?this.body.type||null:gp(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof fp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,i=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,o=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,a=t.params||this.params;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),l)),t.setParams&&(a=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),a)),new vp(e,n,s,{params:a,headers:l,reportProgress:o,responseType:r,withCredentials:i})}}const yp=function(){var t={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return t[t.Sent]="Sent",t[t.UploadProgress]="UploadProgress",t[t.ResponseHeader]="ResponseHeader",t[t.DownloadProgress]="DownloadProgress",t[t.Response]="Response",t[t.User]="User",t}();class _p{constructor(t,e=200,n="OK"){this.headers=t.headers||new hp,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Cp extends _p{constructor(t={}){super(t),this.type=yp.ResponseHeader}clone(t={}){return new Cp({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class wp extends _p{constructor(t={}){super(t),this.type=yp.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new wp({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class xp extends _p{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Sp(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Op=(()=>class{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof vp)r=t;else{let s=void 0;s=n.headers instanceof hp?n.headers:new hp(n.headers);let i=void 0;n.params&&(i=n.params instanceof fp?n.params:new fp({fromObject:n.params})),r=new vp(t,e,void 0!==n.body?n.body:null,{headers:s,params:i,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const s=ma(r).pipe(rc(t=>this.handler.handle(t)));if(t instanceof vp||"events"===n.observe)return s;const i=s.pipe(Oa(t=>t instanceof wp));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return i.pipe(B(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return i.pipe(B(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return i.pipe(B(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return i.pipe(B(t=>t.body))}case"response":return i;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new fp).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,Sp(n,e))}post(t,e,n={}){return this.request("POST",t,Sp(n,e))}put(t,e,n={}){return this.request("PUT",t,Sp(n,e))}})();class kp{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const Pp=new kt("HTTP_INTERCEPTORS");let Ep=(()=>class{intercept(t,e){return e.handle(t)}})();const Mp=/^\)\]\}',?\n/;class Tp{}let Ap=(()=>class{constructor(){}build(){return new XMLHttpRequest}})(),Ip=(()=>class{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new C(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let s=null;const i=()=>{if(null!==s)return s;const e=1223===n.status?204:n.status,r=n.statusText||"OK",i=new hp(n.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return s=new Cp({headers:i,status:e,statusText:r,url:o}),s},o=()=>{let{headers:r,status:s,statusText:o,url:l}=i(),a=null;204!==s&&(a=void 0===n.response?n.responseText:n.response),0===s&&(s=a?200:0);let c=s>=200&&s<300;if("json"===t.responseType&&"string"==typeof a){const t=a;a=a.replace(Mp,"");try{a=""!==a?JSON.parse(a):null}catch(u){a=t,c&&(c=!1,a={error:u,text:a})}}c?(e.next(new wp({body:a,headers:r,status:s,statusText:o,url:l||void 0})),e.complete()):e.error(new xp({error:a,headers:r,status:s,statusText:o,url:l||void 0}))},l=t=>{const{url:r}=i(),s=new xp({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(s)};let a=!1;const c=r=>{a||(e.next(i()),a=!0);let s={type:yp.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(s.total=r.total),"text"===t.responseType&&n.responseText&&(s.partialText=n.responseText),e.next(s)},u=t=>{let n={type:yp.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",o),n.addEventListener("error",l),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",u)),n.send(r),e.next({type:yp.Sent}),()=>{n.removeEventListener("error",l),n.removeEventListener("load",o),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",u)),n.abort()}})}})();const Rp=new kt("XSRF_COOKIE_NAME"),Np=new kt("XSRF_HEADER_NAME");class Dp{}let Vp=(()=>class{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Gl(t,this.cookieName),this.lastCookieString=t),this.lastToken}})(),Fp=(()=>class{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}})(),Up=(()=>class{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(Pp,[]);this.chain=t.reduceRight((t,e)=>new kp(t,e),this.backend)}return this.chain.handle(t)}})(),jp=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:Fp,useClass:Ep}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:Rp,useValue:e.cookieName}:[],e.headerName?{provide:Np,useValue:e.headerName}:[]]}}}return t})(),Lp=(()=>class{})();class $p extends d{constructor(t,e){super()}schedule(t,e=0){return this}}class Bp extends $p{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(s){n=!0,r=!!s&&s||new Error(s)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}class zp extends Bp{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}let Gp=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class Hp extends Gp{constructor(t,e=Gp.now){super(t,()=>Hp.delegate&&Hp.delegate!==this?Hp.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return Hp.delegate&&Hp.delegate!==this?Hp.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}class qp extends Hp{}const Wp=new qp(zp);function Kp(t,e){return new C(e?n=>e.schedule(Zp,0,{error:t,subscriber:n}):e=>e.error(t))}function Zp({error:t,subscriber:e}){e.error(t)}let Yp=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return ma(this.value);case"E":return Kp(this.error);case"C":return fa()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();class Qp{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new Xp(t,this.scheduler,this.delay))}}class Xp extends g{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(Xp.dispatch,this.delay,new Jp(t,this.destination)))}_next(t){this.scheduleMessage(Yp.createNext(t))}_error(t){this.scheduleMessage(Yp.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(Yp.createComplete()),this.unsubscribe()}}class Jp{constructor(t,e){this.notification=t,this.destination=e}}class tf{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new ef(t,this.observables,this.project))}}class ef extends ${constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let s=0;s<r;s++)this.toRespond.push(s);for(let s=0;s<r;s++){let t=e[s];this.add(L(this,t,t,s))}}notifyNext(t,e,n,r,s){this.values[n]=e;const i=this.toRespond;if(i.length>0){const t=i.indexOf(n);-1!==t&&i.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class nf{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new rf(t,this.compare,this.keySelector))}}class rf extends g{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}const sf="@ngrx/store/init";let of=(()=>class extends ba{constructor(){super({type:sf})}next(t){if("function"==typeof t)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(void 0===t)throw new TypeError("Actions must be objects");if(void 0===t.type)throw new TypeError("Actions must have a type property");super.next(t)}complete(){}ngOnDestroy(){super.complete()}})();const lf=new kt("@ngrx/store Internal Root Guard"),af=new kt("@ngrx/store Internal Initial State"),cf=new kt("@ngrx/store Initial State"),uf=new kt("@ngrx/store Reducer Factory"),hf=new kt("@ngrx/store Internal Reducer Factory Provider"),df=new kt("@ngrx/store Initial Reducers"),pf=new kt("@ngrx/store Internal Initial Reducers"),ff=new kt("@ngrx/store Internal Store Reducers"),gf=new kt("@ngrx/store User Provided Meta Reducers"),mf=new kt("@ngrx/store Meta Reducers"),bf=new kt("@ngrx/store Internal Resolved Meta Reducers"),vf=new kt("@ngrx/store User Runtime Checks Config"),yf=new kt("@ngrx/store Internal User Runtime Checks Config"),_f=new kt("@ngrx/store Internal Runtime Checks");function Cf(t,e={}){const n=Object.keys(t),r={};for(let i=0;i<n.length;i++){const e=n[i];"function"==typeof t[e]&&(r[e]=t[e])}const s=Object.keys(r);return function(t,n){t=void 0===t?e:t;let i=!1;const o={};for(let e=0;e<s.length;e++){const l=s[e],a=t[l],c=(0,r[l])(a,n);o[l]=c,i=i||c!==a}return i?o:t}}function wf(...t){return function(e){if(0===t.length)return e;const n=t[t.length-1];return t.slice(0,-1).reduceRight((t,e)=>e(t),n(e))}}function xf(t,e){return Array.isArray(e)&&e.length>0&&(t=wf.apply(null,[...e,t])),(e,n)=>{const r=t(e);return(t,e)=>r(t=void 0===t?n:t,e)}}class Sf extends C{}class Of extends of{}let kf=(()=>class extends ba{constructor(t,e,n,r){super(r(n,e)),this.dispatcher=t,this.initialState=e,this.reducers=n,this.reducerFactory=r}addFeature(t){this.addFeatures([t])}addFeatures(t){const e=t.reduce((t,{reducers:e,reducerFactory:n,metaReducers:r,initialState:s,key:i})=>{const o="function"==typeof e?function(t){const e=Array.isArray(t)&&t.length>0?wf(...t):t=>t;return(t,n)=>(t=e(t),(e,r)=>t(e=void 0===e?n:e,r))}(r)(e,s):xf(n,r)(e,s);return t[i]=o,t},{});this.addReducers(e)}removeFeature(t){this.removeFeatures([t])}removeFeatures(t){this.removeReducers(t.map(t=>t.key))}addReducer(t,e){this.addReducers({[t]:e})}addReducers(t){this.reducers=Object.assign({},this.reducers,t),this.updateReducers(Object.keys(t))}removeReducer(t){this.removeReducers([t])}removeReducers(t){t.forEach(t=>{var e,n;this.reducers=(e=this.reducers,n=t,Object.keys(e).filter(t=>t!==n).reduce((t,n)=>Object.assign(t,{[n]:e[n]}),{}))}),this.updateReducers(t)}updateReducers(t){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:"@ngrx/store/update-reducers",features:t})}ngOnDestroy(){this.complete()}})(),Pf=(()=>class extends P{ngOnDestroy(){this.complete()}})();class Ef extends C{}let Mf=(()=>{class t extends ba{constructor(t,e,n,r){super(r);const s=t.pipe(function(t,e=0){return function(n){return n.lift(new Qp(t,e))}}(Wp)).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new tf(t,n))}}(e)).pipe(tc(Tf,{state:r}));this.stateSubscription=s.subscribe(({state:t,action:e})=>{this.next(t),n.next(e)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return t.INIT=sf,t})();function Tf(t={state:void 0},[e,n]){const{state:r}=t;return{state:n(r,e),action:e}}let Af=(()=>{class t extends C{constructor(t,e,n){super(),this.actionsObserver=e,this.reducerManager=n,this.source=t}select(t,...e){return If.call(null,t,...e)(this)}lift(e){const n=new t(this,this.actionsObserver,this.reducerManager);return n.operator=e,n}dispatch(t){this.actionsObserver.next(t)}next(t){this.actionsObserver.next(t)}error(t){this.actionsObserver.error(t)}complete(){this.actionsObserver.complete()}addReducer(t,e){this.reducerManager.addReducer(t,e)}removeReducer(t){this.reducerManager.removeReducer(t)}}return t})();function If(t,e,...n){return function(r){let s;if("string"==typeof t){const i=[e,...n].filter(Boolean);s=r.pipe(function(...t){const e=t.length;if(0===e)throw new Error("list of properties cannot be empty.");return n=>B(function(t,e){return n=>{let r=n;for(let s=0;s<e;s++){const e=r[t[s]];if(void 0===e)return;r=e}return r}}(t,e))(n)}(t,...i))}else{if("function"!=typeof t)throw new TypeError(`Unexpected type '${typeof t}' in select operator,`+" expected 'string' or 'function'");s=r.pipe(B(n=>t(n,e)))}return s.pipe(t=>t.lift(new nf(void 0,void 0)))}}function Rf(t){return void 0===t}function Nf(t){return null===t}function Df(t){return Array.isArray(t)}function Vf(t){return"object"==typeof t&&null!==t}function Ff(t){return"function"==typeof t}function Uf(t){Object.freeze(t);const e=Ff(t);return Object.getOwnPropertyNames(t).forEach(n=>{if(function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(t,n)&&(!e||"caller"!==n&&"callee"!==n&&"arguments"!==n)){const e=t[n];!Vf(e)&&!Ff(e)||Object.isFrozen(e)||Uf(e)}}),t}function jf(t,e=[]){return(Rf(t)||Nf(t))&&0===e.length?{path:["root"],value:t}:Object.keys(t).reduce((n,r)=>{if(n)return n;const s=t[r];return!(Rf(s)||Nf(s)||function(t){return"number"==typeof t}(s)||function(t){return"boolean"==typeof t}(s)||function(t){return"string"==typeof t}(s)||Df(s))&&(function(t){if(!function(t){return Vf(t)&&!Df(t)}(t))return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}(s)?jf(s,[...e,r]):{path:[...e,r],value:s})},!1)}function Lf(t,e){if(!1===t)return;const n=t.path.join("."),r=new Error(`Detected unserializable ${e} at "${n}"`);throw r.value=t.value,r.unserializablePath=n,r}function $f(t){return Qt()?(void 0===t&&console.warn("@ngrx/store: runtime checks are currently opt-in but will be the default in the next major version with the possibility to opt-out, see https://ngrx.io/guide/migration/v8 for more information."),Object.assign({strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1},t)):{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1}}function Bf({strictActionSerializability:t,strictStateSerializability:e}){return n=>t||e?function(t,e){return function(n,r){e.action&&Lf(jf(r),"action");const s=t(n,r);return e.state&&Lf(jf(s),"state"),s}}(n,{action:t,state:e}):n}function zf({strictActionImmutability:t,strictStateImmutability:e}){return n=>t||e?function(t,e){return function(n,r){const s=e.action?Uf(r):r,i=t(n,s);return e.state?Uf(i):i}}(n,{action:t,state:e}):n}function Gf(t){return t}let Hf=(()=>class{constructor(t,e,n,r,s){}})(),qf=(()=>class{constructor(t,e,n,r){this.features=t,this.featureReducers=e,this.reducerManager=n;const s=t.map((t,n)=>{const r=e.shift();return Object.assign({},t,{reducers:r[n],initialState:Kf(t.initialState)})});n.addFeatures(s)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}})();function Wf(t,e){return e instanceof kt?t.get(e):e}function Kf(t){return"function"==typeof t?t():t}function Zf(t,e){return t.concat(e)}function Yf(t){if(t)throw new TypeError("StoreModule.forRoot() called twice. Feature modules should use StoreModule.forFeature() instead.");return"guarded"}let Qf=(()=>{class t{constructor(t,e,n){this.http=t,this.store=e,this.domSanitizer=n}createUser(t){return this.http.post("user",t).pipe(B(t=>{const{_id:e,firstname:n,lastname:r,email:s,username:i}=t.data;return Object.assign({},t,{data:{_id:e,firstname:n,lastname:r,email:s,username:i}})}))}getUsers(t){const{id:e,search:n,pagination:r}=t;return this.http.get(`user/${e}/${n?`${n}/`:"%20/"}${r.page}/${r.limit}`)}inviteUser(t,e){return this.http.post("user/invite",{userId:t,byUserId:e})}cancelInvite(t,e){return this.http.post("user/invite/cancel",{by:t,to:e})}respondToFriendRequest(t,e,n){return this.http.post(`user/friend/request/${n}`,{by:t,to:e})}getFriendRequest(t){const{id:e,search:n,pagination:r}=t;return this.http.get(`user/${e}/friend/request/${n?`${n}/`:"%20/"}${r.page}/${r.limit}`)}getFriends(t){const{id:e,search:n,pagination:r}=t;return this.http.get(`user/${e}/friends/${n?`${n}/`:"%20/"}${r.page}/${r.limit}`)}unfriend(t,e){return this.http.post("user/unfriend",{who:t,by:e})}get friendState(){return this.store.select("friendState")}actionUserOnline(t){this.store.dispatch(new ap(t))}stateGetFriends(t){const{id:e,type:n,pagination:r,search:s}=t;this.store.dispatch(new op({id:e,type:n,pagination:r,search:s}))}getProfilePicture(t){const e=`https://app-chatbox.herokuapp.com/user/${t}.jpg?t=${(new Date).getTime()}`;return this.domSanitizer.bypassSecurityTrustResourceUrl(e)}}return t.ngInjectableDef=ft({factory:function(){return new t(Rt(Op),Rt(Af),Rt(nu))},token:t,providedIn:"root"}),t})();var Xf=$n({encapsulation:0,styles:[[".home[_ngcontent-%COMP%]{width:100%;height:100vh;background:#fff;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column}.home[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;position:relative}.home[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30rem}.home[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:300;position:absolute;top:43px;right:76px;font-size:5rem;color:#2c3e50}.home[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#3b97d3;border:none;color:#fff;padding:1rem 5rem;border-radius:3px;font-size:1.5rem;box-shadow:0 5px 10px -5px #333;cursor:pointer;-webkit-transition:.25s;transition:all .25s ease}.home[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{box-shadow:0 10px 10px -5px #333;-webkit-transform:translateY(-5px);transform:translateY(-5px)}.home[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{-webkit-transform:translateY(-2.5px);transform:translateY(-2.5px);box-shadow:0 8px 5px -5px #333}"]],data:{}});function Jf(t){return Yi(0,[(t()(),Ri(0,0,null,null,6,"div",[["class","home"]],null,null,null,null,null)),(t()(),Ri(1,0,null,null,3,"div",[],null,null,null,null,null)),(t()(),Ri(2,0,null,null,0,"img",[["alt",""],["src","assets/images/logo.svg"]],null,null,null,null,null)),(t()(),Ri(3,0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),Wi(-1,null,["Hi!"])),(t()(),Ri(5,0,null,null,1,"button",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.login()&&r),r}),null,null)),(t()(),Wi(-1,null,["Sign In"]))],null,null)}function tg(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"app-home",[],null,[["window","message"]],(function(t,e,n){var r=!0;return"window:message"===e&&(r=!1!==Ur(t,1).onMessage(n)&&r),r}),Jf,Xf)),Qr(1,114688,null,0,sp,[ip,Md,Qf],null,null)],(function(t,e){t(e,1,0)}),null)}var eg=Pr("app-home",sp,tg,{},{},[]);class ng{constructor(){this.pageChanged=new _s}ngOnInit(){}paginate(t){const e=this.options.page;0===e&&-1===t||this.isDisableNext()&&1===t||(this.options.page=e+t,this.pageChanged.emit(this.options.page))}isDisableNext(){return!this.options||Math.ceil(this.options.total/this.options.limit)-1===this.options.page}}var rg=$n({encapsulation:0,styles:[[".pagination[_ngcontent-%COMP%]{display:-webkit-box;display:flex;padding:1rem;-webkit-box-align:center;align-items:center}.pagination[_ngcontent-%COMP%]   .page[_ngcontent-%COMP%]{display:block;margin:0 1rem;font-size:1.25rem;font-weight:600;color:#333;text-decoration:underline}.pagination[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;cursor:pointer}.pagination[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:hover{background:#ddd;fill:#333}.pagination[_ngcontent-%COMP%]   svg.disabled[_ngcontent-%COMP%]{fill:#c5c5c5}.pagination[_ngcontent-%COMP%]   svg.disabled[_ngcontent-%COMP%]:hover{background:#efefef}"]],data:{}});function sg(t){return Yi(0,[(t()(),Ri(0,0,null,null,12,"div",[["class","pagination"]],null,null,null,null,null)),(t()(),Ri(1,0,null,null,4,":svg:svg",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.paginate(-1)&&r),r}),null,null)),Jr(512,null,Hl,ql,[gn,mn,Ze,tn]),Qr(3,278528,null,0,Kl,[Hl],{ngClass:[0,"ngClass"]},null),Hi(4,{disabled:0}),(t()(),Ri(5,0,null,null,0,":svg:use",[[":xlink:href","assets/images/icons.svg#icon-prev"]],null,null,null,null,null)),(t()(),Ri(6,0,null,null,1,"span",[["class","page"]],null,null,null,null,null)),(t()(),Wi(7,null,["",""])),(t()(),Ri(8,0,null,null,4,":svg:svg",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.paginate(1)&&r),r}),null,null)),Jr(512,null,Hl,ql,[gn,mn,Ze,tn]),Qr(10,278528,null,0,Kl,[Hl],{ngClass:[0,"ngClass"]},null),Hi(11,{disabled:0}),(t()(),Ri(12,0,null,null,0,":svg:use",[[":xlink:href","assets/images/icons.svg#icon-next"]],null,null,null,null,null))],(function(t,e){var n=e.component,r=t(e,4,0,n.options&&0===n.options.page);t(e,3,0,r);var s=t(e,11,0,n.isDisableNext());t(e,10,0,s)}),(function(t,e){var n=e.component;t(e,7,0,(null==n.options?null:n.options.page)+1)}))}var ig=function(t){return t[t.FRIENDS=0]="FRIENDS",t[t.INVITE=1]="INVITE",t[t.FRIEND_REQUEST=2]="FRIEND_REQUEST",t}({}),og=function(t){return t.MESSAGE="MESSAGE",t.FRIEND_REQUEST="FRIEND_REQUEST",t.FRIEND_REQUEST_ACCEPT="FRIEND_REQUEST_ACCEPT",t.GROUP_INVITATION="GROUP_INVITATION",t.GROUP_MEMBER_ADD="GROUP_MEMBER_ADD",t}({});class lg{constructor(t,e,n,r){this.userSV=t,this.sessionSV=e,this.notificationSV=n,this.actionSV=r,this.subs=[],this.tabs=[{label:"Friends",value:ig.FRIENDS,count:0},{label:"Invite",value:ig.INVITE},{label:"Friend Request",value:ig.FRIEND_REQUEST,count:0}]}ngOnInit(){this.currentUser=this.sessionSV.data.user,this.selectTab(this.tabs[this.getInitialActiveTab()]),this.userSV.stateGetFriends(this.params),this.subs=[this.watchnotificationState()]}getInitialActiveTab(){return"NOTIFICATION_OPEN"===this.actionSV.previousValue.action&&"FRIEND_REQUEST"===this.actionSV.previousValue.data.type?2:0}selectTab(t){this.activeTab=t,this.userSV.stateGetFriends(this.params),t.value===ig.FRIEND_REQUEST&&this.deleteFriendRequestNotifs()}deleteFriendRequestNotifs(){const t={userid:this.currentUser._id,type:og.FRIEND_REQUEST};this.notificationSV.actionDeleteByType(t),this.notificationSV.deleteByType(t).toPromise()}watchnotificationState(){return this.notificationSV.notificationState.subscribe(t=>{this.tabs[2].count=t.notification.list.filter(t=>t.type===og.FRIEND_REQUEST).length})}get params(){return{id:this.currentUser._id,pagination:{page:0,limit:10},type:this.activeTab.value,search:""}}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe())}}class ag{constructor(t){this.payload=t,this.type="[Notification] list load"}}class cg{constructor(t){this.payload=t,this.type="[Notification] list load finish"}}class ug{constructor(t){this.payload=t,this.type="[Notification] live update"}}class hg{constructor(t){this.payload=t,this.type="[Notification] Delete"}}class dg{constructor(t){this.payload=t,this.type="[Notification] Seen"}}class pg{constructor(t){this.payload=t,this.type="[Notification] Delete by type"}}let fg=(()=>{class t{constructor(t,e){this.http=t,this.store=e}create(t){const{user:e,reference:n,type:r,message:s}=t;return this.http.post("notification",{user:e,reference:n,type:r,message:s},{headers:{loading:"background"}})}getList(t){return{http:()=>this.http.get(`notification/${t}`),action:()=>{this.store.dispatch(new ag(t))}}}deleteByReference(t){return this.http.delete(`notification/reference/${t.userid}/${t.reference}`,{headers:{loading:"background"}})}deleteByType(t){return this.http.delete(`notification/type/${t.userid}/${t.type}`,{headers:{loading:"background"}})}seenNotifications(t){return this.http.patch(`notification/${t}`,{},{headers:{loading:"background"}})}get notificationState(){return this.store.select("notificationState")}actionUpdateNotification(t){this.store.dispatch(new ug(t)),this.beepSound()}beepSound(){const t=new Audio;t.src="./assets/sounds/beep.mp3",t.play()}actionDeleteByReference(t){this.store.dispatch(new hg(t))}actionDeleteByType(t){this.store.dispatch(new pg(t))}actionSeenNotifications(t){this.store.dispatch(new dg(t))}}return t.ngInjectableDef=ft({factory:function(){return new t(Rt(Op),Rt(Af))},token:t,providedIn:"root"}),t})(),gg=(()=>{class t{constructor(){this.action=new ba({action:"init"})}dispatch(t){this.prevValue=this.value,this.action.next(t)}get listen(){return this.action}get value(){return this.action.value}get previousValue(){return this.prevValue}clear(){this.action.next({action:"",data:null})}}return t.ngInjectableDef=ft({factory:function(){return new t},token:t,providedIn:"root"}),t})();var mg=$n({encapsulation:0,styles:[["[_nghost-%COMP%]{padding:1rem 1rem 0;display:block}[_nghost-%COMP%]   ul[_ngcontent-%COMP%]{display:-webkit-box;display:flex}[_nghost-%COMP%]   li[_ngcontent-%COMP%]{padding:1rem;-webkit-box-flex:1;flex:1;background:#eee;border-right:1px solid #ddd;border-bottom:0;font-size:1.15rem;font-weight:500;color:#383838;cursor:pointer;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}[_nghost-%COMP%]   li.active[_ngcontent-%COMP%]{background:#ddd;font-weight:600}[_nghost-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#eee}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#5d5d5d;color:#fff;font-weight:500;padding:.25rem .5rem;border-radius:5px;font-size:1rem;margin-left:.5rem}"]],data:{}});function bg(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),Wi(1,null,["",""]))],null,(function(t,e){t(e,1,0,e.parent.context.$implicit.count)}))}function vg(t){return Yi(0,[(t()(),Ri(0,0,null,null,6,"li",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.selectTab(t.context.$implicit)&&r),r}),null,null)),Jr(512,null,Hl,ql,[gn,mn,Ze,tn]),Qr(2,278528,null,0,Kl,[Hl],{ngClass:[0,"ngClass"]},null),Hi(3,{active:0}),(t()(),Wi(4,null,[" "," "])),(t()(),Ii(16777216,null,null,1,null,bg)),Qr(6,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=t(e,3,0,e.context.$implicit.value===e.component.activeTab.value);t(e,2,0,n),t(e,6,0,e.context.$implicit.count)}),(function(t,e){t(e,4,0,e.context.$implicit.label)}))}function yg(t){return Yi(0,[(t()(),Ri(0,0,null,null,2,"ul",[],null,null,null,null,null)),(t()(),Ii(16777216,null,null,1,null,vg)),Qr(2,278528,null,0,Yl,[Sn,wn,gn],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,2,0,e.component.tabs)}),null)}class _g extends ${constructor(t,e){super(t),this.sources=e,this.completed=0,this.haveValues=0;const n=e.length;this.values=new Array(n);for(let r=0;r<n;r++){const t=L(this,e[r],null,r);t&&this.add(t)}}notifyNext(t,e,n,r,s){this.values[n]=e,s._hasValue||(s._hasValue=!0,this.haveValues++)}notifyComplete(t){const{destination:e,haveValues:n,values:r}=this,s=r.length;t._hasValue?(this.completed++,this.completed===s&&(n===s&&e.next(r),e.complete())):e.complete()}}const Cg=new kt("NgValueAccessor");let wg=(()=>class{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}})();const xg=new kt("CompositionEventMode");let Sg=(()=>class{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=ac()?ac().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}})();class Og{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class kg extends Og{get formDirective(){return null}get path(){return null}}function Pg(){throw new Error("unimplemented")}class Eg extends Og{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return Pg()}get asyncValidator(){return Pg()}}class Mg{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let Tg=(()=>class extends Mg{constructor(t){super(t)}})(),Ag=(()=>class extends Mg{constructor(t){super(t)}})();function Ig(t){return null==t||0===t.length}const Rg=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/;class Ng{static min(t){return e=>{if(Ig(e.value)||Ig(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(Ig(e.value)||Ig(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return Ig(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return Ig(t.value)?null:Rg.test(t.value)?null:{email:!0}}static minLength(t){return e=>{if(Ig(e.value))return null;const n=e.value?e.value.length:0;return n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}static maxLength(t){return e=>{const n=e.value?e.value.length:0;return n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}static pattern(t){if(!t)return Ng.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(Ig(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(Dg);return 0==e.length?null:function(t){return Fg(function(t,e){return e.map(e=>e(t))}(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(Dg);return 0==e.length?null:function(t){return function t(...e){let n;return"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&a(e[0])&&(e=e[0]),0===e.length?pa:n?t(e).pipe(B(t=>n(...t))):new C(t=>new _g(t,e))}(function(t,e){return e.map(e=>e(t))}(t,e).map(Vg)).pipe(B(Fg))}}}function Dg(t){return null!=t}function Vg(t){const e=Ve(t)?q(t):t;if(!Fe(e))throw new Error("Expected validator to return Promise or Observable.");return e}function Fg(t){const e=t.reduce((t,e)=>null!=e?Object.assign({},t,e):t,{});return 0===Object.keys(e).length?null:e}function Ug(t){return t.validate?e=>t.validate(e):t}function jg(t){return t.validate?e=>t.validate(e):t}let Lg=(()=>class{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}})(),$g=(()=>class{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}})(),Bg=(()=>class{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(Eg),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}})();const zg='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',Gg='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',Hg='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>';class qg{static controlParentException(){throw new Error(`formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${zg}`)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${Gg}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ${Hg}`)}static missingFormException(){throw new Error(`formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       ${zg}`)}static groupParentException(){throw new Error(`formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${Gg}`)}static arrayParentException(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(t){console.warn(`\n    It looks like you're using ngModel on the same form field as ${t}. \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===t?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}function Wg(t,e){return[...e.path,t]}function Kg(t,e){t||Xg(e,"Cannot find control with"),e.valueAccessor||Xg(e,"No value accessor for form control with"),t.validator=Ng.compose([t.validator,e.validator]),t.asyncValidator=Ng.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Zg(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Zg(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function Zg(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Yg(t,e){null==t&&Xg(e,"Cannot find control with"),t.validator=Ng.compose([t.validator,e.validator]),t.asyncValidator=Ng.composeAsync([t.asyncValidator,e.asyncValidator])}function Qg(t){return Xg(t,"There is no FormControl instance attached to form control element with")}function Xg(t,e){let n;throw n=t.path.length>1?`path: '${t.path.join(" -> ")}'`:t.path[0]?`name: '${t.path}'`:"unspecified name attribute",new Error(`${e} ${n}`)}function Jg(t){return null!=t?Ng.compose(t.map(Ug)):null}function tm(t){return null!=t?Ng.composeAsync(t.map(jg)):null}function em(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Ae(e,n.currentValue)}const nm=[wg,(()=>class{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}})(),Lg,(()=>class{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Ae}set compareWith(t){if("function"!=typeof t)throw new Error(`compareWith must be a function, but received ${JSON.stringify(t)}`);this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}})(),(()=>class{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Ae}set compareWith(t){if("function"!=typeof t)throw new Error(`compareWith must be a function, but received ${JSON.stringify(t)}`);this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(e.hasOwnProperty("selectedOptions")){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),s=this._getOptionValue(r.value);n.push(s)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}})(),Bg];function rm(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function sm(t,e){if(!e)return null;Array.isArray(e)||Xg(t,"Value accessor was not provided as an array for form control with");let n=void 0,r=void 0,s=void 0;return e.forEach(e=>{var i;e.constructor===Sg?n=e:(i=e,nm.some(t=>i.constructor===t)?(r&&Xg(t,"More than one built-in value accessor matches form control with"),r=e):(s&&Xg(t,"More than one custom value accessor matches form control with"),s=e))}),s||r||n||(Xg(t,"No valid value accessor for form control with"),null)}function im(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function om(t){const e=am(t)?t.validators:t;return Array.isArray(e)?Jg(e):e||null}function lm(t,e){const n=am(e)?e.asyncValidators:t;return Array.isArray(n)?tm(n):n||null}function am(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class cm{constructor(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this.validator=om(t)}setAsyncValidators(t){this.asyncValidator=lm(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(e=>{e.disable(Object.assign({},t,{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign({},t,{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild(e=>{e.enable(Object.assign({},t,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign({},t,{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status="PENDING";const e=Vg(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>this.setErrors(e,{emitEvent:t}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){return null==e?null:(e instanceof Array||(e=e.split(".")),e instanceof Array&&0===e.length?null:e.reduce((t,e)=>t instanceof hm?t.controls.hasOwnProperty(e)?t.controls[e]:null:t instanceof dm&&t.at(e)||null,t))}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new _s,this.statusChanges=new _s}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){am(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class um extends cm{constructor(t=null,e,n){super(om(e),lm(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class hm extends cm{constructor(t,e,n){super(om(e),lm(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof um?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){let e=!1;return this._forEachChild((n,r)=>{e=e||this.contains(r)&&t(n)}),e}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class dm extends cm{constructor(t,e,n){super(om(e),lm(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof um?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const pm=(()=>Promise.resolve(null))();let fm=(()=>class extends kg{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new _s,this.form=new hm({},Jg(t),tm(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){pm.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),Kg(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){pm.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),im(this._directives,t)})}addFormGroup(t){pm.then(()=>{const e=this._findContainer(t.path),n=new hm({});Yg(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){pm.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){pm.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,rm(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}})();class gm{static modelParentException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup's partner directive "formControlName" instead.  Example:\n\n      ${zg}\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  `)}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${Gg}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${Hg}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${Gg}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${Hg}`)}static ngFormWarning(){console.warn("\n    It looks like you're using 'ngForm'.\n\n    Support for using the 'ngForm' element selector has been deprecated in Angular v6 and will be removed\n    in Angular v9.\n\n    Use 'ng-form' instead.\n\n    Before:\n    <ngForm #myForm=\"ngForm\">\n\n    After:\n    <ng-form #myForm=\"ngForm\">\n    ")}}const mm=new kt("NgFormSelectorWarning");class bm extends kg{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Wg(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Jg(this._validators)}get asyncValidator(){return tm(this._asyncValidators)}_checkParentType(){}}let vm=(()=>{class t extends bm{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){this._parent instanceof t||this._parent instanceof fm||gm.modelGroupParentException()}}return t})();const ym=(()=>Promise.resolve(null))();let _m=(()=>class extends Eg{constructor(t,e,n,r){super(),this.control=new um,this._registered=!1,this.update=new _s,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=sm(this,r)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),em(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?Wg(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Jg(this._rawValidators)}get asyncValidator(){return tm(this._rawAsyncValidators)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Kg(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof vm)&&this._parent instanceof bm?gm.formGroupNameException():this._parent instanceof vm||this._parent instanceof fm||gm.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||gm.missingNameException()}_updateValue(t){ym.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;ym.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}})(),Cm=(()=>class{})();const wm=new kt("NgModelWithFormControlWarning");let xm=(()=>class extends kg{constructor(t,e){super(),this._validators=t,this._asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new _s}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return Kg(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){im(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);Yg(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);Yg(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,rm(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){e.valueAccessor.registerOnChange(()=>Qg(e)),e.valueAccessor.registerOnTouched(()=>Qg(e)),e._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}(t.control,t),e&&Kg(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const t=Jg(this._validators);this.form.validator=Ng.compose([this.form.validator,t]);const e=tm(this._asyncValidators);this.form.asyncValidator=Ng.composeAsync([this.form.asyncValidator,e])}_checkFormPresent(){this.form||qg.missingFormException()}})(),Sm=(()=>class extends bm{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){km(this._parent)&&qg.groupParentException()}})(),Om=(()=>class extends kg{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Wg(this.name,this._parent)}get validator(){return Jg(this._validators)}get asyncValidator(){return tm(this._asyncValidators)}_checkParentType(){km(this._parent)&&qg.arrayParentException()}})();function km(t){return!(t instanceof Sm||t instanceof xm||t instanceof Om)}let Pm=(()=>{class t extends Eg{constructor(t,e,n,r,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.update=new _s,this._ngModelWarningSent=!1,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=sm(this,r)}set isDisabled(t){qg.disabledAttrWarning()}ngOnChanges(e){var n,r;this._added||this._setUpControl(),em(e,this.viewModel)&&("formControlName",n=t,this,r=this._ngModelWarningConfig,Qt()&&"never"!==r&&((null!==r&&"once"!==r||n._ngModelWarningSentOnce)&&("always"!==r||this._ngModelWarningSent)||(qg.ngModelWarning("formControlName"),n._ngModelWarningSentOnce=!0,this._ngModelWarningSent=!0)),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Wg(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Jg(this._rawValidators)}get asyncValidator(){return tm(this._rawAsyncValidators)}_checkParentType(){!(this._parent instanceof Sm)&&this._parent instanceof bm?qg.ngModelGroupException():this._parent instanceof Sm||this._parent instanceof xm||this._parent instanceof Om||qg.controlParentException()}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t._ngModelWarningSentOnce=!1,t})(),Em=(()=>class{})(),Mm=(()=>class{group(t,e=null){const n=this._reduceControls(t);let r=null,s=null,i=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,s=null!=e.asyncValidators?e.asyncValidators:null,i=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,s=null!=e.asyncValidator?e.asyncValidator:null)),new hm(n,{asyncValidators:s,updateOn:i,validators:r})}control(t,e,n){return new um(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new dm(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof um||t instanceof hm||t instanceof dm?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}})(),Tm=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:mm,useValue:e.warnOnDeprecatedNgFormSelector}]}}}return t})(),Am=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:wm,useValue:e.warnOnNgModelWithFormControl}]}}}return t})();var Im=function(t){return t.MESSAGE="message",t.TYPING="typing",t.FRIEND_REQUEST="request",t.FRIEND_REQUEST_ACCEPT="accept",t.GROUP_MEMBER_ADD="group_add",t.REACT="react",t.UPDATE_TEMPORARY_ID="update_temporary_id",t.ONLINE_KABA="online_kaba",t.OO_ONLINE_AKO="oo_online_ako",t}({}),Rm=function(t){return t.PERSONAL="PERSONAL",t.GROUP="GROUP",t}({});class Nm{constructor(t,e,n,r,s,i,o){this.actionSV=t,this.userSV=e,this.sessionSV=n,this.alertSV=r,this.notifSV=s,this.conversationSV=i,this.websocketSV=o,this.subs=[],this.friendType=ig,this.searchKey="",this.removeActionButton=[]}ngOnInit(){this.currentUser=this.sessionSV.data.user,this.subs=[this.watchFriendState(),this.watchConversationState()]}watchConversationState(){return this.conversationSV.conversationState.subscribe(t=>{this.selectedConversation=t.conversation.selected})}iSearch(){this.searhTimer&&clearTimeout(this.searhTimer),this.searhTimer=setTimeout(t=>{const e={id:this.currentUser._id,type:this.friendState.users.type,pagination:Object.assign({},this.friendState.users.pagination,{page:0}),search:this.searchKey};this.userSV.stateGetFriends(e)},1e3)}watchFriendState(){return this.userSV.friendState.subscribe(t=>{"[Friend] load user list finish"===t.action.name&&(this.friendState=t,this.searchKey=t.users.search,this.removeActionButton=[])})}close(){this.actionSV.dispatch({action:"FRIENDS_SHOW",data:{value:!1}})}doFriendAction(t,e){switch(t){case"invite":this.userSV.inviteUser(e._id,this.currentUser._id).subscribe(t=>{this.disableActionButton(e._id),this.createFriendRequestNotification({userId:e._id,type:"FRIEND_REQUEST",reference:this.currentUser._id})});break;case"cancel":this.cancelInvitation(e._id);break;case"unfriend":this.unfriendUser(e);break;default:this.respondToFriendRequest(e._id,t)}}createFriendRequestNotification(t){const e={reference:t.reference,type:og[t.type],user:t.userId,message:this.currentUser.firstname+("FRIEND_REQUEST_ACCEPT"===t.type?" accepted your friend request":" sent you a friend request")};this.notifSV.create(e).toPromise(),this.websocketSV.dispatch({id:t.userId,type:Im[t.type],data:Object.assign({},e,{createdDate:new Date,seen:!1})})}respondToFriendRequest(t,e){this.userSV.respondToFriendRequest(t,this.currentUser._id,e).subscribe(n=>{this.disableActionButton(t),"reject"!==e&&(this.conversationSV.actionAddConversation(n.data),this.createFriendRequestNotification({userId:t,type:"FRIEND_REQUEST_ACCEPT",reference:n.data._id}))})}unfriendUser(t){this.alertSV.confirm("Are you sure?",["Yes","No"],`Unfriend ${t.firstname}?`).then(e=>{0===e&&this.userSV.unfriend(t._id,this.currentUser._id).subscribe(e=>{this.disableActionButton(t._id),this.selectedConversation.type===Rm.PERSONAL&&this.conversationSV.actionRemoveConversation(e.data._id)})})}cancelInvitation(t){this.alertSV.confirm("Are you sure?",["Yes","No"],"Cancel Invitation").then(e=>{0===e&&this.userSV.cancelInvite(this.currentUser._id,t).subscribe(e=>{this.disableActionButton(t)})})}disableActionButton(t){this.removeActionButton.push(t)}pageChanged(t){this.userSV.stateGetFriends({id:this.currentUser._id,type:this.friendState.users.type,pagination:this.friendState.users.pagination,search:this.friendState.users.search})}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe())}}const Dm=function(){var t={SUCCESS:0,ERROR:1,INFO:2,WARNING:3,CONFIRM:4};return t[t.SUCCESS]="SUCCESS",t[t.ERROR]="ERROR",t[t.INFO]="INFO",t[t.WARNING]="WARNING",t[t.CONFIRM]="CONFIRM",t}();let Vm=(()=>{class t{constructor(){this.event=new P}success(t,e){return this.alert({title:e||"Success!",type:Dm.SUCCESS,message:t})}error(t,e){return this.alert({title:e||"Error!",type:Dm.ERROR,message:t})}info(t,e){return this.alert({title:e||"Info",type:Dm.INFO,message:t})}warning(t,e){return this.alert({title:e||"Warning!",type:Dm.WARNING,message:t})}confirm(t,e,n){return this.alert({title:n||"Confirm?",type:Dm.CONFIRM,message:t,buttons:e})}alert(t){return t.buttons&&0!==t.buttons.length||(t.buttons=["Ok"]),this.event.next({name:"SHOW_ALERT",data:t}),new Promise((t,e)=>{this.event.subscribe(e=>{"ALERT_ANSWER"===e.name&&t(e.data)})})}answer(t){this.event.next({name:"ALERT_ANSWER",data:t})}get watch(){return new C(t=>{this.event.subscribe(e=>{t.next(e)})})}}return t.ngInjectableDef=ft({factory:function(){return new t},token:t,providedIn:"root"}),t})(),Fm=(()=>class{constructor(t,e){this.srv=t,this.elref=e,this.show=!1}ngOnInit(){this.subs=this.srv.watch.subscribe(t=>{"SHOW_ALERT"===t.name&&(this.alert=t.data,this.show=!0,setTimeout(t=>{this.focusFirstButton()},100))})}focusFirstButton(){this.elref.nativeElement.querySelectorAll(".alert__buttons button")[0].focus()}answer(t){this.srv.answer(t),this.show=!1}ngOnDestroy(){this.subs.unsubscribe()}})(),Um=(()=>class{})();class jm{constructor(t){this.payload=t,this.type="[Conversation] list load"}}class Lm{constructor(t){this.payload=t,this.type="[Conversation] list load finish"}}class $m{constructor(t){this.payload=t,this.type="[Conversation] SELECT"}}class Bm{constructor(t){this.payload=t,this.type="[Conversation] Load messages"}}class zm{constructor(t){this.payload=t,this.type="[Conversation] Send message"}}class Gm{constructor(t){this.payload=t,this.type="[Conversation] Action reset"}}class Hm{constructor(t){this.payload=t,this.type="[Conversation] Add"}}class qm{constructor(t){this.payload=t,this.type="[Conversation] Remove"}}class Wm{constructor(t){this.payload=t,this.type="[Conversation] Group create"}}class Km{constructor(t){this.payload=t,this.type="[Conversation] Group create finish"}}class Zm{constructor(t){this.payload=t,this.type="[Conversation] Group Leave"}}class Ym{constructor(t){this.payload=t,this.type="[Conversation] Group Leave finish"}}class Qm{constructor(t){this.payload=t,this.type="[Conversation] Group user remove"}}class Xm{constructor(t){this.payload=t,this.type="[Conversation] Group user remove finish"}}class Jm{constructor(t){this.payload=t,this.type="[Conversation] Group delete"}}class tb{constructor(t){this.payload=t,this.type="[Conversation] Group delete finish"}}class eb{constructor(t){this.payload=t,this.type="[Conversation] Group add member"}}class nb{constructor(t){this.payload=t,this.type="[Conversation] add member finish"}}class rb{constructor(t){this.payload=t,this.type="[Conversation] Load previous messages"}}class sb{constructor(t){this.payload=t,this.type="[Conversation] Load previous messages finish"}}class ib{constructor(t){this.payload=t,this.type="[Conversation] group rename"}}class ob{constructor(t){this.payload=t,this.type="[Conversation] Message react"}}class lb{constructor(t){this.payload=t,this.type="[Conversation] Message react finish"}}class ab{constructor(t){this.payload=t,this.type="[Conversation] Message update temporary id"}}class cb{constructor(t){this.payload=t,this.type="[Conversation] Message reply"}}let ub=(()=>{class t{constructor(t,e){this.http=t,this.store=e}sendMessage(t,e){return this.http.post("conversation/message",{conversationId:t,from:e.from,message:e.message},{headers:{loading:"background"}})}getMessages(t){return this.http.get(`conversation/${t}/messages`)}get conversationState(){return this.store.select("conversationState")}actionSelectConversation(t){this.store.dispatch(new $m(t))}actionSendMessage(t){this.store.dispatch(new zm(t))}actionActionReset(){this.store.dispatch(new Gm)}actionAddConversation(t){this.store.dispatch(new Hm(t))}actionRemoveConversation(t){this.store.dispatch(new qm(t))}actionUpdateTemporaryID(t){this.store.dispatch(new ab(t))}actionMessageReply(t){this.store.dispatch(new cb(t))}getPreviousMessage(t){return{http:()=>this.http.get(`conversation/${t.id}/messages/${t.pagination.page}/${t.pagination.limit}`,{headers:{loading:"background"}}),action:()=>{this.store.dispatch(new rb(t))}}}getConversations(t){return{http:()=>{const{id:e,type:n}=t;return this.http.get(`conversation/${e}/type/${n}`)},action:()=>{this.store.dispatch(new jm(t))}}}createGroup(t){return{http:()=>this.http.post("conversation",t),action:()=>{this.store.dispatch(new Wm(t))}}}leaveGroup(t){return{http:()=>this.http.patch("conversation/leave",t),action:()=>{this.store.dispatch(new Zm(t))}}}removeUserOnGroup(t){return{http:()=>this.http.patch("conversation/leave",t),action:()=>{this.store.dispatch(new Qm(t))}}}deleteGroup(t){return{http:()=>this.http.delete(`conversation/${t}`),action:()=>{this.store.dispatch(new Jm(t))}}}addMember(t){return{http:()=>this.http.patch("conversation/member",t),action:()=>{this.store.dispatch(new eb(t))}}}renameGroup(t){return{http:()=>this.http.patch("conversation/rename",t,{headers:{loading:"background"}}),action:()=>{this.store.dispatch(new ib(t))},all:()=>{this.renameGroup(t).http().toPromise(),this.renameGroup(t).action()}}}}return t.ngInjectableDef=ft({factory:function(){return new t(Rt(Op),Rt(Af))},token:t,providedIn:"root"}),t})();function hb(t,e,n,r){var s,i=arguments.length,o=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(o=(i<3?s(o):i>3?s(e,n,o):s(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o}function db(t,e,n,r){return new(n||(n=Promise))((function(s,i){function o(t){try{a(r.next(t))}catch(e){i(e)}}function l(t){try{a(r.throw(t))}catch(e){i(e)}}function a(t){t.done?s(t.value):new n((function(e){e(t.value)})).then(o,l)}a((r=r.apply(t,e||[])).next())}))}var pb,fb=n("pqID"),gb=n.n(fb);class mb{constructor(t){this.config=t,this.subscribersCounter=0,this.emptyConfig={url:"",options:{}},void 0===t&&(t=this.emptyConfig),this.ioSocket=(gb.a?gb.a:fb)(t.url,t.options)}of(t){this.ioSocket.of(t)}on(t,e){this.ioSocket.on(t,e)}once(t,e){this.ioSocket.once(t,e)}connect(){return this.ioSocket.connect()}disconnect(t){return this.ioSocket.disconnect.apply(this.ioSocket,arguments)}emit(t,e,n){return this.ioSocket.emit.apply(this.ioSocket,arguments)}removeListener(t,e){return this.ioSocket.removeListener.apply(this.ioSocket,arguments)}removeAllListeners(t){return this.ioSocket.removeAllListeners.apply(this.ioSocket,arguments)}fromEvent(t){return this.subscribersCounter++,C.create(e=>(this.ioSocket.on(t,t=>{e.next(t)}),()=>{1===this.subscribersCounter&&this.ioSocket.removeListener(t)})).pipe(ot())}fromOneTimeEvent(t){return new Promise(e=>this.once(t,e))}}function bb(t){return new mb(t)}const vb=new kt("__SOCKET_IO_CONFIG__");let yb=(()=>pb=class{static forRoot(t){return{ngModule:pb,providers:[{provide:vb,useValue:t},{provide:mb,useFactory:bb,deps:[vb]}]}}})(),_b=(()=>{class t{constructor(t,e){this.socket=t,this.sessionSV=e}dispatch(t){this.socket.emit("ws",t)}listen(t,e){return this.socket.fromEvent(`ws/${t}/${e||this.currentUserID}`)}get currentUserID(){return this.sessionSV.data.user._id}}return t.ngInjectableDef=ft({factory:function(){return new t(Rt(mb),Rt(ip))},token:t,providedIn:"root"}),t})();var Cb=$n({encapsulation:0,styles:[["[_nghost-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);z-index:1}.content[_ngcontent-%COMP%]{width:95%;max-width:50rem;background:#fff;margin:5rem auto auto;border-radius:2px;position:relative}.content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:-30px;right:-5px;fill:#fff;width:3rem;height:3rem;cursor:pointer}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{padding:1rem;position:relative}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:2px;padding:1rem;width:100%;background:#eee;border:1px solid #ddd;-webkit-transition:.25s;transition:all .25s ease}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#c1c1c1}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#c1c1c1}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:#c1c1c1}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#c1c1c1}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#929292;width:2.5rem;height:2.5rem;position:absolute;right:1.5rem;top:1.6rem;pointer-events:none;-webkit-transition:.25s;transition:all .25s ease}.content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{padding:0 1rem;max-height:calc(100vh - 22rem);overflow-y:auto}.content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;padding:1rem;border-bottom:1px dotted #ddd}.content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:4rem;height:4rem;margin-right:.5rem}.content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1.25rem}.content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{margin-left:auto}.content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem;border:none;background:#2b5784;cursor:pointer;border-radius:3px;color:#fff;font-size:1.1rem;margin-left:.5rem}.pagination[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end}.pagination1[_ngcontent-%COMP%]{display:-webkit-box;display:flex;padding:1rem;-webkit-box-pack:end;justify-content:flex-end;-webkit-box-align:center;align-items:center}.pagination1[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;cursor:pointer;margin-left:1rem}.pagination1[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:hover{background:#ddd;fill:#333}"]],data:{}});function wb(t){return Yi(0,[(t()(),Ri(0,0,null,null,4,null,null,null,null,null,null,null)),(t()(),Ri(1,0,null,null,1,"button",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.doFriendAction("reject",t.parent.parent.parent.context.$implicit)&&r),r}),null,null)),(t()(),Wi(-1,null,["Reject"])),(t()(),Ri(3,0,null,null,1,"button",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.doFriendAction("accept",t.parent.parent.parent.context.$implicit)&&r),r}),null,null)),(t()(),Wi(-1,null,["Accept"]))],null,null)}function xb(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.doFriendAction("cancel",t.parent.parent.parent.context.$implicit)&&r),r}),null,null)),(t()(),Wi(-1,null,["Cancel Invitation"]))],null,null)}function Sb(t){return Yi(0,[(t()(),Ri(0,0,null,null,3,null,null,null,null,null,null,null)),(t()(),Ii(16777216,null,null,1,null,wb)),Qr(2,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),Ii(0,[["cancel",2]],null,0,null,xb))],(function(t,e){var n=e.parent.parent.context.$implicit.invites&&e.parent.parent.context.$implicit.invites.indexOf(e.component.currentUser._id)>=0;t(e,2,0,n,Ur(e,3))}),null)}function Ob(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.doFriendAction("invite",t.parent.parent.context.$implicit)&&r),r}),null,null)),(t()(),Wi(-1,null,["Invite"]))],null,null)}function kb(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.doFriendAction("unfriend",t.parent.parent.context.$implicit)&&r),r}),null,null)),(t()(),Wi(-1,null,["Unfriend"]))],null,null)}function Pb(t){return Yi(0,[(t()(),Ri(0,0,null,null,6,"div",[["class","action"]],null,null,null,null,null)),(t()(),Ii(16777216,null,null,1,null,Sb)),Qr(2,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Ii(16777216,null,null,1,null,Ob)),Qr(4,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Ii(16777216,null,null,1,null,kb)),Qr(6,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,n.friendState.users.type===n.friendType.FRIEND_REQUEST),t(e,4,0,n.friendState.users.type===n.friendType.INVITE),t(e,6,0,n.friendState.users.type===n.friendType.FRIENDS)}),null)}function Eb(t){return Yi(0,[(t()(),Ri(0,0,null,null,5,"li",[],null,null,null,null,null)),(t()(),Ri(1,0,null,null,0,"img",[["alt",""],["class","avatar"],["src","./assets/images/avatar.svg"]],null,null,null,null,null)),(t()(),Ri(2,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),Wi(3,null,[""," ",""])),(t()(),Ii(16777216,null,null,1,null,Pb)),Qr(5,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){t(e,5,0,!(e.component.removeActionButton.indexOf(e.context.$implicit._id)>=0))}),(function(t,e){t(e,3,0,e.context.$implicit.firstname,e.context.$implicit.lastname)}))}function Mb(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"li",[],null,null,null,null,null)),(t()(),Wi(-1,null,[" No Results found! "]))],null,null)}function Tb(t){return Yi(0,[(t()(),Ri(0,0,null,null,4,"ul",[["class","list custom-scroll"]],null,null,null,null,null)),(t()(),Ii(16777216,null,null,1,null,Eb)),Qr(2,278528,null,0,Yl,[Sn,wn,gn],{ngForOf:[0,"ngForOf"]},null),(t()(),Ii(16777216,null,null,1,null,Mb)),Qr(4,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,n.friendState.users.list),t(e,4,0,0===n.friendState.users.list.length)}),null)}function Ab(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"app-pagination",[],null,[[null,"pageChanged"]],(function(t,e,n){var r=!0;return"pageChanged"===e&&(r=!1!==t.component.pageChanged(n)&&r),r}),sg,rg)),Qr(1,114688,null,0,ng,[],{options:[0,"options"]},{pageChanged:"pageChanged"})],(function(t,e){var n=e.component;t(e,1,0,null==n.friendState?null:n.friendState.users.pagination)}),null)}function Ib(t){return Yi(0,[(t()(),Ri(0,0,null,null,18,"div",[["class","content"]],null,null,null,null,null)),(t()(),Ri(1,0,null,null,1,":svg:svg",[["class","close"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.close()&&r),r}),null,null)),(t()(),Ri(2,0,null,null,0,":svg:use",[[":xlink:href","assets/images/icons.svg#icon-clearclose"]],null,null,null,null,null)),(t()(),Ri(3,0,null,null,1,"app-friends-tab",[],null,null,null,yg,mg)),Qr(4,245760,null,0,lg,[Qf,ip,fg,gg],null,null),(t()(),Ri(5,0,null,null,8,"div",[["class","search"]],null,null,null,null,null)),(t()(),Ri(6,0,null,null,5,"input",[["placeholder","Search"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var r=!0,s=t.component;return"input"===e&&(r=!1!==Ur(t,7)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==Ur(t,7).onTouched()&&r),"compositionstart"===e&&(r=!1!==Ur(t,7)._compositionStart()&&r),"compositionend"===e&&(r=!1!==Ur(t,7)._compositionEnd(n.target.value)&&r),"keyup"===e&&(r=!1!==s.iSearch()&&r),"ngModelChange"===e&&(r=!1!==(s.searchKey=n)&&r),r}),null,null)),Qr(7,16384,null,0,Sg,[tn,Ze,[2,xg]],null,null),Jr(1024,null,Cg,(function(t){return[t]}),[Sg]),Qr(9,671744,null,0,_m,[[8,null],[8,null],[8,null],[6,Cg]],{model:[0,"model"]},{update:"ngModelChange"}),Jr(2048,null,Eg,null,[_m]),Qr(11,16384,null,0,Tg,[[4,Eg]],null,null),(t()(),Ri(12,0,null,null,1,":svg:svg",[],null,null,null,null,null)),(t()(),Ri(13,0,null,null,0,":svg:use",[[":xlink:href","assets/images/icons.svg#icon-search"]],null,null,null,null,null)),(t()(),Ii(16777216,null,null,1,null,Tb)),Qr(15,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Ri(16,0,null,null,2,"div",[["class","pagination"]],null,null,null,null,null)),(t()(),Ii(16777216,null,null,1,null,Ab)),Qr(18,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,4,0),t(e,9,0,n.searchKey),t(e,15,0,n.friendState),t(e,18,0,(null==n.friendState?null:n.friendState.users.pagination.total)>0)}),(function(t,e){t(e,6,0,Ur(e,11).ngClassUntouched,Ur(e,11).ngClassTouched,Ur(e,11).ngClassPristine,Ur(e,11).ngClassDirty,Ur(e,11).ngClassValid,Ur(e,11).ngClassInvalid,Ur(e,11).ngClassPending)}))}class Rb{transform(t,e){return e?t.filter(t=>{const n=t.members[0],r=(t.type===Rm.PERSONAL?`${n.firstname} ${n.lastname}`:t.name).toLowerCase(),s=e.toLowerCase();return-1!==r.indexOf(s)}):t}}class Nb{constructor(t,e,n,r,s,i){this.conversationSV=t,this.sessionSV=e,this.notificationSV=n,this.actionSV=r,this.userSV=s,this.websocketSV=i,this.subs=[],this.conversations=[],this.notifications=[],this.searchKey="",this.profilePictures=[],this.onlineUsers=[]}ngOnInit(){this.currentUser=this.sessionSV.data.user,this.subs=[this.watchConversationState(),this.watchNotificationState(),this.watchOnlineUsers()],this.conversationSV.getConversations({id:this.currentUser._id,type:Rm.PERSONAL,search:"",pagination:{limit:10,page:0}}).action()}isOnline(t){return this.onlineUsers.filter(e=>e._id===t).length>0}watchOnlineUsers(){return this.userSV.friendState.subscribe(t=>{this.onlineUsers=t.users.onlines})}checkWhosOnline(){this.conversations.forEach(t=>{t.members.forEach(t=>{this.websocketSV.dispatch({id:t._id,type:Im.ONLINE_KABA,data:this.currentUser})})})}getProfilePictures(){this.profilePictures=[],this.conversations.forEach(t=>{this.profilePictures.push(this.userSV.getProfilePicture(t.members[0]._id))})}openConversationFromNotifaction(){if("NOTIFICATION_OPEN"===this.actionSV.previousValue.action){const t=this.actionSV.previousValue.data.reference,e=this.conversations.filter(e=>e._id===t);e.length>0&&this.selectConversation(e[0])}}countNotification(t){return this.notifications.filter(e=>e.user===this.currentUser._id&&og.MESSAGE===e.type&&t===e.reference).length}watchNotificationState(){return this.notificationSV.notificationState.subscribe(t=>{this.notifications=t.notification.list})}selectConversation(t){this.selectedConversation=t,this.conversationSV.actionSelectConversation(t);const e={userid:this.currentUser._id,reference:t._id};this.notificationSV.actionDeleteByReference(e),this.notificationSV.deleteByReference(e).toPromise()}watchConversationState(){return this.conversationSV.conversationState.subscribe(t=>{switch(t.action.name){case"[Conversation] list load finish":this.filterConversationMembers(t.conversation.list),this.openConversationFromNotifaction(),this.getProfilePictures(),this.checkWhosOnline(),t.conversation.list.length>0&&this.selectConversation(t.conversation.list[0]);break;case"[Conversation] Add":case"[Conversation] Remove":this.filterConversationMembers(t.conversation.list),this.openConversationFromNotifaction(),this.getProfilePictures()}})}filterConversationMembers(t){this.conversations=t.map(t=>(t.members=t.members.filter(t=>t._id!==this.currentUser._id),t))}ngOnDestroy(){this.conversations=[],this.subs.forEach(t=>t.unsubscribe()),this.conversationSV.actionActionReset()}}var Db=$n({encapsulation:0,styles:[['[_nghost-%COMP%]{-webkit-box-flex:1;flex:1;overflow-y:auto;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column}.title[_ngcontent-%COMP%]{padding:.5rem 1rem 0;font-size:1.5rem;font-weight:500;color:#fff}.search[_ngcontent-%COMP%]{padding:.5rem 1rem;position:relative}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:0;border-radius:2px;padding:1rem;width:100%;background:rgba(255,255,255,.2);color:#fff;-webkit-transition:.25s;transition:all .25s ease}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:rgba(255,255,255,.5)}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:rgba(255,255,255,.5)}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:rgba(255,255,255,.5)}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:rgba(255,255,255,.5)}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background:rgba(255,255,255,.3)}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus   svg[_ngcontent-%COMP%]{fill:#fff}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + svg[_ngcontent-%COMP%]{fill:#fff;background:#536f8a}.search[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#929292;width:2.5rem;height:2.5rem;position:absolute;right:1.5rem;top:1.1rem;pointer-events:none;background:#3a5979;-webkit-transition:.25s;transition:all .25s ease}.conversations[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1;overflow-y:auto}.conversations[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:-webkit-box;display:flex;padding:1rem;cursor:pointer;position:relative}.conversations[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid rgba(255,255,255,.05)}.conversations[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background:#204469}.conversations[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#0c1e31}.conversations[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:4rem;height:4rem;margin-right:1rem;border-radius:50%;border:2px solid #fff}.conversations[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{color:#fff;pointer-events:none}.conversations[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1.25rem}.conversations[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.conversations[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"";width:1rem;height:1rem;display:inline-block;border-radius:50%;margin-right:.5rem;background:#8a8a8a}.conversations[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   span.online[_ngcontent-%COMP%]:before{background:#46e246}.conversations[_ngcontent-%COMP%]   .notifications[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;color:#fff;border-radius:50%;background:red;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;position:absolute;top:5px;left:7px;font-weight:600;box-shadow:0 0 0 1px rgba(255,255,255,.5);z-index:1}']],data:{}});function Vb(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"span",[["class","notifications"]],null,null,null,null,null)),(t()(),Wi(1,null,["",""]))],null,(function(t,e){t(e,1,0,e.component.countNotification(e.parent.context.$implicit._id))}))}function Fb(t){return Yi(0,[(t()(),Ri(0,0,null,null,14,"li",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.selectConversation(t.context.$implicit)&&r),r}),null,null)),Jr(512,null,Hl,ql,[gn,mn,Ze,tn]),Qr(2,278528,null,0,Kl,[Hl],{ngClass:[0,"ngClass"]},null),Hi(3,{active:0}),(t()(),Ri(4,0,null,null,0,"img",[["class","avatar"],["onerror","this.src='./assets/images/avatar.svg'"]],[[8,"src",4]],null,null,null,null)),(t()(),Ri(5,0,null,null,7,"div",[["class","user"]],null,null,null,null,null)),(t()(),Ri(6,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),Wi(7,null,[""," ",""])),(t()(),Ri(8,0,null,null,4,"span",[],null,null,null,null,null)),Jr(512,null,Hl,ql,[gn,mn,Ze,tn]),Qr(10,278528,null,0,Kl,[Hl],{ngClass:[0,"ngClass"]},null),Hi(11,{online:0}),(t()(),Wi(12,null,[" "," "])),(t()(),Ii(16777216,null,null,1,null,Vb)),Qr(14,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component,r=t(e,3,0,n.selectedConversation&&n.selectedConversation._id===e.context.$implicit._id);t(e,2,0,r);var s=t(e,11,0,n.isOnline(null==e.context.$implicit.members[0]?null:e.context.$implicit.members[0]._id));t(e,10,0,s),t(e,14,0,n.countNotification(e.context.$implicit._id)>0)}),(function(t,e){var n=e.component;t(e,4,0,n.profilePictures[e.context.index]),t(e,7,0,null==e.context.$implicit.members[0]?null:e.context.$implicit.members[0].firstname,null==e.context.$implicit.members[0]?null:e.context.$implicit.members[0].lastname),t(e,12,0,n.isOnline(null==e.context.$implicit.members[0]?null:e.context.$implicit.members[0]._id)?"Online":"Offline")}))}function Ub(t){return Yi(0,[(t()(),Ri(0,0,null,null,3,"ul",[["class","conversations custom-scroll"]],null,null,null,null,null)),(t()(),Ii(16777216,null,null,2,null,Fb)),Qr(2,278528,null,0,Yl,[Sn,wn,gn],{ngForOf:[0,"ngForOf"]},null),Xr(0,Rb,[])],(function(t,e){var n=e.component;t(e,2,0,Ln(e,2,0,Ur(e,3).transform(n.conversations,n.searchKey)))}),null)}function jb(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"h1",[["class","title"]],null,null,null,null,null)),(t()(),Wi(-1,null,["Chats"])),(t()(),Ri(2,0,null,null,8,"div",[["class","search"]],null,null,null,null,null)),(t()(),Ri(3,0,null,null,5,"input",[["placeholder","Search"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var r=!0,s=t.component;return"input"===e&&(r=!1!==Ur(t,4)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==Ur(t,4).onTouched()&&r),"compositionstart"===e&&(r=!1!==Ur(t,4)._compositionStart()&&r),"compositionend"===e&&(r=!1!==Ur(t,4)._compositionEnd(n.target.value)&&r),"ngModelChange"===e&&(r=!1!==(s.searchKey=n)&&r),r}),null,null)),Qr(4,16384,null,0,Sg,[tn,Ze,[2,xg]],null,null),Jr(1024,null,Cg,(function(t){return[t]}),[Sg]),Qr(6,671744,null,0,_m,[[8,null],[8,null],[8,null],[6,Cg]],{model:[0,"model"]},{update:"ngModelChange"}),Jr(2048,null,Eg,null,[_m]),Qr(8,16384,null,0,Tg,[[4,Eg]],null,null),(t()(),Ri(9,0,null,null,1,":svg:svg",[],null,null,null,null,null)),(t()(),Ri(10,0,null,null,0,":svg:use",[[":xlink:href","assets/images/icons.svg#icon-search"]],null,null,null,null,null)),(t()(),Ii(16777216,null,null,1,null,Ub)),Qr(12,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,6,0,n.searchKey),t(e,12,0,n.conversations.length>0)}),(function(t,e){t(e,3,0,Ur(e,8).ngClassUntouched,Ur(e,8).ngClassTouched,Ur(e,8).ngClassPristine,Ur(e,8).ngClassDirty,Ur(e,8).ngClassValid,Ur(e,8).ngClassInvalid,Ur(e,8).ngClassPending)}))}class Lb{constructor(t,e,n){this.actionSV=t,this.conversationSV=e,this.sessionSV=n,this.name="",this.open=!1}ngOnInit(){this.currentUser=this.sessionSV.data.user,this.subs=[this.watchConversationState()],setTimeout(t=>{this.open=!0},100)}watchConversationState(){return this.conversationSV.conversationState.subscribe(t=>{"[Conversation] Group create finish"===t.action.name&&this.todo("cancel")})}todo(t){"cancel"===t?(this.open=!1,setTimeout(t=>{this.actionSV.dispatch({action:"ADD_GROUP",data:!1})},250)):this.createGroup()}createGroup(){0!==this.name.length&&this.conversationSV.createGroup({createdBy:this.currentUser._id,members:[this.currentUser._id],name:this.name,type:Rm.GROUP,messages:[]}).action()}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe()),this.conversationSV.actionActionReset()}}var $b=$n({encapsulation:0,styles:[[".add-group[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#ececec;color:#333;padding:1rem;-webkit-transition:.25s;transition:all .25s ease}.add-group.hidden[_ngcontent-%COMP%]{top:100%}.add-group[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500}.add-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:0;border-radius:2px;padding:1rem;width:100%;background:#fff;-webkit-transition:.25s;transition:all .25s ease;margin-bottom:1rem}.add-group[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between}.add-group[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:49%;border:none;padding:1rem;border-radius:2px;color:#fff;cursor:pointer;-webkit-transition:.25s;transition:all .25s ease}.add-group[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{background:#3c87d4}.add-group[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child:hover{background:#65a7ea}.add-group[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{background:#ccc;color:#333}.add-group[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child:hover{background:#f9f9f9}"]],data:{}});function Bb(t){return Yi(0,[(t()(),Ri(0,0,null,null,16,"div",[["class","add-group"]],null,null,null,null,null)),Jr(512,null,Hl,ql,[gn,mn,Ze,tn]),Qr(2,278528,null,0,Kl,[Hl],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),Hi(3,{hidden:0}),(t()(),Ri(4,0,null,null,1,"h1",[["class","title"]],null,null,null,null,null)),(t()(),Wi(-1,null,["Create Group"])),(t()(),Ri(6,0,null,null,5,"input",[["placeholder","Group Name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var r=!0,s=t.component;return"input"===e&&(r=!1!==Ur(t,7)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==Ur(t,7).onTouched()&&r),"compositionstart"===e&&(r=!1!==Ur(t,7)._compositionStart()&&r),"compositionend"===e&&(r=!1!==Ur(t,7)._compositionEnd(n.target.value)&&r),"ngModelChange"===e&&(r=!1!==(s.name=n)&&r),r}),null,null)),Qr(7,16384,null,0,Sg,[tn,Ze,[2,xg]],null,null),Jr(1024,null,Cg,(function(t){return[t]}),[Sg]),Qr(9,671744,null,0,_m,[[8,null],[8,null],[8,null],[6,Cg]],{model:[0,"model"]},{update:"ngModelChange"}),Jr(2048,null,Eg,null,[_m]),Qr(11,16384,null,0,Tg,[[4,Eg]],null,null),(t()(),Ri(12,0,null,null,4,"div",[["class","buttons"]],null,null,null,null,null)),(t()(),Ri(13,0,null,null,1,"button",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.todo("save")&&r),r}),null,null)),(t()(),Wi(-1,null,["Save"])),(t()(),Ri(15,0,null,null,1,"button",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.todo("cancel")&&r),r}),null,null)),(t()(),Wi(-1,null,["Cancel"]))],(function(t,e){var n=e.component,r=t(e,3,0,!n.open);t(e,2,0,"add-group",r),t(e,9,0,n.name)}),(function(t,e){t(e,6,0,Ur(e,11).ngClassUntouched,Ur(e,11).ngClassTouched,Ur(e,11).ngClassPristine,Ur(e,11).ngClassDirty,Ur(e,11).ngClassValid,Ur(e,11).ngClassInvalid,Ur(e,11).ngClassPending)}))}class zb{constructor(t,e,n,r,s){this.actionSV=t,this.conversationSV=e,this.sessionSV=n,this.notificationSV=r,this.userSV=s,this.searchKey="",this.isAddGroup=!1,this.conversations=[],this.notifications=[],this.profilePictures=[]}ngOnInit(){this.currentUser=this.sessionSV.data.user,this.subs=[this.watchAction(),this.watchConversationState(),this.watchNotificationState()],this.conversationSV.getConversations({id:this.currentUser._id,type:Rm.GROUP,search:"",pagination:{limit:10,page:0}}).action()}getProfilePictures(){this.profilePictures=[],this.profilePictures=this.conversations.map(t=>t.members.slice(0,4).map(t=>this.userSV.getProfilePicture(t._id)))}openConversationFromNotifaction(){if("NOTIFICATION_OPEN"===this.actionSV.previousValue.action){const t=this.actionSV.previousValue.data.reference,e=this.conversations.filter(e=>e._id===t);e.length>0&&this.selectConversation(e[0])}}watchNotificationState(){return this.notificationSV.notificationState.subscribe(t=>{this.notifications=t.notification.list})}countNotification(t){return this.notifications.filter(e=>e.user===this.currentUser._id&&og.MESSAGE===e.type&&t===e.reference).length}selectConversation(t){this.selectedConversation=t,this.conversationSV.actionSelectConversation(t);const e={userid:this.currentUser._id,reference:t._id};this.notificationSV.actionDeleteByReference(e),this.notificationSV.deleteByReference(e).toPromise()}watchConversationState(){return this.conversationSV.conversationState.subscribe(t=>{switch(t.action.name){case"[Conversation] list load finish":this.conversations=t.conversation.list,this.openConversationFromNotifaction(),this.getProfilePictures(),this.conversations.length>0&&this.selectConversation(this.conversations[0]);break;case"[Conversation] Group create finish":case"[Conversation] list load finish":case"[Conversation] Group Leave finish":case"[Conversation] Group delete finish":case"[Conversation] add member finish":case"[Conversation] Group user remove finish":this.conversations=t.conversation.list,this.getProfilePictures(),this.openConversationFromNotifaction()}})}watchAction(){return this.actionSV.listen.subscribe(t=>{"ADD_GROUP"===t.action&&(this.isAddGroup=t.data)})}addGroup(){this.isAddGroup=!0}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe()),this.conversations=[]}}var Gb=$n({encapsulation:0,styles:[["[_nghost-%COMP%]{-webkit-box-flex:1;flex:1;overflow-y:auto;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column;position:relative;overflow:hidden}.top[_ngcontent-%COMP%]{padding:.5rem 1rem 0;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between}.top[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500;color:#fff}.top[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#fff;width:2.5rem;height:2.5rem;cursor:pointer}.search[_ngcontent-%COMP%]{padding:.5rem 1rem;position:relative}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:0;border-radius:2px;padding:1rem;width:100%;background:rgba(255,255,255,.2);color:#fff;-webkit-transition:.25s;transition:all .25s ease}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:rgba(255,255,255,.5)}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:rgba(255,255,255,.5)}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:rgba(255,255,255,.5)}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:rgba(255,255,255,.5)}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background:rgba(255,255,255,.3)}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus   svg[_ngcontent-%COMP%]{fill:#fff}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + svg[_ngcontent-%COMP%]{fill:#fff;background:#536f8a}.search[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#929292;width:2.5rem;height:2.5rem;position:absolute;right:1.5rem;top:1.1rem;pointer-events:none;background:#3a5979;-webkit-transition:.25s;transition:all .25s ease}.groups[_ngcontent-%COMP%]{overflow-y:auto}.groups[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;padding:.5rem 1rem;position:relative}.groups[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background:#204469}.groups[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#0c1e31}.groups[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid rgba(255,255,255,.05)}.groups[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .members[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;flex-wrap:wrap;width:5rem;height:5rem;margin-right:.25rem}.groups[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .members[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border:2px solid #fff;border-radius:50%}.groups[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .members[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:nth-child(even){margin-left:-5px}.groups[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .members[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:last-child, .groups[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .members[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:nth-child(3){margin-top:-15px}.groups[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .members.size-1[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0;width:3.5rem;height:3.5rem}.groups[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column;color:#fff}.groups[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;font-size:1.5rem;width:19rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.groups[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#558ac1;font-size:1.15rem}.groups[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .notifications[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;color:#fff;border-radius:50%;background:red;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;position:absolute;top:5px;left:7px;font-weight:600;box-shadow:0 0 0 1px rgba(255,255,255,.5);z-index:1}"]],data:{}});function Hb(t){return Yi(0,[(t()(),Ri(0,0,null,null,0,"img",[["alt",""],["class","avatar"],["onerror","this.src='./assets/images/avatar.svg'"]],[[8,"src",4]],null,null,null,null))],null,(function(t,e){t(e,0,0,e.component.profilePictures[e.parent.context.index][e.context.index])}))}function qb(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"span",[["class","notifications"]],null,null,null,null,null)),(t()(),Wi(1,null,["",""]))],null,(function(t,e){t(e,1,0,e.component.countNotification(e.parent.context.$implicit._id))}))}function Wb(t){return Yi(0,[(t()(),Ri(0,0,null,null,16,"li",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.selectConversation(t.context.$implicit)&&r),r}),null,null)),Jr(512,null,Hl,ql,[gn,mn,Ze,tn]),Qr(2,278528,null,0,Kl,[Hl],{ngClass:[0,"ngClass"]},null),Hi(3,{active:0}),(t()(),Ri(4,0,null,null,5,"div",[["class","members"]],null,null,null,null,null)),Jr(512,null,Hl,ql,[gn,mn,Ze,tn]),Qr(6,278528,null,0,Kl,[Hl],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),Hi(7,{"size-1":0}),(t()(),Ii(16777216,null,null,1,null,Hb)),Qr(9,278528,null,0,Yl,[Sn,wn,gn],{ngForOf:[0,"ngForOf"]},null),(t()(),Ri(10,0,null,null,4,"div",[["class","info"]],null,null,null,null,null)),(t()(),Ri(11,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),Wi(12,null,["",""])),(t()(),Ri(13,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),Wi(14,null,[""," member",""])),(t()(),Ii(16777216,null,null,1,null,qb)),Qr(16,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component,r=t(e,3,0,n.selectedConversation&&n.selectedConversation._id===e.context.$implicit._id);t(e,2,0,r);var s=t(e,7,0,1===e.context.$implicit.members.length);t(e,6,0,"members",s);var i=e.context.$implicit.members.slice(0,4);t(e,9,0,i),t(e,16,0,n.countNotification(e.context.$implicit._id)>0)}),(function(t,e){t(e,12,0,e.context.$implicit.name),t(e,14,0,e.context.$implicit.members.length,e.context.$implicit.members.length>1?"s":"")}))}function Kb(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"app-add-group",[],null,null,null,Bb,$b)),Qr(1,245760,null,0,Lb,[gg,ub,ip],null,null)],(function(t,e){t(e,1,0)}),null)}function Zb(t){return Yi(0,[(t()(),Ri(0,0,null,null,4,"div",[["class","top"]],null,null,null,null,null)),(t()(),Ri(1,0,null,null,1,"h1",[["class","title"]],null,null,null,null,null)),(t()(),Wi(-1,null,["Groups"])),(t()(),Ri(3,0,null,null,1,":svg:svg",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.addGroup()&&r),r}),null,null)),(t()(),Ri(4,0,null,null,0,":svg:use",[[":xlink:href","assets/images/icons.svg#icon-add"]],null,null,null,null,null)),(t()(),Ri(5,0,null,null,8,"div",[["class","search"]],null,null,null,null,null)),(t()(),Ri(6,0,null,null,5,"input",[["placeholder","Search"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var r=!0,s=t.component;return"input"===e&&(r=!1!==Ur(t,7)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==Ur(t,7).onTouched()&&r),"compositionstart"===e&&(r=!1!==Ur(t,7)._compositionStart()&&r),"compositionend"===e&&(r=!1!==Ur(t,7)._compositionEnd(n.target.value)&&r),"ngModelChange"===e&&(r=!1!==(s.searchKey=n)&&r),r}),null,null)),Qr(7,16384,null,0,Sg,[tn,Ze,[2,xg]],null,null),Jr(1024,null,Cg,(function(t){return[t]}),[Sg]),Qr(9,671744,null,0,_m,[[8,null],[8,null],[8,null],[6,Cg]],{model:[0,"model"]},{update:"ngModelChange"}),Jr(2048,null,Eg,null,[_m]),Qr(11,16384,null,0,Tg,[[4,Eg]],null,null),(t()(),Ri(12,0,null,null,1,":svg:svg",[],null,null,null,null,null)),(t()(),Ri(13,0,null,null,0,":svg:use",[[":xlink:href","assets/images/icons.svg#icon-search"]],null,null,null,null,null)),(t()(),Ri(14,0,null,null,3,"ul",[["class","groups custom-scroll"]],null,null,null,null,null)),(t()(),Ii(16777216,null,null,2,null,Wb)),Qr(16,278528,null,0,Yl,[Sn,wn,gn],{ngForOf:[0,"ngForOf"]},null),Xr(0,Rb,[]),(t()(),Ii(16777216,null,null,1,null,Kb)),Qr(19,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,9,0,n.searchKey),t(e,16,0,Ln(e,16,0,Ur(e,17).transform(n.conversations,n.searchKey))),t(e,19,0,n.isAddGroup)}),(function(t,e){t(e,6,0,Ur(e,11).ngClassUntouched,Ur(e,11).ngClassTouched,Ur(e,11).ngClassPristine,Ur(e,11).ngClassDirty,Ur(e,11).ngClassValid,Ur(e,11).ngClassInvalid,Ur(e,11).ngClassPending)}))}class Yb{constructor(t,e,n){this.notifSV=t,this.sessionSV=e,this.actionSV=n,this.subs=[],this.notifications=[],this.consolidated=[],this.allNotifs=[]}ngOnInit(){this.currentUser=this.sessionSV.data.user,this.subs=[this.watchNotificationState()],this.notifSV.actionSeenNotifications(this.currentUser._id),this.notifSV.seenNotifications(this.currentUser._id).toPromise()}watchNotificationState(){return this.notifSV.notificationState.subscribe(t=>{this.allNotifs=t.notification.list,this.notifications=this.consolidateNotifications(t.notification.list)})}consolidateNotifications(t){return this.consolidated=[],t.forEach(t=>{0===this.consolidatedNotifications(t,this.consolidated).length&&(this.consolidated=[...this.consolidated,t])}),this.consolidated}countConsolidatedNotifs(t){return this.consolidatedNotifications(t,this.allNotifs).length}consolidatedNotifications(t,e){return e.filter(e=>e.message===t.message&&e.reference===t.reference)}open(t){this.actionSV.dispatch({action:"NOTIFICATION_OPEN",data:t})}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe()),this.notifSV.actionSeenNotifications(this.currentUser._id),this.sessionSV.data&&this.notifSV.seenNotifications(this.currentUser._id).toPromise()}}var Qb=$n({encapsulation:0,styles:[["[_nghost-%COMP%]{-webkit-box-flex:1;flex:1;overflow-y:auto;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column}.title[_ngcontent-%COMP%]{padding:.5rem 1rem 0;font-size:1.5rem;font-weight:500;color:#fff}ul[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1;overflow-y:auto}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:-webkit-box;display:flex;color:#fff;padding:1rem;cursor:pointer;position:relative;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid rgba(255,255,255,.05)}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#0c1e31}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column;-webkit-box-pack:center;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1.25rem}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:4rem;height:4rem;margin-right:1rem}"]],data:{}});function Xb(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),Wi(1,null,[" ( "," ) "]))],null,(function(t,e){t(e,1,0,e.component.countConsolidatedNotifs(e.parent.context.$implicit))}))}function Jb(t){return Yi(0,[(t()(),Ri(0,0,null,null,9,"li",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.open(t.context.$implicit)&&r),r}),null,null)),(t()(),Ri(1,0,null,null,0,"img",[["alt",""],["src","./assets/images/avatar.svg"]],null,null,null,null,null)),(t()(),Ri(2,0,null,null,7,"div",[["class","info"]],null,null,null,null,null)),(t()(),Ri(3,0,null,null,3,"label",[],null,null,null,null,null)),(t()(),Ii(16777216,null,null,1,null,Xb)),Qr(5,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Wi(6,null,[" "," "])),(t()(),Ri(7,0,null,null,2,"span",[],null,null,null,null,null)),(t()(),Wi(8,null,["",""])),Gi(9,2)],(function(t,e){t(e,5,0,e.component.countConsolidatedNotifs(e.context.$implicit)>1)}),(function(t,e){t(e,6,0,e.context.$implicit.message);var n=Ln(e,8,0,t(e,9,0,Ur(e.parent,0),e.context.$implicit.createdDate,"MM/dd/yy hh:mm a"));t(e,8,0,n)}))}function tv(t){return Yi(0,[Xr(0,aa,[Is]),(t()(),Ri(1,0,null,null,1,"h1",[["class","title"]],null,null,null,null,null)),(t()(),Wi(2,null,["Notifications ( "," ) "])),(t()(),Ri(3,0,null,null,2,"ul",[["class","custom-scroll"]],null,null,null,null,null)),(t()(),Ii(16777216,null,null,1,null,Jb)),Qr(5,278528,null,0,Yl,[Sn,wn,gn],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,5,0,e.component.notifications)}),(function(t,e){t(e,2,0,e.component.notifications.length)}))}class ev{constructor(t,e,n,r,s){this.actionSV=t,this.sessionSV=e,this.router=n,this.userSV=r,this.websocketSV=s,this.subs=[],this.showAction=!1,this.actions=[{label:"Profile",value:"PROFILE",icon:"profile"},{label:"Friends",value:"FRIENDS",icon:"users"},{label:"Logout",value:"LOGOUT",icon:"off"}]}ngOnInit(){this.currentUser=this.sessionSV.data.user,this.subs=[this.watchAction(),this.watchOnlineUsers()],this.profilePicture=this.userSV.getProfilePicture(this.currentUser._id)}watchOnlineUsers(){return this.userSV.friendState.subscribe(t=>{this.onlineUsers=t.users.onlines})}watchAction(){return this.actionSV.listen.subscribe(t=>{switch(t.action){case"NOTIFICATION_OPEN":t.data.type===og.FRIEND_REQUEST&&this.action("FRIENDS");break;case"PROFILE_PICTURE_UPDATE":this.profilePicture=this.userSV.getProfilePicture(this.currentUser._id)}})}action(t){switch(t){case"LOGOUT":this.websocketLogout(),this.sessionSV.logout(),this.router.navigate([""]);break;case"FRIENDS":this.actionSV.dispatch({action:"FRIENDS_SHOW",data:{value:!0}})}}websocketLogout(){this.onlineUsers.forEach(t=>{alert(t),this.websocketSV.dispatch({id:t._id,type:Im.OO_ONLINE_AKO,data:{user:this.currentUser,online:!1}})})}updateProfilePicture(){this.actionSV.dispatch({action:"SHOW_UPDATE_PROFILE_PICTURE",data:!0})}hideAction(){setTimeout(t=>{this.showAction=!1},200)}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe())}}var nv=$n({encapsulation:0,styles:[["[_nghost-%COMP%]{height:10rem;background:#12385f;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;padding:1rem;position:relative}.avatar[_ngcontent-%COMP%]{width:6rem;height:6rem;position:relative;cursor:pointer;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;border-radius:50%;overflow:hidden;background:#333;border:2px solid #fff}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .avatar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{-webkit-transition:.25s;transition:all .25s ease}.avatar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:0;display:none;fill:#fff;width:2rem;height:2rem;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.avatar[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{opacity:.3}.avatar[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{display:block;opacity:1}.user[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1;padding:0 .5rem}.user[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:500;line-height:1;font-size:1.5rem;color:#fff}.user[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1.2rem;color:#b9b9b9;text-decoration:underline}.action[_ngcontent-%COMP%]{position:relative}.action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:0 0;border:0;cursor:pointer}.action[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;fill:#fff}.action[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;position:absolute;right:0;top:100%;background:#fff;border-radius:3px;overflow:hidden;z-index:1}.action[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.75rem 1rem;cursor:pointer;font-size:1.15rem;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;color:#797979;font-weight:500}.action[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#dcdcdc}.action[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#656565;width:2rem;height:2rem;margin-right:.5rem}"]],data:{}});function rv(t){return Yi(0,[(t()(),Ri(0,0,null,null,0,"img",[["alt",""],["onerror","this.src='./assets/images/avatar.svg'"]],[[8,"src",4]],null,null,null,null))],null,(function(t,e){t(e,0,0,e.component.profilePicture)}))}function sv(t){return Yi(0,[(t()(),Ri(0,0,null,null,3,"li",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.action(t.context.$implicit.value)&&r),r}),null,null)),(t()(),Ri(1,0,null,null,1,":svg:svg",[],null,null,null,null,null)),(t()(),Ri(2,0,null,null,0,":svg:use",[],[[1,":xlink:href",0]],null,null,null,null)),(t()(),Wi(3,null,[" "," "]))],null,(function(t,e){t(e,2,0,"assets/images/icons.svg#icon-"+e.context.$implicit.icon),t(e,3,0,e.context.$implicit.label)}))}function iv(t){return Yi(0,[(t()(),Ri(0,0,null,null,2,"ul",[],null,null,null,null,null)),(t()(),Ii(16777216,null,null,1,null,sv)),Qr(2,278528,null,0,Yl,[Sn,wn,gn],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,2,0,e.component.actions)}),null)}function ov(t){return Yi(0,[(t()(),Ri(0,0,null,null,4,"div",[["class","avatar"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.updateProfilePicture()&&r),r}),null,null)),(t()(),Ii(16777216,null,null,1,null,rv)),Qr(2,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Ri(3,0,null,null,1,":svg:svg",[],null,null,null,null,null)),(t()(),Ri(4,0,null,null,0,":svg:use",[[":xlink:href","assets/images/icons.svg#icon-edit"]],null,null,null,null,null)),(t()(),Ri(5,0,null,null,4,"div",[["class","user"]],null,null,null,null,null)),(t()(),Ri(6,0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),Wi(7,null,[""," ",""])),(t()(),Ri(8,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),Wi(9,null,["",""])),(t()(),Ri(10,0,null,null,5,"div",[["class","action"]],null,null,null,null,null)),(t()(),Ri(11,0,null,null,2,"button",[],null,[[null,"blur"],[null,"click"]],(function(t,e,n){var r=!0,s=t.component;return"blur"===e&&(r=!1!==s.hideAction()&&r),"click"===e&&(r=0!=(s.showAction=!0)&&r),r}),null,null)),(t()(),Ri(12,0,null,null,1,":svg:svg",[],null,null,null,null,null)),(t()(),Ri(13,0,null,null,0,":svg:use",[[":xlink:href","assets/images/icons.svg#icon-more_vert"]],null,null,null,null,null)),(t()(),Ii(16777216,null,null,1,null,iv)),Qr(15,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,n.updateProfilePicture),t(e,15,0,n.showAction)}),(function(t,e){var n=e.component;t(e,7,0,n.currentUser.firstname,n.currentUser.lastname),t(e,9,0,n.currentUser.email)}))}class lv{constructor(t,e,n,r,s){this.notificationSV=t,this.sessionSV=e,this.actionSV=n,this.conversationSV=r,this.websocketSV=s,this.subs=[],this.webSocketSubs=[],this.conversations=[],this.totalNotifs=0,this.tabs=[{id:"messages",icon:"message",count:0},{id:"groups",icon:"grouppeople",count:0},{id:"notifications",icon:"notifications",count:0}]}ngOnInit(){this.currentUser=this.sessionSV.data.user,this.subs=[this.watchnotificationState(),this.watchConversationState(),this.watchAction()],this.notificationSV.getList(this.currentUser._id).action(),this.selectTab(this.tabs[0])}watchAction(){return this.actionSV.listen.subscribe(t=>{if("NOTIFICATION_OPEN"===t.action&&(t.data.type===og.MESSAGE||t.data.type===og.FRIEND_REQUEST_ACCEPT||t.data.type===og.GROUP_MEMBER_ADD)){const e=t.data.message.indexOf("Group")>=0?1:0;this.selectTab(this.tabs[e])}})}watchConversationState(){return this.conversationSV.conversationState.subscribe(t=>{switch(t.action.name){case"[Conversation] list load finish":this.conversations=t.conversation.list,this.watchWebSocket();break;case"[Conversation] SELECT":this.selectedConversation=t.conversation.selected}})}watchWebSocket(){this.webSocketSubs.forEach(t=>t.unsubscribe()),this.webSocketSubs=[this.websocketSV.listen(Im.FRIEND_REQUEST,this.currentUser._id).subscribe(t=>this.notificationSV.actionUpdateNotification(t)),this.websocketSV.listen(Im.FRIEND_REQUEST_ACCEPT,this.currentUser._id).subscribe(t=>this.notificationSV.actionUpdateNotification(t)),this.websocketSV.listen(Im.GROUP_MEMBER_ADD,this.currentUser._id).subscribe(t=>this.notificationSV.actionUpdateNotification(t))],this.listenToMessageLiveNotification()}listenToMessageLiveNotification(){this.webSocketSubs.push(this.websocketSV.listen(Im.MESSAGE,this.currentUser._id).subscribe(t=>{if(!this.selectedConversation||this.selectedConversation._id!==t.conversation._id){const e=t.conversation.type===Rm.PERSONAL?"New message from":"New Group message from",n={_id:(new Date).getTime().toString(),user:this.currentUser._id,type:og.MESSAGE,reference:t.conversation._id,message:`${e} ${t.message.from.firstname}`,createdDate:t.message.date};this.notificationSV.actionUpdateNotification(n)}}))}watchnotificationState(){return this.notificationSV.notificationState.subscribe(t=>{this.tabs[2].count=t.notification.list.filter(t=>!t.seen).length})}selectTab(t){this.activeTab=t,this.selectTabAction()}selectTabAction(){this.actionSV.dispatch({action:"TAB_SELECT",data:this.activeTab})}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe()),this.webSocketSubs.forEach(t=>t.unsubscribe()),this.conversationSV.actionActionReset()}}var av=$n({encapsulation:0,styles:[["[_nghost-%COMP%]{background:#2b5784}ul[_ngcontent-%COMP%]{display:-webkit-box;display:flex;list-style:none}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1;padding:1rem;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;cursor:pointer;position:relative}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child){border-right:1px solid #254c73}ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background:#1d3f61}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#274e75}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;fill:#fff}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{width:2.25rem;height:2.25rem;color:#fff;border-radius:50%;background:red;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;position:absolute;top:-12px;right:15px;font-weight:600;box-shadow:0 0 0 1px rgba(255,255,255,.5)}"]],data:{}});function cv(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"span",[["class","count"]],null,null,null,null,null)),(t()(),Wi(1,null,["",""]))],null,(function(t,e){t(e,1,0,e.parent.context.$implicit.count)}))}function uv(t){return Yi(0,[(t()(),Ri(0,0,null,null,7,"li",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.selectTab(t.context.$implicit)&&r),r}),null,null)),Jr(512,null,Hl,ql,[gn,mn,Ze,tn]),Qr(2,278528,null,0,Kl,[Hl],{ngClass:[0,"ngClass"]},null),Hi(3,{active:0}),(t()(),Ii(16777216,null,null,1,null,cv)),Qr(5,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Ri(6,0,null,null,1,":svg:svg",[],null,null,null,null,null)),(t()(),Ri(7,0,null,null,0,":svg:use",[],[[1,":xlink:href",0]],null,null,null,null))],(function(t,e){var n=e.component,r=t(e,3,0,n.activeTab&&n.activeTab.id===e.context.$implicit.id);t(e,2,0,r),t(e,5,0,e.context.$implicit.count>0)}),(function(t,e){t(e,7,0,"assets/images/icons.svg#icon-"+e.context.$implicit.icon)}))}function hv(t){return Yi(0,[(t()(),Ri(0,0,null,null,2,"ul",[],null,null,null,null,null)),(t()(),Ii(16777216,null,null,1,null,uv)),Qr(2,278528,null,0,Yl,[Sn,wn,gn],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,2,0,e.component.tabs)}),null)}class dv{constructor(t,e,n){this.element=t,this.renderer=e,this.action=n,this.open=!1,this.activeTabID=""}ngOnInit(){this.action.listen.subscribe(t=>{switch(t.action){case"MENU_SHOW":this.toggle();break;case"TAB_SELECT":setTimeout(()=>{this.activeTabID=t.data.id})}})}toggle(){this.open=!this.open,this.open?this.renderer.addClass(this.element.nativeElement,"closed"):this.renderer.removeClass(this.element.nativeElement,"closed")}}var pv=$n({encapsulation:0,styles:[["[_nghost-%COMP%]{width:28rem;background:#093058;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column;z-index:1;-webkit-transition:.5s ease-in-out;transition:all .5s ease-in-out}@media (max-width:750px){[_nghost-%COMP%]{position:absolute;height:100vh;top:0;box-shadow:20px 0 30px 0 #fff;z-index:3}[_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%]{display:block}.closed[_nghost-%COMP%]{-webkit-transform:translateX(-35rem);transform:translateX(-35rem);box-shadow:none}.closed[_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%]{-webkit-transform:rotate(0);transform:rotate(0)}}.close-btn[_ngcontent-%COMP%]{position:absolute;top:28px;right:-28px;background:0 0;fill:#505050;width:2.75rem;height:2.75rem;-webkit-transition:.5s ease-in-out;transition:all .5s ease-in-out;display:none;cursor:pointer;-webkit-transform:rotate(180deg);transform:rotate(180deg)}"]],data:{}});function fv(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"app-conversations",[],null,null,null,jb,Db)),Qr(1,245760,null,0,Nb,[ub,ip,fg,gg,Qf,_b],null,null)],(function(t,e){t(e,1,0)}),null)}function gv(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"app-groups",[],null,null,null,Zb,Gb)),Qr(1,245760,null,0,zb,[gg,ub,ip,fg,Qf],null,null)],(function(t,e){t(e,1,0)}),null)}function mv(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"app-notifications",[],null,null,null,tv,Qb)),Qr(1,245760,null,0,Yb,[fg,ip,gg],null,null)],(function(t,e){t(e,1,0)}),null)}function bv(t){return Yi(0,[(t()(),Ri(0,0,null,null,7,null,null,null,null,null,null,null)),Qr(1,16384,null,0,na,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),Ii(16777216,null,null,1,null,fv)),Qr(3,278528,null,0,ra,[Sn,wn,na],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),Ii(16777216,null,null,1,null,gv)),Qr(5,278528,null,0,ra,[Sn,wn,na],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),Ii(16777216,null,null,1,null,mv)),Qr(7,278528,null,0,ra,[Sn,wn,na],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),Ii(0,null,null,0))],(function(t,e){t(e,1,0,e.component.activeTabID),t(e,3,0,"messages"),t(e,5,0,"groups"),t(e,7,0,"notifications")}),null)}function vv(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"app-profile",[],null,null,null,ov,nv)),Qr(1,245760,null,0,ev,[gg,ip,Md,Qf,_b],null,null),(t()(),Ii(16777216,null,null,1,null,bv)),Qr(3,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Ri(4,0,null,null,1,"app-tab",[],null,null,null,hv,av)),Qr(5,245760,null,0,lv,[fg,ip,gg,ub,_b],null,null),(t()(),Ri(6,0,null,null,1,":svg:svg",[["class","close-btn"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.toggle()&&r),r}),null,null)),(t()(),Ri(7,0,null,null,0,":svg:use",[[":xlink:href","assets/images/icons.svg#icon-clearclose"]],null,null,null,null,null))],(function(t,e){var n=e.component;t(e,1,0),t(e,3,0,n.activeTabID),t(e,5,0)}),null)}class yv{constructor(t,e,n,r,s,i){this.userSV=t,this.sessionSV=e,this.conversationSV=n,this.actionSV=r,this.notifSV=s,this.websocketSV=i,this.subs=[],this.friends=[],this.searchKey="",this.members=[],this.profilePictures=[]}ngOnInit(){this.currentUser=this.sessionSV.data.user,this.subs=[this.watchFriendState(),this.watchConversationState()],this.userSV.stateGetFriends({id:this.currentUser._id,pagination:{page:0,limit:10},type:ig.FRIENDS,search:""})}getProfilePictures(){this.profilePictures=this.friends.map(t=>this.userSV.getProfilePicture(t._id))}add(t){this.lastAddedUser=t,this.conversationSV.addMember({conversation:this.selectedConversation._id,user:t}).action()}watchConversationState(){return this.conversationSV.conversationState.subscribe(t=>{this.selectedConversation=t.conversation.selected,this.members=t.conversation.selected.members,"[Conversation] add member finish"===t.action.name&&this.sendAddMemberNotification()})}sendAddMemberNotification(){const t={reference:this.selectedConversation._id,type:og.GROUP_MEMBER_ADD,user:this.lastAddedUser._id,message:this.currentUser.firstname+` added you in ${this.selectedConversation.name} Chat Group`};this.notifSV.create(t).toPromise(),this.websocketSV.dispatch({id:this.lastAddedUser._id,type:Im.GROUP_MEMBER_ADD,data:Object.assign({},t,{createdDate:new Date,seen:!1})})}watchFriendState(){return this.userSV.friendState.subscribe(t=>{"[Friend] load user list finish"===t.action.name&&(this.friendState=t,this.searchKey=t.users.search,this.friends=t.users.list,this.getProfilePictures())})}isMember(t){return!!this.selectedConversation&&this.members.filter(e=>e._id===t).length>0}iSearch(){this.searhTimer&&clearTimeout(this.searhTimer),this.searhTimer=setTimeout(t=>{const e={id:this.currentUser._id,type:this.friendState.users.type,pagination:Object.assign({},this.friendState.users.pagination,{page:0}),search:this.searchKey};this.userSV.stateGetFriends(e)},1e3)}close(){this.actionSV.dispatch({action:"ADD_MEMBER",data:!1})}pageChanged(t){this.userSV.stateGetFriends({id:this.currentUser._id,type:this.friendState.users.type,pagination:this.friendState.users.pagination,search:this.friendState.users.search})}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe())}}var _v=$n({encapsulation:0,styles:[["[_nghost-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);z-index:1}.content[_ngcontent-%COMP%]{width:95%;max-width:50rem;background:#fff;margin:5rem auto auto;border-radius:2px;position:relative}.content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding:1rem;color:#333;font-size:1.5rem;font-weight:600}.content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:-30px;right:-5px;fill:#fff;width:3rem;height:3rem;cursor:pointer}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{padding:0 1rem 1rem;position:relative}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:2px;padding:1rem;width:100%;background:#eee;border:1px solid #ddd;-webkit-transition:.25s;transition:all .25s ease}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#c1c1c1}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#c1c1c1}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:#c1c1c1}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#c1c1c1}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#929292;width:2.5rem;height:2.5rem;position:absolute;right:1.5rem;top:.75rem;pointer-events:none;-webkit-transition:.25s;transition:all .25s ease}.content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{padding:0 1rem;max-height:calc(100vh - 20rem);overflow-y:auto}.content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;padding:1rem;border-bottom:1px dotted #ddd}.content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:4rem;height:4rem;margin-right:.5rem;border-radius:50%}.content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1.25rem}.content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{margin-left:auto}.content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem;border:none;background:#2b5784;cursor:pointer;border-radius:3px;color:#fff;font-size:1.1rem;margin-left:.5rem}.pagination[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end}"]],data:{}});function Cv(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.add(t.parent.context.$implicit)&&r),r}),null,null)),(t()(),Wi(-1,null,["Add"]))],null,null)}function wv(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),Wi(-1,null,["Added"]))],null,null)}function xv(t){return Yi(0,[(t()(),Ri(0,0,null,null,8,"li",[],null,null,null,null,null)),(t()(),Ri(1,0,null,null,0,"img",[["alt",""],["class","avatar"],["onerror","this.src='./assets/images/avatar.svg'"]],[[8,"src",4]],null,null,null,null)),(t()(),Ri(2,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),Wi(3,null,[""," ",""])),(t()(),Ri(4,0,null,null,4,"div",[["class","action"]],null,null,null,null,null)),(t()(),Ii(16777216,null,null,1,null,Cv)),Qr(6,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Ii(16777216,null,null,1,null,wv)),Qr(8,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,6,0,!n.isMember(e.context.$implicit._id)),t(e,8,0,n.isMember(e.context.$implicit._id))}),(function(t,e){t(e,1,0,e.component.profilePictures[e.context.index]),t(e,3,0,e.context.$implicit.firstname,e.context.$implicit.lastname)}))}function Sv(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"li",[],null,null,null,null,null)),(t()(),Wi(-1,null,[" No Results found! "]))],null,null)}function Ov(t){return Yi(0,[(t()(),Ri(0,0,null,null,4,"ul",[["class","list custom-scroll"]],null,null,null,null,null)),(t()(),Ii(16777216,null,null,1,null,xv)),Qr(2,278528,null,0,Yl,[Sn,wn,gn],{ngForOf:[0,"ngForOf"]},null),(t()(),Ii(16777216,null,null,1,null,Sv)),Qr(4,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,n.friends),t(e,4,0,0===n.friends.length)}),null)}function kv(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"app-pagination",[],null,[[null,"pageChanged"]],(function(t,e,n){var r=!0;return"pageChanged"===e&&(r=!1!==t.component.pageChanged(n)&&r),r}),sg,rg)),Qr(1,114688,null,0,ng,[],{options:[0,"options"]},{pageChanged:"pageChanged"})],(function(t,e){var n=e.component;t(e,1,0,null==n.friendState?null:n.friendState.users.pagination)}),null)}function Pv(t){return Yi(0,[(t()(),Ri(0,0,null,null,18,"div",[["class","content"]],null,null,null,null,null)),(t()(),Ri(1,0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),Wi(-1,null,["Add Member"])),(t()(),Ri(3,0,null,null,1,":svg:svg",[["class","close"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.close()&&r),r}),null,null)),(t()(),Ri(4,0,null,null,0,":svg:use",[[":xlink:href","assets/images/icons.svg#icon-clearclose"]],null,null,null,null,null)),(t()(),Ri(5,0,null,null,8,"div",[["class","search"]],null,null,null,null,null)),(t()(),Ri(6,0,null,null,5,"input",[["placeholder","Search"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var r=!0,s=t.component;return"input"===e&&(r=!1!==Ur(t,7)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==Ur(t,7).onTouched()&&r),"compositionstart"===e&&(r=!1!==Ur(t,7)._compositionStart()&&r),"compositionend"===e&&(r=!1!==Ur(t,7)._compositionEnd(n.target.value)&&r),"keyup"===e&&(r=!1!==s.iSearch()&&r),"ngModelChange"===e&&(r=!1!==(s.searchKey=n)&&r),r}),null,null)),Qr(7,16384,null,0,Sg,[tn,Ze,[2,xg]],null,null),Jr(1024,null,Cg,(function(t){return[t]}),[Sg]),Qr(9,671744,null,0,_m,[[8,null],[8,null],[8,null],[6,Cg]],{model:[0,"model"]},{update:"ngModelChange"}),Jr(2048,null,Eg,null,[_m]),Qr(11,16384,null,0,Tg,[[4,Eg]],null,null),(t()(),Ri(12,0,null,null,1,":svg:svg",[],null,null,null,null,null)),(t()(),Ri(13,0,null,null,0,":svg:use",[[":xlink:href","assets/images/icons.svg#icon-search"]],null,null,null,null,null)),(t()(),Ii(16777216,null,null,1,null,Ov)),Qr(15,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Ri(16,0,null,null,2,"div",[["class","pagination"]],null,null,null,null,null)),(t()(),Ii(16777216,null,null,1,null,kv)),Qr(18,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,9,0,n.searchKey),t(e,15,0,n.friendState),t(e,18,0,(null==n.friendState?null:n.friendState.users.pagination.total)>0)}),(function(t,e){t(e,6,0,Ur(e,11).ngClassUntouched,Ur(e,11).ngClassTouched,Ur(e,11).ngClassPristine,Ur(e,11).ngClassDirty,Ur(e,11).ngClassValid,Ur(e,11).ngClassInvalid,Ur(e,11).ngClassPending)}))}class Ev{transform(t,e){return e?t.filter(t=>{const n=`${t.firstname} ${t.lastname}`.toLowerCase(),r=e.toLowerCase();return-1!==n.indexOf(r)}):t}}class Mv{constructor(t,e,n,r,s){this.conversationSV=t,this.actionSV=e,this.sessionSV=n,this.alertSV=r,this.userSV=s,this.subs=[],this.members=[],this.searchKey="",this.isAdmin=!1,this.profilePictures=[],this.onlineUsers=[]}ngOnInit(){this.currentUser=this.sessionSV.data.user,this.subs=[this.watchConversationState(),this.watchOnlineUsers()]}getProfilePictures(){this.profilePictures=this.members.map(t=>this.userSV.getProfilePicture(t._id))}isOnline(t){return this.onlineUsers.filter(e=>e._id===t).length>0}watchOnlineUsers(){return this.userSV.friendState.subscribe(t=>{this.onlineUsers=t.users.onlines})}watchConversationState(){return this.conversationSV.conversationState.subscribe(t=>{this.selectedConversation=t.conversation.selected,this.members=this.selectedConversation.members,this.isAdmin=this.currentUser._id===this.selectedConversation.createdBy,this.getProfilePictures()})}close(){this.actionSV.dispatch({action:"SHOW_MEMBERS",data:!1})}remove(t){this.alertSV.confirm("Are you sure?",["Yes","No"],`Remove ${t.firstname}?`).then(e=>{0===e&&this.conversationSV.removeUserOnGroup({user:t._id,conversation:this.selectedConversation._id}).action()})}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe())}}var Tv=$n({encapsulation:0,styles:[["[_nghost-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);z-index:1}.content[_ngcontent-%COMP%]{width:95%;max-width:50rem;background:#fff;margin:5rem auto auto;border-radius:2px;position:relative}.content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding:1rem;color:#333;font-size:1.5rem;font-weight:600;text-transform:capitalize}.content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:-30px;right:-5px;fill:#fff;width:3rem;height:3rem;cursor:pointer}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{padding:0 1rem 1rem;position:relative}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:2px;padding:1rem;width:100%;background:#eee;border:1px solid #ddd;-webkit-transition:.25s;transition:all .25s ease}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#c1c1c1}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#c1c1c1}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:#c1c1c1}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#c1c1c1}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#929292;width:2.5rem;height:2.5rem;position:absolute;right:1.5rem;top:.75rem;pointer-events:none;-webkit-transition:.25s;transition:all .25s ease}.content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{padding:0 1rem;max-height:calc(100vh - 20rem);overflow-y:auto}.content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;padding:1rem;border-bottom:1px dotted #ddd}.content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:4rem;height:4rem;margin-right:.5rem;border-radius:50%}.content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1.25rem}.content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .admin[_ngcontent-%COMP%]{color:#8c8c8c;font-style:italic;font-size:1.1rem}.content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{margin-left:auto}.content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{font-weight:600;text-transform:uppercase;color:#848484;letter-spacing:2px}.content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   .status.online[_ngcontent-%COMP%]{color:#46e246}.content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem;border:none;background:#2b5784;cursor:pointer;border-radius:3px;color:#fff;font-size:1.1rem;margin-left:.5rem}"]],data:{}});function Av(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"span",[["class","admin"]],null,null,null,null,null)),(t()(),Wi(-1,null,[" ( admin ) "]))],null,null)}function Iv(t){return Yi(0,[(t()(),Ri(0,0,null,null,7,"div",[["class","action"]],null,null,null,null,null)),(t()(),Ri(1,0,null,null,4,"span",[["class","status"]],null,null,null,null,null)),Jr(512,null,Hl,ql,[gn,mn,Ze,tn]),Qr(3,278528,null,0,Kl,[Hl],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),Hi(4,{online:0}),(t()(),Wi(5,null,["[ "," ]"])),(t()(),Ri(6,0,null,null,1,"button",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.remove(t.parent.context.$implicit)&&r),r}),null,null)),(t()(),Wi(-1,null,["Remove"]))],(function(t,e){var n=t(e,4,0,e.component.isOnline(e.parent.context.$implicit._id));t(e,3,0,"status",n)}),(function(t,e){t(e,5,0,e.component.isOnline(e.parent.context.$implicit._id)?"Online":"Offline")}))}function Rv(t){return Yi(0,[(t()(),Ri(0,0,null,null,7,"li",[],null,null,null,null,null)),(t()(),Ri(1,0,null,null,0,"img",[["class","avatar"],["onerror","this.src='./assets/images/avatar.svg'"]],[[8,"src",4]],null,null,null,null)),(t()(),Ri(2,0,null,null,3,"label",[],null,null,null,null,null)),(t()(),Wi(3,null,[" "," "])),(t()(),Ii(16777216,null,null,1,null,Av)),Qr(5,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Ii(16777216,null,null,1,null,Iv)),Qr(7,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,5,0,n.selectedConversation.createdBy.toString()===e.context.$implicit._id),t(e,7,0,n.isAdmin&&n.currentUser._id!==e.context.$implicit._id)}),(function(t,e){var n=e.component;t(e,1,0,n.profilePictures[e.context.index]),t(e,3,0,n.currentUser._id===e.context.$implicit._id?"You":e.context.$implicit.firstname+" "+e.context.$implicit.lastname)}))}function Nv(t){return Yi(0,[(t()(),Ri(0,0,null,null,3,"ul",[["class","list custom-scroll"]],null,null,null,null,null)),(t()(),Ii(16777216,null,null,2,null,Rv)),Qr(2,278528,null,0,Yl,[Sn,wn,gn],{ngForOf:[0,"ngForOf"]},null),Xr(0,Ev,[])],(function(t,e){var n=e.component;t(e,2,0,Ln(e,2,0,Ur(e,3).transform(n.members,n.searchKey)))}),null)}function Dv(t){return Yi(0,[(t()(),Ri(0,0,null,null,15,"div",[["class","content"]],null,null,null,null,null)),(t()(),Ri(1,0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),Wi(2,null,[""," Members"])),(t()(),Ri(3,0,null,null,1,":svg:svg",[["class","close"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.close()&&r),r}),null,null)),(t()(),Ri(4,0,null,null,0,":svg:use",[[":xlink:href","assets/images/icons.svg#icon-clearclose"]],null,null,null,null,null)),(t()(),Ri(5,0,null,null,8,"div",[["class","search"]],null,null,null,null,null)),(t()(),Ri(6,0,null,null,5,"input",[["placeholder","Search"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var r=!0,s=t.component;return"input"===e&&(r=!1!==Ur(t,7)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==Ur(t,7).onTouched()&&r),"compositionstart"===e&&(r=!1!==Ur(t,7)._compositionStart()&&r),"compositionend"===e&&(r=!1!==Ur(t,7)._compositionEnd(n.target.value)&&r),"ngModelChange"===e&&(r=!1!==(s.searchKey=n)&&r),r}),null,null)),Qr(7,16384,null,0,Sg,[tn,Ze,[2,xg]],null,null),Jr(1024,null,Cg,(function(t){return[t]}),[Sg]),Qr(9,671744,null,0,_m,[[8,null],[8,null],[8,null],[6,Cg]],{model:[0,"model"]},{update:"ngModelChange"}),Jr(2048,null,Eg,null,[_m]),Qr(11,16384,null,0,Tg,[[4,Eg]],null,null),(t()(),Ri(12,0,null,null,1,":svg:svg",[],null,null,null,null,null)),(t()(),Ri(13,0,null,null,0,":svg:use",[[":xlink:href","assets/images/icons.svg#icon-search"]],null,null,null,null,null)),(t()(),Ii(16777216,null,null,1,null,Nv)),Qr(15,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,9,0,n.searchKey),t(e,15,0,n.members)}),(function(t,e){t(e,2,0,e.component.selectedConversation.name),t(e,6,0,Ur(e,11).ngClassUntouched,Ur(e,11).ngClassTouched,Ur(e,11).ngClassPristine,Ur(e,11).ngClassDirty,Ur(e,11).ngClassValid,Ur(e,11).ngClassInvalid,Ur(e,11).ngClassPending)}))}class Vv{constructor(t,e,n,r,s){this.alertSV=t,this.actionSV=e,this.userSV=n,this.sessionSV=r,this.uploadSV=s,this.valid=!1}ngOnInit(){this.currentUser=this.sessionSV.data.user,this.imgURL=this.userSV.getProfilePicture(this.currentUser._id)}close(){this.actionSV.dispatch({action:"SHOW_UPDATE_PROFILE_PICTURE",data:!1})}onFileChanged(t){return db(this,void 0,void 0,(function*(){if(t.target.files){if(this.selectedFile=t.target.files[0],!this.isValid(this.selectedFile))return this.imgURL=null,void(this.valid=!1);this.imgURL=yield this.uploadSV.previewData(t.target.files),this.valid=!0}}))}isValid(t){const e=this.uploadSV.isValidFile(t);return!!e.valid||(this.alertSV.error(e.message),!1)}upload(){this.valid&&this.uploadSV.upload({id:this.currentUser._id,file:this.selectedFile}).subscribe(t=>{this.actionSV.dispatch({action:"PROFILE_PICTURE_UPDATE"}),this.close()})}}let Fv=(()=>{class t{constructor(t){this.http=t}isValidFile(t){if(null==t.type.match(/image\/*/))return{valid:!1,message:"Invalid file type"};const e=this.formatBytes(t.size),n=parseFloat(e.split(" ")[0]);return!(e.indexOf("KB")>=0||e.indexOf("Bytes")>=0)||e.indexOf("KB")>=0&&n>250?{valid:!1,message:"File size exceeds to 250KB"}:{valid:!0}}previewData(t){return db(this,void 0,void 0,(function*(){if(0!==t.length)return new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t[0]),r.onload=t=>{e(r.result)}})}))}uploadData(t){const e=new FormData;return e.append("file",t,t.name),e}formatBytes(t,e=2){if(0===t)return"0 Bytes";const n=e<0?0:e,r=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,r)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]}upload(t){const e=this.uploadData(t.file);return this.http.post(`user/upload/${t.id}`,e)}}return t.ngInjectableDef=ft({factory:function(){return new t(Rt(Op))},token:t,providedIn:"root"}),t})();var Uv=$n({encapsulation:0,styles:[["[_nghost-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);z-index:1}.content[_ngcontent-%COMP%]{width:95%;max-width:30rem;background:#fff;margin:5rem auto auto;border-radius:2px;position:relative}.content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding:1rem;color:#333;font-size:1.5rem;font-weight:600}.content[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:15rem;margin:auto auto 1rem;height:15rem;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;border-radius:50%;overflow:hidden;background:#333}.content[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.content[_ngcontent-%COMP%]   .input-file[_ngcontent-%COMP%]{margin:auto;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;cursor:pointer;border-radius:20px}.content[_ngcontent-%COMP%]   .input-file[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:20rem;background:#d1e8ff;padding:1rem}.content[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;padding:1rem}.content[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:1px solid #3c87d4;background:#3c87d4;color:#fff;padding:1rem;border-radius:2px;margin:0 .5rem;width:100%;cursor:pointer;-webkit-transition:.25s;transition:all .25s ease}.content[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#65a7ea}.content[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button.disabled[_ngcontent-%COMP%]{background:#e2e2e2;border-color:#e2e2e2;color:#b7b7b7}.content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:-30px;right:-5px;fill:#fff;width:3rem;height:3rem;cursor:pointer}"]],data:{}});function jv(t){return Yi(0,[(t()(),Ri(0,0,null,null,14,"div",[["class","content"]],null,null,null,null,null)),(t()(),Ri(1,0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),Wi(-1,null,["Update profile picture"])),(t()(),Ri(3,0,null,null,1,":svg:svg",[["class","close"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.close()&&r),r}),null,null)),(t()(),Ri(4,0,null,null,0,":svg:use",[[":xlink:href","assets/images/icons.svg#icon-clearclose"]],null,null,null,null,null)),(t()(),Ri(5,0,null,null,1,"div",[["class","avatar"]],null,null,null,null,null)),(t()(),Ri(6,0,null,null,0,"img",[["alt",""],["onerror","this.src='./assets/images/avatar.svg'"]],[[8,"src",4]],null,null,null,null)),(t()(),Ri(7,0,null,null,1,"div",[["class","input-file"]],null,null,null,null,null)),(t()(),Ri(8,0,[["fileInput",1]],null,0,"input",[["type","file"]],null,[[null,"change"]],(function(t,e,n){var r=!0;return"change"===e&&(r=!1!==t.component.onFileChanged(n)&&r),r}),null,null)),(t()(),Ri(9,0,null,null,5,"div",[["class","buttons"]],null,null,null,null,null)),(t()(),Ri(10,0,null,null,4,"button",[],[[8,"disabled",0]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.upload()&&r),r}),null,null)),Jr(512,null,Hl,ql,[gn,mn,Ze,tn]),Qr(12,278528,null,0,Kl,[Hl],{ngClass:[0,"ngClass"]},null),Hi(13,{disabled:0}),(t()(),Wi(-1,null,["Save"]))],(function(t,e){var n=t(e,13,0,!e.component.valid);t(e,12,0,n)}),(function(t,e){var n=e.component;t(e,6,0,n.imgURL),t(e,10,0,!n.valid)}))}class Lv{constructor(t,e,n,r,s){this.actionSV=t,this.alertSV=e,this.userSV=n,this.conversationSV=r,this.sessionSV=s,this.subs=[],this.showActions=!1,this.actions={GROUP:[{label:"Add Member",value:"add-member",icon:"user-plus"},{label:"Leave Group",value:"leave-group",icon:"exit"}],PERSONAL:[{label:"Unfriend",value:"unfriend",icon:"user-minus"}]},this.isAdmin=!1,this.profilePicture=[],this.onlineUsers=[]}ngOnInit(){this.currentUser=this.sessionSV.data.user,this.subs=[this.watchConversationState(),this.watchAction(),this.watchOnlineUsers()],this.appendDeleteGroupAction()}getProfilePictures(){this.profilePicture=[],this.selectedConversation.type===Rm.PERSONAL?this.profilePicture.push(this.userSV.getProfilePicture(this.friend._id)):this.selectedConversation.members.slice(0,4).forEach(t=>{this.profilePicture.push(this.userSV.getProfilePicture(t._id))})}appendDeleteGroupAction(){this.selectedConversation.type===Rm.GROUP&&this.selectedConversation.createdBy===this.currentUser._id&&(this.actions.GROUP[1]={label:"Delete Group",value:"delete-group",icon:"user-minus"})}updateName(){this.conversationSV.renameGroup({id:this.selectedConversation._id,name:this.groupNameElement.nativeElement.textContent.trim()}).all()}doAction(t){switch(t.value){case"unfriend":this.unfriendUser();break;case"leave-group":this.leaveGroup();break;case"delete-group":this.deleteGroup();break;case"add-member":this.actionSV.dispatch({action:"ADD_MEMBER",data:!0})}}showMembers(){this.actionSV.dispatch({action:"SHOW_MEMBERS",data:!0})}hideActions(){setTimeout(t=>{this.showActions=!1},200)}showMenu(){this.actionSV.dispatch({action:"MENU_SHOW"})}watchOnlineUsers(){return this.userSV.friendState.subscribe(t=>{this.onlineUsers=t.users.onlines})}isOnline(t){return this.onlineUsers.filter(e=>e._id===t).length>0}watchAction(){return this.actionSV.listen.subscribe(t=>{switch(t.action){case"PROFILE_PICTURE_UPDATE":this.getProfilePictures()}})}watchConversationState(){return this.conversationSV.conversationState.subscribe(t=>{switch(t.action.name){case"[Conversation] SELECT":case"[Conversation] add member finish":case"[Conversation] Group user remove finish":this.selectedConversation=t.conversation.selected,this.friend=this.selectedConversation.members[0],this.isAdmin=this.currentUser._id===this.selectedConversation.createdBy,this.getProfilePictures()}})}leaveGroup(){this.alertSV.confirm("Are you sure?",["Yes","No"],`Leave Group ${this.selectedConversation.name}?`).then(t=>{0===t&&this.conversationSV.leaveGroup({user:this.currentUser._id,conversation:this.selectedConversation._id}).action()})}deleteGroup(){this.alertSV.confirm("Are you sure?",["Yes","No"],`Delete Group ${this.selectedConversation.name}?`).then(t=>{0===t&&this.conversationSV.deleteGroup(this.selectedConversation._id).action()})}unfriendUser(){this.alertSV.confirm("Are you sure?",["Yes","No"],`Unfriend ${this.friend.firstname}?`).then(t=>{0===t&&this.userSV.unfriend(this.friend._id,this.currentUser._id).subscribe(t=>{this.conversationSV.actionRemoveConversation(t.data._id)})})}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe())}}var $v=$n({encapsulation:0,styles:[['[_nghost-%COMP%]{background-color:#348bad;height:10rem;padding:1rem 1rem 1rem 2rem;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}[_nghost-%COMP%]   .members[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;flex-wrap:wrap;width:8rem;height:8rem;margin-right:.25rem}[_nghost-%COMP%]   .members[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3.25rem;height:3.25rem;border-radius:50%}[_nghost-%COMP%]   .members[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:nth-child(even){margin-left:-15px}[_nghost-%COMP%]   .members[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:last-child, [_nghost-%COMP%]   .members[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:nth-child(3){margin-top:-20px}[_nghost-%COMP%]   .members.size-1[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0;width:5rem;height:5rem}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:500;font-size:2rem;color:#fff;line-height:1;text-transform:capitalize}[_nghost-%COMP%]   label[_ngcontent-%COMP%]{font-size:1.3rem;color:#fff;font-weight:500;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start;cursor:pointer}[_nghost-%COMP%]   label[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:2rem;height:2rem;margin-right:.5rem;fill:#1f1f1f}[_nghost-%COMP%]   .pm[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:before{content:"";width:1rem;height:1rem;display:inline-block;border-radius:50%;margin-right:.5rem;background:#484848}[_nghost-%COMP%]   .pm[_ngcontent-%COMP%]   label.online[_ngcontent-%COMP%]:before{background:#46e246}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;margin-right:1rem;width:5rem;height:5rem;box-shadow:0 0 0 2px #fff}[_nghost-%COMP%]   button[_ngcontent-%COMP%]{margin-left:auto;background:0 0;border:none;cursor:pointer;position:relative}[_nghost-%COMP%]   button[_ngcontent-%COMP%] > svg[_ngcontent-%COMP%]{width:3rem;height:3rem;fill:#fff}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;position:absolute;top:30px;right:0;text-align:left;background:#fff;border-radius:3px;box-shadow:0 3px 5px -3px #333;width:-webkit-max-content;width:-moz-max-content;width:max-content;z-index:1}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.75rem 1rem;cursor:pointer;font-size:1.15rem;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;color:#797979;font-weight:500}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#dcdcdc}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#656565;width:2rem;height:2rem;margin-right:.5rem}']],data:{}});function Bv(t){return Yi(0,[(t()(),Ri(0,0,null,null,0,"img",[["alt",""],["onerror","this.src='./assets/images/avatar.svg'"]],[[8,"src",4]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.showMenu()&&r),r}),null,null))],null,(function(t,e){t(e,0,0,e.component.profilePicture[0])}))}function zv(t){return Yi(0,[(t()(),Ri(0,0,null,null,0,"img",[["alt",""],["class","avatar"],["onerror","this.src='./assets/images/avatar.svg'"]],[[8,"src",4]],null,null,null,null))],null,(function(t,e){t(e,0,0,e.component.profilePicture[e.context.index])}))}function Gv(t){return Yi(0,[(t()(),Ri(0,0,null,null,5,"div",[["class","members"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.showMenu()&&r),r}),null,null)),Jr(512,null,Hl,ql,[gn,mn,Ze,tn]),Qr(2,278528,null,0,Kl,[Hl],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),Hi(3,{"size-1":0}),(t()(),Ii(16777216,null,null,1,null,zv)),Qr(5,278528,null,0,Yl,[Sn,wn,gn],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){var n=e.component,r=t(e,3,0,1===n.selectedConversation.members.length);t(e,2,0,"members",r),t(e,5,0,n.selectedConversation.members.slice(0,4))}),null)}function Hv(t){return Yi(0,[(t()(),Ri(0,0,null,null,7,"div",[["class","pm"]],null,null,null,null,null)),(t()(),Ri(1,0,null,null,1,"h1",[["class","title"]],null,null,null,null,null)),(t()(),Wi(2,null,[""," ",""])),(t()(),Ri(3,0,null,null,4,"label",[],null,null,null,null,null)),Jr(512,null,Hl,ql,[gn,mn,Ze,tn]),Qr(5,278528,null,0,Kl,[Hl],{ngClass:[0,"ngClass"]},null),Hi(6,{online:0}),(t()(),Wi(7,null,[" "," "]))],(function(t,e){var n=e.component,r=t(e,6,0,n.isOnline(n.friend._id));t(e,5,0,r)}),(function(t,e){var n=e.component;t(e,2,0,null==n.friend?null:n.friend.firstname,null==n.friend?null:n.friend.lastname),t(e,7,0,n.isOnline(n.friend._id)?"Online":"Offline")}))}function qv(t){return Yi(0,[(t()(),Ri(0,0,null,null,6,"div",[["class","group"]],null,null,null,null,null)),(t()(),Ri(1,0,[[1,0],["groupName",1]],null,1,"div",[["class","title"]],[[1,"contenteditable",0]],[[null,"blur"]],(function(t,e,n){var r=!0;return"blur"===e&&(r=!1!==t.component.updateName()&&r),r}),null,null)),(t()(),Wi(2,null,[" "," "])),(t()(),Ri(3,0,null,null,3,"label",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.showMembers()&&r),r}),null,null)),(t()(),Ri(4,0,null,null,1,":svg:svg",[],null,null,null,null,null)),(t()(),Ri(5,0,null,null,0,":svg:use",[[":xlink:href","assets/images/icons.svg#icon-grouppeople"]],null,null,null,null,null)),(t()(),Wi(6,null,[" "," member"," "]))],null,(function(t,e){var n=e.component;t(e,1,0,n.isAdmin),t(e,2,0,n.selectedConversation.name),t(e,6,0,n.selectedConversation.members.length,n.selectedConversation.members.length>1?"s":"")}))}function Wv(t){return Yi(0,[(t()(),Ri(0,0,null,null,3,"li",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.doAction(t.context.$implicit)&&r),r}),null,null)),(t()(),Ri(1,0,null,null,1,":svg:svg",[],null,null,null,null,null)),(t()(),Ri(2,0,null,null,0,":svg:use",[],[[1,":xlink:href",0]],null,null,null,null)),(t()(),Wi(3,null,[" "," "]))],null,(function(t,e){t(e,2,0,"assets/images/icons.svg#icon-"+e.context.$implicit.icon),t(e,3,0,e.context.$implicit.label)}))}function Kv(t){return Yi(0,[(t()(),Ri(0,0,null,null,2,"ul",[],null,null,null,null,null)),(t()(),Ii(16777216,null,null,1,null,Wv)),Qr(2,278528,null,0,Yl,[Sn,wn,gn],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){var n=e.component;t(e,2,0,n.actions[n.selectedConversation.type])}),null)}function Zv(t){return Yi(0,[Ui(671088640,1,{groupNameElement:0}),(t()(),Ii(16777216,null,null,1,null,Bv)),Qr(2,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Ii(16777216,null,null,1,null,Gv)),Qr(4,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Ii(16777216,null,null,1,null,Hv)),Qr(6,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Ii(16777216,null,null,1,null,qv)),Qr(8,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Ri(9,0,null,null,4,"button",[],null,[[null,"blur"],[null,"click"]],(function(t,e,n){var r=!0,s=t.component;return"blur"===e&&(r=!1!==s.hideActions()&&r),"click"===e&&(r=0!=(s.showActions=!0)&&r),r}),null,null)),(t()(),Ri(10,0,null,null,1,":svg:svg",[],null,null,null,null,null)),(t()(),Ri(11,0,null,null,0,":svg:use",[[":xlink:href","assets/images/icons.svg#icon-more_vert"]],null,null,null,null,null)),(t()(),Ii(16777216,null,null,1,null,Kv)),Qr(13,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,"PERSONAL"===n.selectedConversation.type),t(e,4,0,"GROUP"===n.selectedConversation.type),t(e,6,0,"PERSONAL"===n.selectedConversation.type),t(e,8,0,"GROUP"===n.selectedConversation.type),t(e,13,0,n.showActions)}),null)}class Yv{constructor(t){this.reactionService=t,this.onselect=new _s,this.show=!1,this.reactions=this.reactionService.reactions}ngOnInit(){}toggle(){this.show=!this.show}onblur(){setTimeout(t=>{this.toggle()},250)}select(t){this.onselect.emit(t)}}var Qv=function(t){return t.HAIZT="HAIZT",t.SHIT="SHIT",t.FU="FU",t.ROCK="ROCK",t.CRYING="CRYING",t.ANGRY="ANGRY",t.SHOCKED="SHOCKED",t.CLAP="CLAP",t.LOVE="LOVE",t.LAUGH="LAUGH",t.AGREE="AGREE",t.DISAGREE="DISAGREE",t.TOUNGE="TOUNGE",t.THINKING="THINKING",t}({});let Xv=(()=>{class t{constructor(t,e){this.http=t,this.store=e}get reactions(){return[{reaction:Qv.TOUNGE,emoji:"\u{1f61b}"},{reaction:Qv.THINKING,emoji:"\u{1f914}"},{reaction:Qv.HAIZT,emoji:"\u{1f926}\u200d\u2642\ufe0f"},{reaction:Qv.SHIT,emoji:"\u{1f4a9}"},{reaction:Qv.FU,emoji:"\u{1f595}"},{reaction:Qv.ROCK,emoji:"\u{1f918}"},{reaction:Qv.CRYING,emoji:"\u{1f62d}"},{reaction:Qv.ANGRY,emoji:"\u{1f624}"},{reaction:Qv.SHOCKED,emoji:"\u{1f631}"},{reaction:Qv.CLAP,emoji:"\u{1f44f}"},{reaction:Qv.LOVE,emoji:"\u{1f60d}"},{reaction:Qv.LAUGH,emoji:"\u{1f604}"},{reaction:Qv.DISAGREE,emoji:"\u{1f44e}"},{reaction:Qv.AGREE,emoji:"\u{1f44d}"}]}react(t){return{http:()=>this.http.post("conversation/react",{messageId:t.messageId,reaction:{by:t.reaction.by,reaction:t.reaction.reaction}}),action:()=>this.store.dispatch(new ob(t))}}appendReactionFromWebSocket(t){this.store.dispatch(new lb(t))}}return t.ngInjectableDef=ft({factory:function(){return new t(Rt(Op),Rt(Af))},token:t,providedIn:"root"}),t})();var Jv=$n({encapsulation:0,styles:[["[_nghost-%COMP%]{display:none;position:absolute;top:-2rem;right:-1.5rem;z-index:2}.you[_nghost-%COMP%]{right:initial;left:-2rem}.you[_nghost-%COMP%]   .reactions[_ngcontent-%COMP%]{right:initial;left:0;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;flex-flow:row-reverse}.toggle[_ngcontent-%COMP%]{border:none;font-size:1.75rem;cursor:pointer;padding:0;margin:0;background:#fff;border-radius:50%;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;width:3rem;height:3rem}.reactions[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:end;justify-content:flex-end;position:absolute;top:0;right:0;z-index:2;width:80vw;flex-wrap:wrap!important}.reactions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:3rem;height:3rem;background:#000;border-radius:50%;display:-webkit-inline-box;display:inline-flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;box-shadow:0 6px 9px -10px #000;cursor:pointer;-webkit-transition:.25s;transition:all .25s ease}.reactions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:0 0;-webkit-transform:translateY(-1rem);transform:translateY(-1rem);font-size:4.5rem}"]],data:{}});function ty(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"li",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.select(t.context.$implicit)&&r),r}),null,null)),(t()(),Wi(1,null,[" "," "]))],null,(function(t,e){t(e,1,0,e.context.$implicit.emoji)}))}function ey(t){return Yi(0,[(t()(),Ri(0,0,null,null,2,"ul",[["class","reactions"]],null,null,null,null,null)),(t()(),Ii(16777216,null,null,1,null,ty)),Qr(2,278528,null,0,Yl,[Sn,wn,gn],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,2,0,e.component.reactions)}),null)}function ny(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"button",[["class","toggle"]],null,[[null,"click"],[null,"blur"]],(function(t,e,n){var r=!0,s=t.component;return"click"===e&&(r=!1!==s.toggle()&&r),"blur"===e&&(r=!1!==s.onblur()&&r),r}),null,null)),(t()(),Wi(-1,null,["\u{1f610}"])),(t()(),Ii(16777216,null,null,1,null,ey)),Qr(3,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){t(e,3,0,e.component.show)}),null)}class ry{constructor(t,e){this.sessionSV=t,this.reactionSV=e,this.reactions=[],this.availableReactions=this.reactionSV.reactions,this.reactionsFormatted=[]}ngOnInit(){this.reactions&&this.reactions.length>0&&this.reactions.map(t=>(t.emoji=this.getEmoji(t.reaction),this.filterReactions(t),t))}filterReactions(t){this.reactionExist(t)?this.reactionsFormatted.map(e=>(e.reaction.reaction===t.reaction&&(e.count+=1,e.reactors.push(t.by)),e)):this.reactionsFormatted.push({reaction:t,count:1,reactors:[t.by]})}getEmoji(t){return this.availableReactions.filter(e=>e.reaction===t)[0].emoji}reactionExist(t){return this.reactionsFormatted.filter(e=>e.reaction.reaction===t.reaction).length>0}isYou(t){return this.sessionSV.data.user._id===t}}var sy=$n({encapsulation:0,styles:[['[_nghost-%COMP%]{position:absolute;bottom:-15px;right:.5rem}.you[_nghost-%COMP%]{left:.5rem;right:initial}.you[_nghost-%COMP%]   label[_ngcontent-%COMP%]{left:-15px;right:initial}.reactions[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.reactions[_ngcontent-%COMP%]:hover   li[_ngcontent-%COMP%]{opacity:.5}.reactions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background:#fff;border-radius:50%;width:2.5rem;height:2.5rem;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;font-size:1.25rem;box-shadow:0 2px 6px -4px #000;-webkit-transition:.25s;transition:all .25s ease;cursor:pointer;z-index:1}.reactions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{font-size:5rem;-webkit-transform:translate(10px,-10px);transform:translate(10px,-10px);background:0 0;opacity:1}.reactions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover + li[_ngcontent-%COMP%]{opacity:0}.reactions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   label[_ngcontent-%COMP%]{display:block}.reactions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:none;position:absolute;bottom:-4.25rem;right:-15px;font-size:1.2rem;margin:auto;background:#8a8a8a;padding:1px 10px;border-radius:14px;font-weight:500;color:#fff;width:-webkit-max-content;width:-moz-max-content;width:max-content;text-transform:capitalize}.reactions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(:first-child):before{content:"";width:5px;height:5px;background:#545454;display:inline-block;border-radius:50%;margin:0 2px 1px 3px}']],data:{}});function iy(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),Wi(1,null,[" "," "]))],null,(function(t,e){t(e,1,0,e.context.$implicit.firstname)}))}function oy(t){return Yi(0,[(t()(),Ri(0,0,null,null,5,"li",[],null,null,null,null,null)),(t()(),Ri(1,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),Wi(2,null,["",""])),(t()(),Ri(3,0,null,null,2,"label",[],null,null,null,null,null)),(t()(),Ii(16777216,null,null,1,null,iy)),Qr(5,278528,null,0,Yl,[Sn,wn,gn],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,5,0,e.context.$implicit.reactors)}),(function(t,e){t(e,2,0,e.context.$implicit.reaction.emoji)}))}function ly(t){return Yi(0,[(t()(),Ri(0,0,null,null,2,"ul",[["class","reactions"]],null,null,null,null,null)),(t()(),Ii(16777216,null,null,1,null,oy)),Qr(2,278528,null,0,Yl,[Sn,wn,gn],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,2,0,e.component.reactionsFormatted)}),null)}class ay{constructor(t,e,n,r,s,i){this.conversationSV=t,this.sessionSV=e,this.elRef=n,this.websocketSV=r,this.jkAlert=s,this.reactionSV=i,this.subs=[],this.isLastPage=!1,this.isLoadingPrevious=!1,this.pagination={page:1,limit:10},this.messageIdToReloadReactions=""}ngOnInit(){this.currentUser=this.sessionSV.data.user,this.subs=[this.watchConversationState(),this.watchMessageWebSocket(),this.watchMessageReactWebSocket(),this.watchUpdateTempIdWebSocket()]}watchConversationState(){return this.conversationSV.conversationState.subscribe(t=>{switch(this.currentConversation=t.conversation.selected,t.action.name){case"[Conversation] Load previous messages":this.isLoadingPrevious=!0;break;case"[Conversation] Load previous messages finish":this.messages=t.conversation.messages,this.isLastPage="last"===t.action.message,this.elRef.nativeElement.scrollTop=this.isLastPage?0:120,this.isLoadingPrevious=!1;break;case"[Conversation] Load messages":200!==t.action.statusCode?this.jkAlert.error(t.action.message):(this.messages=t.conversation.messages,this.moveScrollToBottom());break;case"[Conversation] Send message":this.messages.push(t.conversation.messages[t.conversation.messages.length-1]),this.moveScrollToBottom();break;case"[Conversation] Message react finish":setTimeout(t=>{this.messageIdToReloadReactions=null},100)}})}sendReactionViaWebSocket(t){this.currentConversation.members.forEach(e=>{this.currentUser._id!==e._id&&this.websocketSV.dispatch({id:e._id,type:Im.REACT,data:{conversation:this.currentConversation,messageId:t.messageId,reaction:t.reaction}})})}watchMessageWebSocket(){return this.websocketSV.listen(Im.MESSAGE,this.currentUser._id).subscribe(t=>{this.conversationSV.actionSendMessage(t.message),this.moveScrollToBottom()})}watchMessageReactWebSocket(){return this.websocketSV.listen(Im.REACT,this.currentUser._id).subscribe(t=>{t.conversation._id===this.currentConversation._id&&(this.messageIdToReloadReactions=t.messageId,this.reactionSV.appendReactionFromWebSocket({messageId:t.messageId,reaction:t.reaction}))})}watchUpdateTempIdWebSocket(){return this.websocketSV.listen(Im.UPDATE_TEMPORARY_ID,this.currentUser._id).subscribe(t=>{t.conversation._id===this.currentConversation._id&&this.conversationSV.actionUpdateTemporaryID(t.id)})}isYou(t){return this.currentUser._id===t}isToday(t){return(new Date).toDateString()===new Date(t).toDateString()}moveScrollToBottom(){setTimeout(()=>{this.elRef.nativeElement.scrollTop=999999})}onReact(t,e){this.messageIdToReloadReactions=t;const n={messageId:t,reaction:Object.assign({},e,{by:this.currentUser})};this.reactionSV.react(n).action(),this.sendReactionViaWebSocket(n)}isTemporaryId(t){return t.split("temp_").length>1}reply(t){const e=Object.assign({},t,{}),n=this.removeExistingRepliedMessage(e.message);e.message=n,this.conversationSV.actionMessageReply(e)}removeExistingRepliedMessage(t){const e=t.split("<span>invi</span></div>");return e.length>1?e[1].trim():t}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe())}}var cy=$n({encapsulation:0,styles:[['[_nghost-%COMP%]{-webkit-box-flex:1;flex:1;padding:1rem;overflow-y:auto;overflow-x:hidden}.message[_ngcontent-%COMP%]{margin-bottom:2rem;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column;-webkit-box-align:start;align-items:flex-start;position:relative}.message[_ngcontent-%COMP%]:hover   .reply[_ngcontent-%COMP%], .message[_ngcontent-%COMP%]:hover   app-react[_ngcontent-%COMP%]{display:block}.message[_ngcontent-%COMP%]:last-child{margin-bottom:5rem}.message[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row;margin-bottom:1rem}.message[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:.5rem}.message[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]{width:1rem;height:1rem;background-color:#e4e4e4;display:inline-block;border-radius:50%}.message[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500}.message[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:300;color:#9a9a9a}.message[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{background:#e4e4e4;color:#333;border-radius:5px;padding:1rem;font-size:1.6rem;width:90%;position:relative;word-break:break-all}.message[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]:before{content:"";width:0;height:0;border-style:solid;border-width:0 10px 10px;border-color:transparent transparent #e4e4e4;position:absolute;top:-10px;left:15px}.message[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:block}.message.you[_ngcontent-%COMP%]{-webkit-box-align:end;align-items:flex-end}.message.you[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;flex-flow:row-reverse}.message.you[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%], .message.you[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{background-color:#58b666}.message.you[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{color:#fff}.message.you[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]:before{border-color:transparent transparent #58b666;right:15px;left:initial}.message.you[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .reply-message[_ngcontent-%COMP%]{padding:.5rem;background:#6dc37a;font-size:1.25rem;font-style:italic}.message.you[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]{right:initial;left:0;-webkit-transform:scaleX(-1);transform:scaleX(-1)}.message[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]{display:none;width:3rem;height:3rem;position:absolute;top:35px;bottom:0;margin:auto;cursor:pointer;-webkit-transition:.25s;transition:all .25s ease;right:0;left:initial}.message[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]:hover{width:4rem;height:4rem}.loadPrevious[_ngcontent-%COMP%]{background:#eee;padding:.5rem 1rem;border-radius:3px;display:inline-block;cursor:pointer;color:#444;width:100%;margin-bottom:1rem;text-align:center;font-size:1.2rem}']],data:{}});function uy(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"a",[["class","loadPrevious"]],null,null,null,null,null)),(t()(),Wi(-1,null,[" Loading previous messages...\n"]))],null,null)}function hy(t){return Yi(0,[(t()(),Ri(0,0,null,null,2,"span",[["class","time"]],null,null,null,null,null)),(t()(),Wi(1,null,["",""])),Gi(2,2)],null,(function(t,e){var n=Ln(e,1,0,t(e,2,0,Ur(e.parent.parent.parent,0),e.parent.context.$implicit.date,"MM/dd/yy hh:mm a"));t(e,1,0,n)}))}function dy(t){return Yi(0,[(t()(),Ri(0,0,null,null,2,"span",[["class","time"]],null,null,null,null,null)),(t()(),Wi(1,null,["Today ",""])),Gi(2,2)],null,(function(t,e){var n=Ln(e,1,0,t(e,2,0,Ur(e.parent.parent.parent,0),e.parent.context.$implicit.date,"hh:mm a"));t(e,1,0,n)}))}function py(t){return Yi(0,[(t()(),Ri(0,0,null,null,4,"app-react",[],null,[[null,"onselect"]],(function(t,e,n){var r=!0;return"onselect"===e&&(r=!1!==t.component.onReact(t.parent.context.$implicit._id,n)&&r),r}),ny,Jv)),Jr(512,null,Hl,ql,[gn,mn,Ze,tn]),Qr(2,278528,null,0,Kl,[Hl],{ngClass:[0,"ngClass"]},null),Hi(3,{you:0}),Qr(4,114688,null,0,Yv,[Xv],null,{onselect:"onselect"})],(function(t,e){var n=t(e,3,0,e.component.isYou(e.parent.context.$implicit.from._id));t(e,2,0,n),t(e,4,0)}),null)}function fy(t){return Yi(0,[(t()(),Ri(0,0,null,null,4,"app-reactions",[],null,null,null,ly,sy)),Jr(512,null,Hl,ql,[gn,mn,Ze,tn]),Qr(2,278528,null,0,Kl,[Hl],{ngClass:[0,"ngClass"]},null),Hi(3,{you:0}),Qr(4,114688,null,0,ry,[ip,Xv],{reactions:[0,"reactions"]},null)],(function(t,e){var n=t(e,3,0,e.component.isYou(e.parent.context.$implicit.from._id));t(e,2,0,n),t(e,4,0,e.parent.context.$implicit.reactions)}),null)}function gy(t){return Yi(0,[(t()(),Ri(0,0,null,null,19,"div",[["class","message"]],null,null,null,null,null)),Jr(512,null,Hl,ql,[gn,mn,Ze,tn]),Qr(2,278528,null,0,Kl,[Hl],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),Hi(3,{you:0}),(t()(),Ri(4,0,null,null,7,"div",[["class","details"]],null,null,null,null,null)),(t()(),Ri(5,0,null,null,0,"span",[["class","bullet"]],null,null,null,null,null)),(t()(),Ri(6,0,null,null,1,"label",[["class","user"]],null,null,null,null,null)),(t()(),Wi(7,null,["",""])),(t()(),Ii(16777216,null,null,1,null,hy)),Qr(9,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Ii(16777216,null,null,1,null,dy)),Qr(11,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Ri(12,0,null,null,5,"div",[["class","content"]],null,null,null,null,null)),(t()(),Ri(13,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(t()(),Ii(16777216,null,null,1,null,py)),Qr(15,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Ii(16777216,null,null,1,null,fy)),Qr(17,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Ri(18,0,null,null,1,":svg:svg",[["class","reply"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.reply(t.context.$implicit)&&r),r}),null,null)),(t()(),Ri(19,0,null,null,0,":svg:use",[[":xlink:href","assets/images/icons.svg#icon-reply"]],null,null,null,null,null))],(function(t,e){var n=e.component,r=t(e,3,0,n.isYou(e.context.$implicit.from._id));t(e,2,0,"message",r),t(e,9,0,!n.isToday(e.context.$implicit.date)),t(e,11,0,n.isToday(e.context.$implicit.date)),t(e,15,0,!n.isTemporaryId(e.context.$implicit._id)),t(e,17,0,n.messageIdToReloadReactions!==e.context.$implicit._id)}),(function(t,e){t(e,7,0,e.component.isYou(e.context.$implicit.from._id)?"You":e.context.$implicit.from.firstname),t(e,13,0,e.context.$implicit.message)}))}function my(t){return Yi(0,[(t()(),Ri(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),Ii(16777216,null,null,1,null,gy)),Qr(2,278528,null,0,Yl,[Sn,wn,gn],{ngForOf:[0,"ngForOf"]},null),(t()(),Ii(0,null,null,0))],(function(t,e){t(e,2,0,e.component.messages)}),null)}function by(t){return Yi(0,[Xr(0,aa,[Is]),(t()(),Ii(16777216,null,null,1,null,uy)),Qr(2,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Ii(16777216,null,null,1,null,my)),Qr(4,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,!n.isLastPage&&n.isLoadingPrevious),t(e,4,0,n.messages)}),null)}class vy{constructor(t){this.convoSV=t,this.subs=[]}ngOnInit(){this.subs=[this.watchConversationState()]}watchConversationState(){return this.convoSV.conversationState.subscribe(t=>{switch(t.action.name){case"[Conversation] Message reply":this.replyTo=t.conversation.reply}})}cancel(){this.convoSV.actionMessageReply(null)}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe())}}var yy=$n({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   div[_ngcontent-%COMP%]{padding:1rem;background:#ff8100;font-size:1.2rem;position:relative}[_nghost-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem}[_nghost-%COMP%]   p[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   svg[_ngcontent-%COMP%]{width:3rem;height:3rem;position:absolute;top:0;right:5px;bottom:0;margin:auto;fill:#804000;cursor:pointer}[_nghost-%COMP%]   svg[_ngcontent-%COMP%]:hover{fill:#fff}"]],data:{}});function _y(t){return Yi(0,[(t()(),Ri(0,0,null,null,7,"div",[],null,null,null,null,null)),(t()(),Ri(1,0,null,null,3,"label",[],null,null,null,null,null)),(t()(),Wi(-1,null,["Replying to "])),(t()(),Ri(3,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),Wi(4,null,["",""])),(t()(),Ri(5,0,null,null,0,"p",[],[[8,"innerHTML",1]],null,null,null,null)),(t()(),Ri(6,0,null,null,1,":svg:svg",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.cancel()&&r),r}),null,null)),(t()(),Ri(7,0,null,null,0,":svg:use",[[":xlink:href","assets/images/icons.svg#icon-clearclose"]],null,null,null,null,null))],null,(function(t,e){var n=e.component;t(e,4,0,null==n.replyTo?null:n.replyTo.from.firstname),t(e,5,0,null==n.replyTo?null:n.replyTo.message)}))}function Cy(t){return Yi(0,[(t()(),Ii(16777216,null,null,1,null,_y)),Qr(1,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){t(e,1,0,e.component.replyTo)}),null)}class wy{constructor(t){this.http=t,this.onselect=new _s,this.onclose=new _s,this.type="gifs",this.searchKey="",this.loading=!1,this.gifs=[],this.apiKey="1qS9Bv3tBBzmr3uQr3GpGG32yLQ83Bzf",this.limit=13,this.offset=0}ngOnInit(){this.getGifs()}ngOnChanges(){this.offset=0,this.searchKey="",this.gifs=[],this.getGifs()}more(){this.offset+=this.limit,this.getGifs()}getGifs(){this.loading=!0;const t=this.searchKey.trim().length>0?`search?q=${this.searchKey}&`:"trending?";this.http.get(`https://api.giphy.com/v1/${this.type}/${t}api_key=${this.apiKey}&limit=${this.limit}&offset=${this.offset}`,{headers:{external:"true",loading:"background"}}).subscribe(t=>{const e=t.data.map(t=>({preview:t.images.preview_gif.url||t.images.original_still.url,original:t.images.original.url}));this.gifs=[...this.gifs,...e],this.loading=!1})}iSearch(){this.searchTimer&&clearTimeout(this.searchTimer),this.searchTimer=setTimeout(t=>{this.offset=0,this.gifs=[],this.getGifs()},1e3)}close(){this.onclose.emit()}select(t){this.onselect.emit(t)}}var xy=$n({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;height:15rem;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column;position:relative}.close[_ngcontent-%COMP%]{position:absolute;top:-40px;right:-5px;width:3rem;height:3rem;fill:#565656}.search[_ngcontent-%COMP%]{position:relative;margin-bottom:.5rem}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:2px;padding:1rem;width:100%;background:#fff;border:1px solid #ddd;-webkit-transition:.25s;transition:all .25s ease}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#c1c1c1}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#c1c1c1}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:#c1c1c1}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#c1c1c1}.search[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#929292;width:2.5rem;height:2.5rem;position:absolute;right:5px;top:8px;pointer-events:none;-webkit-transition:.25s;transition:all .25s ease}.list-container[_ngcontent-%COMP%]{overflow:auto;-webkit-box-flex:1;flex:1}.list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(8rem,1fr));grid-template-rows:10rem;grid-auto-rows:10rem;overflow-y:auto}.list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.25rem;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;background:#fff;cursor:pointer;border:2px solid #8a8a8a;overflow:hidden;font-weight:600;text-transform:uppercase}.list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#ff5050}.list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.loading[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%;background:rgba(138,138,138,.9);display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;color:#fff;font-size:1.25rem}"]],data:{}});function Sy(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"li",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.select(t.context.$implicit)&&r),r}),null,null)),(t()(),Ri(1,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,(function(t,e){t(e,1,0,e.context.$implicit.preview)}))}function Oy(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"li",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.more()&&r),r}),null,null)),(t()(),Wi(-1,null,[" MORE "]))],null,null)}function ky(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"li",[],null,null,null,null,null)),(t()(),Wi(-1,null,[" No Results "]))],null,null)}function Py(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"div",[["class","loading"]],null,null,null,null,null)),(t()(),Wi(-1,null,[" loading...\n"]))],null,null)}function Ey(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,":svg:svg",[["class","close"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.close()&&r),r}),null,null)),(t()(),Ri(1,0,null,null,0,":svg:use",[[":xlink:href","assets/images/icons.svg#icon-clearclose"]],null,null,null,null,null)),(t()(),Ri(2,0,null,null,8,"div",[["class","search"]],null,null,null,null,null)),(t()(),Ri(3,0,null,null,5,"input",[["placeholder","Search"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var r=!0,s=t.component;return"input"===e&&(r=!1!==Ur(t,4)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==Ur(t,4).onTouched()&&r),"compositionstart"===e&&(r=!1!==Ur(t,4)._compositionStart()&&r),"compositionend"===e&&(r=!1!==Ur(t,4)._compositionEnd(n.target.value)&&r),"keyup"===e&&(r=!1!==s.iSearch()&&r),"ngModelChange"===e&&(r=!1!==(s.searchKey=n)&&r),r}),null,null)),Qr(4,16384,null,0,Sg,[tn,Ze,[2,xg]],null,null),Jr(1024,null,Cg,(function(t){return[t]}),[Sg]),Qr(6,671744,null,0,_m,[[8,null],[8,null],[8,null],[6,Cg]],{model:[0,"model"]},{update:"ngModelChange"}),Jr(2048,null,Eg,null,[_m]),Qr(8,16384,null,0,Tg,[[4,Eg]],null,null),(t()(),Ri(9,0,null,null,1,":svg:svg",[],null,null,null,null,null)),(t()(),Ri(10,0,null,null,0,":svg:use",[[":xlink:href","assets/images/icons.svg#icon-search"]],null,null,null,null,null)),(t()(),Ri(11,0,null,null,7,"div",[["class","list-container custom-scroll"]],null,null,null,null,null)),(t()(),Ri(12,0,null,null,6,"ul",[["class","list"]],null,null,null,null,null)),(t()(),Ii(16777216,null,null,1,null,Sy)),Qr(14,278528,null,0,Yl,[Sn,wn,gn],{ngForOf:[0,"ngForOf"]},null),(t()(),Ii(16777216,null,null,1,null,Oy)),Qr(16,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Ii(16777216,null,null,1,null,ky)),Qr(18,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Ii(16777216,null,null,1,null,Py)),Qr(20,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,6,0,n.searchKey),t(e,14,0,n.gifs),t(e,16,0,n.gifs.length>0),t(e,18,0,0===n.gifs.length),t(e,20,0,n.loading)}),(function(t,e){t(e,3,0,Ur(e,8).ngClassUntouched,Ur(e,8).ngClassTouched,Ur(e,8).ngClassPristine,Ur(e,8).ngClassDirty,Ur(e,8).ngClassValid,Ur(e,8).ngClassInvalid,Ur(e,8).ngClassPending)}))}class My{transform(t,e){return e?t.filter(t=>{const n=`${t.name}`.toLowerCase(),r=e.toLowerCase();return-1!==n.indexOf(r)}):t}}class Ty{constructor(t){this.service=t,this.key="",this.show=!1,this.animate=!1,this.searchFieldFocus=!1}ngOnInit(){this.service.load().subscribe(t=>{this.emojis=t})}toggleOnBlur(){setTimeout(()=>{this.searchFieldFocus||setTimeout(()=>{this.toggle()},250)})}select(t){this.service.selectEmoji(this.field,t)}searchFieldOnFocus(){this.searchFieldFocus=!0}searchFieldOnBlur(){setTimeout(()=>{this.toggle()},250)}toggle(){this.show?(this.key="",this.animate=!1,setTimeout(t=>{this.show=!1},250)):(this.show=!0,setTimeout(t=>{this.animate=!0},0)),this.searchFieldFocus=!1}}let Ay=(()=>{class t{constructor(t){this.http=t,this.subscriptions={},this.e||(this.e=new P)}load(){return this.cachedData?ma(this.cachedData):this.http.get("./assets/json/emoji.json",{headers:{assets:"true"}}).pipe(B(t=>(this.cachedData=t,t)))}selectEmoji(t,e){this.e.next({action:`${t}_SELECT_EMOJI`,data:e})}newValue(t,e,n){return`${t.slice(0,n.start)}${e}${t.slice(n.end)}`}onEmojiSelect(t,e){this.subscriptions[t]&&this.subscriptions[t].unsubscribe(),this.subscriptions[t]=this.e.subscribe(n=>{e&&n.action===`${t}_SELECT_EMOJI`&&e(n.data)})}}return t.ngInjectableDef=ft({factory:function(){return new t(Rt(Op))},token:t,providedIn:"root"}),t})();var Iy=$n({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;position:relative}.toggle[_ngcontent-%COMP%]{display:-webkit-box;display:flex;cursor:pointer;background:0 0;border:none}.toggle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#fff;width:2.5rem;height:2.5rem;pointer-events:none}.search[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem;padding:1rem;border:1px solid #ddd;border-radius:3px}.list[_ngcontent-%COMP%]{position:absolute;bottom:-20px;left:0;background:#fff;padding:1rem;border-radius:3px;box-shadow:0 3px 8px -2px #000;opacity:0;-webkit-transition:.2s;transition:all .2s ease;z-index:1}.list.animate[_ngcontent-%COMP%]{opacity:1;bottom:35px}.list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(8,4rem);grid-template-rows:4rem 4rem;grid-auto-rows:4rem;height:18rem;overflow-y:auto;overflow-x:hidden}.list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:2.25em;cursor:pointer;border-radius:2px;-webkit-transition:.25s;transition:all .25s ease;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#b7b7b7}"]],data:{}});function Ry(t){return Yi(0,[(t()(),Ri(0,0,null,null,0,"li",[],[[8,"title",0],[8,"innerHTML",1]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.select(t.context.$implicit)&&r),r}),null,null))],null,(function(t,e){t(e,0,0,e.context.$implicit.name,e.context.$implicit.code)}))}function Ny(t){return Yi(0,[(t()(),Ri(0,0,null,null,3,"ul",[["class","custom-scroll"]],null,null,null,null,null)),(t()(),Ii(16777216,null,null,2,null,Ry)),Qr(2,278528,null,0,Yl,[Sn,wn,gn],{ngForOf:[0,"ngForOf"]},null),Xr(0,My,[])],(function(t,e){var n=e.component;t(e,2,0,Ln(e,2,0,Ur(e,3).transform(n.emojis,n.key)))}),null)}function Dy(t){return Yi(0,[(t()(),Ri(0,0,null,null,11,"div",[["class","list"]],null,null,null,null,null)),Jr(512,null,Hl,ql,[gn,mn,Ze,tn]),Qr(2,278528,null,0,Kl,[Hl],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),Hi(3,{animate:0}),(t()(),Ri(4,0,null,null,5,"input",[["class","search"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"focus"],[null,"blur"],[null,"input"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var r=!0,s=t.component;return"input"===e&&(r=!1!==Ur(t,5)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==Ur(t,5).onTouched()&&r),"compositionstart"===e&&(r=!1!==Ur(t,5)._compositionStart()&&r),"compositionend"===e&&(r=!1!==Ur(t,5)._compositionEnd(n.target.value)&&r),"ngModelChange"===e&&(r=!1!==(s.key=n)&&r),"focus"===e&&(r=!1!==s.searchFieldOnFocus()&&r),"blur"===e&&(r=!1!==s.searchFieldOnBlur()&&r),r}),null,null)),Qr(5,16384,null,0,Sg,[tn,Ze,[2,xg]],null,null),Jr(1024,null,Cg,(function(t){return[t]}),[Sg]),Qr(7,671744,null,0,_m,[[8,null],[8,null],[8,null],[6,Cg]],{model:[0,"model"]},{update:"ngModelChange"}),Jr(2048,null,Eg,null,[_m]),Qr(9,16384,null,0,Tg,[[4,Eg]],null,null),(t()(),Ii(16777216,null,null,1,null,Ny)),Qr(11,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component,r=t(e,3,0,n.animate);t(e,2,0,"list",r),t(e,7,0,n.key),t(e,11,0,n.emojis)}),(function(t,e){t(e,4,0,Ur(e,9).ngClassUntouched,Ur(e,9).ngClassTouched,Ur(e,9).ngClassPristine,Ur(e,9).ngClassDirty,Ur(e,9).ngClassValid,Ur(e,9).ngClassInvalid,Ur(e,9).ngClassPending)}))}function Vy(t){return Yi(0,[(t()(),Ri(0,0,[["toggleButton",1]],null,2,"button",[["class","toggle"]],null,[[null,"blur"],[null,"click"]],(function(t,e,n){var r=!0,s=t.component;return"blur"===e&&(r=!1!==s.toggleOnBlur()&&r),"click"===e&&(r=!1!==s.toggle()&&r),r}),null,null)),(t()(),Ri(1,0,null,null,1,":svg:svg",[],null,null,null,null,null)),(t()(),Ri(2,0,null,null,0,":svg:use",[[":xlink:href","assets/images/icons.svg#icon-emoji"]],null,null,null,null,null)),(t()(),Ii(16777216,null,null,1,null,Dy)),Qr(4,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){t(e,4,0,e.component.show)}),null)}class Fy{constructor(t,e,n){this.uploadSV=t,this.alertSV=e,this.sessionSV=n,this.onupload=new _s}ngOnInit(){}onFileChanged(t){return db(this,void 0,void 0,(function*(){if(!t.target.files)return;this.selectedFile=t.target.files[0];const e=this.uploadSV.isValidFile(this.selectedFile);e.valid?this.upload():this.alertSV.error(e.message)}))}upload(){const t=(new Date).getTime(),e=`${this.sessionSV.data.user._id}_${t}`;this.uploadSV.upload({id:e,file:this.selectedFile}).subscribe(t=>{this.onupload.emit(e+".jpg")})}}var Uy=$n({encapsulation:0,styles:[["[_nghost-%COMP%]{position:relative;display:inline-block;margin:0}svg[_ngcontent-%COMP%]{cursor:pointer;width:2.5rem;height:2.5rem;fill:#fff;pointer-events:none}input[_ngcontent-%COMP%]{width:2.5rem;position:absolute;left:0;opacity:0;cursor:pointer;height:2.5rem;z-index:1}"]],data:{}});function jy(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,":svg:svg",[],null,null,null,null,null)),(t()(),Ri(1,0,null,null,0,":svg:use",[[":xlink:href","assets/images/icons.svg#icon-uploadphoto"]],null,null,null,null,null)),(t()(),Ri(2,0,[["fileInput",1]],null,0,"input",[["type","file"]],null,[[null,"change"]],(function(t,e,n){var r=!0;return"change"===e&&(r=!1!==t.component.onFileChanged(n)&&r),r}),null,null))],null,null)}class Ly{constructor(t,e,n,r,s,i){this.conversationSV=t,this.formBuilder=e,this.sessionSV=n,this.websocketSV=r,this.notifService=s,this.emoji=i,this.subs=[],this.typing="",this.isGlyph=!1,this.glyphType="gifs"}ngOnInit(){this.currentUser=this.sessionSV.data.user,this.subs=[this.watchConversationState(),this.watchWebSocketTyping(),this.watchWebSocketMessage()],this.buildForm(),this.emoji.onEmojiSelect("message",t=>{this.appendEmoji(t)})}onBlur(t){this.caret={start:t.target.selectionStart,end:t.target.selectionEnd}}appendEmoji(t){const e=this.emoji.newValue(this.form.value.message,t.code,this.caret);this.form.get("message").patchValue(e),this.focusMessageInput(),setTimeout(t=>{this.messageElement&&this.messageElement.nativeElement.setSelectionRange(this.caret.start+2,this.caret.start+2,"none")},0)}watchConversationState(){return this.conversationSV.conversationState.subscribe(t=>{switch(t.action.name){case"[Conversation] SELECT":this.selectedConversation=t.conversation.selected,this.focusMessageInput();break;case"[Conversation] Message reply":this.reply=t.conversation.reply,this.focusMessageInput()}})}focusMessageInput(){setTimeout(t=>{this.messageElement.nativeElement.focus()},500)}openGlyph(t,e){this.isGlyph=t,this.glyphType=e}selectGif(t){this.isGlyph=!1,this.sendMessage(`<img src="${t.original}">`)}watchWebSocketTyping(){return this.websocketSV.listen(Im.TYPING,this.selectedConversation._id).subscribe(t=>{this.typingTimerView&&clearTimeout(this.typingTimerView),this.typing=t,this.typingTimerView=setTimeout(t=>{this.typing=""},2e3)})}watchWebSocketMessage(){return this.websocketSV.listen(Im.MESSAGE,this.currentUser._id).subscribe(t=>{this.typing=""})}onSendMessage(){if(0===this.form.value.message.trim().length||this.form.invalid||!this.selectedConversation)return;let t=this.transformMessageContainsLinkAndImages(this.form.value.message);this.reply&&(t=`\n        <div class="reply-message">\n          <strong>${this.reply.from.firstname}:</strong>\n          <p>${this.reply.message}</p>\n        <span>invi</span></div>\n        ${t}\n      `),this.sendMessage(t)}sendMessage(t){const e={from:this.currentUser,message:t,date:(new Date).toString()},n=`temp_${(new Date).getTime().toString()}`;this.sendMessageViaWebSocket(e,n),this.conversationSV.actionSendMessage(Object.assign({},e,{_id:n})),this.saveMessageOnDB(t,n),this.createNotifications(),this.form.get("message").patchValue(""),this.focusMessageInput(),this.conversationSV.actionMessageReply(null)}transformMessageContainsLinkAndImages(t){return t.split(" ").map(t=>{const e=t.trim();return e.indexOf(".")>1&&"."!==e.slice(-1)&&!e.slice(-4).match(/\.(jpg|jpeg|png|gif)$/)?`<a href="${0===t.indexOf("http://")||0===t.indexOf("https://")?"":"//"}${e}" target="_blank">${e}</a>`:e.slice(-4).match(/\.(jpg|jpeg|png|gif)$/)?`<img src="${e}">`:e}).join(" ")}onImageUpload(t){this.sendMessage(`<img src="${`https://app-chatbox.herokuapp.com/user/${t}`}">`)}saveMessageOnDB(t,e){this.conversationSV.sendMessage(this.selectedConversation._id,{from:this.currentUser._id,message:t}).subscribe(t=>{this.updateTemporaryID({temporary:e,permanent:t.data})})}sendMessageViaWebSocket(t,e){this.selectedConversation.members.forEach(n=>{this.currentUser._id!==n._id&&this.websocketSV.dispatch({id:n._id,type:Im.MESSAGE,data:{conversation:this.selectedConversation,message:Object.assign({},t,{_id:e})}})})}updateTemporaryID(t){this.conversationSV.actionUpdateTemporaryID(t),this.selectedConversation.members.forEach(e=>{this.currentUser._id!==e._id&&this.websocketSV.dispatch({id:e._id,type:Im.UPDATE_TEMPORARY_ID,data:{conversation:this.selectedConversation,id:t}})})}createNotifications(){this.selectedConversation.members.forEach(t=>{t._id!==this.currentUser._id&&this.notifService.create({reference:this.selectedConversation._id,type:og.MESSAGE,user:t._id,message:`${this.selectedConversation.type===Rm.PERSONAL?"New message from":"New Group message from"} ${this.currentUser.firstname}`}).toPromise()})}buildForm(){this.form=this.formBuilder.group({message:["",[Ng.required]]})}userIsTyping(t){if(13===t.which)return t.preventDefault(),void this.onSendMessage();this.typingTimer&&clearTimeout(this.typingTimer),this.typingTimer=setTimeout(t=>{this.websocketSV.dispatch({id:this.selectedConversation._id,type:Im.TYPING,data:this.currentUser.firstname})},100)}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe())}}var $y=$n({encapsulation:0,styles:[["[_nghost-%COMP%]{background-color:#8a8a8a;padding:1rem;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column;position:relative}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1}[_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{border:0;padding:1rem;width:100%;font-size:1.75rem;border-radius:5px;color:#5f5f5f;height:100%}[_nghost-%COMP%]   div[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;padding:1rem 0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   app-emoji-picker[_ngcontent-%COMP%], [_nghost-%COMP%]   div[_ngcontent-%COMP%]   app-send-photo[_ngcontent-%COMP%]{margin-right:1.5rem}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{cursor:pointer;width:2.5rem;height:2.5rem;fill:#fff;margin-right:1.5rem}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .send[_ngcontent-%COMP%]{margin-left:auto;color:#34bdff;font-size:1.5rem;font-weight:600;cursor:pointer;text-transform:uppercase}[_nghost-%COMP%]   .typing[_ngcontent-%COMP%]{position:absolute;top:-3rem;font-size:1.25rem;color:#3e3e3e;font-weight:500;background:rgba(255,255,255,.4);border-radius:3px;padding:.25rem 1rem}"]],data:{}});function By(t){return Yi(0,[(t()(),Ri(0,0,null,null,10,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(t,e,n){var r=!0,s=t.component;return"submit"===e&&(r=!1!==Ur(t,2).onSubmit(n)&&r),"reset"===e&&(r=!1!==Ur(t,2).onReset()&&r),"submit"===e&&(r=!1!==s.onSendMessage()&&r),r}),null,null)),Qr(1,16384,null,0,Cm,[],null,null),Qr(2,540672,null,0,xm,[[8,null],[8,null]],{form:[0,"form"]},null),Jr(2048,null,kg,null,[xm]),Qr(4,16384,null,0,Ag,[[4,kg]],null,null),(t()(),Ri(5,0,[[1,0],["message",1]],null,5,"textarea",[["formControlName","message"],["id","message"],["placeholder","Message"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup"],[null,"blur"],[null,"input"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var r=!0,s=t.component;return"input"===e&&(r=!1!==Ur(t,6)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==Ur(t,6).onTouched()&&r),"compositionstart"===e&&(r=!1!==Ur(t,6)._compositionStart()&&r),"compositionend"===e&&(r=!1!==Ur(t,6)._compositionEnd(n.target.value)&&r),"keyup"===e&&(r=!1!==s.userIsTyping(n)&&r),"blur"===e&&(r=!1!==s.onBlur(n)&&r),r}),null,null)),Qr(6,16384,null,0,Sg,[tn,Ze,[2,xg]],null,null),Jr(1024,null,Cg,(function(t){return[t]}),[Sg]),Qr(8,671744,null,0,Pm,[[3,kg],[8,null],[8,null],[6,Cg],[2,wm]],{name:[0,"name"]},null),Jr(2048,null,Eg,null,[Pm]),Qr(10,16384,null,0,Tg,[[4,Eg]],null,null)],(function(t,e){t(e,2,0,e.component.form),t(e,8,0,"message")}),(function(t,e){t(e,0,0,Ur(e,4).ngClassUntouched,Ur(e,4).ngClassTouched,Ur(e,4).ngClassPristine,Ur(e,4).ngClassDirty,Ur(e,4).ngClassValid,Ur(e,4).ngClassInvalid,Ur(e,4).ngClassPending),t(e,5,0,Ur(e,10).ngClassUntouched,Ur(e,10).ngClassTouched,Ur(e,10).ngClassPristine,Ur(e,10).ngClassDirty,Ur(e,10).ngClassValid,Ur(e,10).ngClassInvalid,Ur(e,10).ngClassPending)}))}function zy(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"app-giphy",[],null,[[null,"onclose"],[null,"onselect"]],(function(t,e,n){var r=!0,s=t.component;return"onclose"===e&&(r=!1!==s.openGlyph(!1)&&r),"onselect"===e&&(r=!1!==s.selectGif(n)&&r),r}),Ey,xy)),Qr(1,638976,null,0,wy,[Op],{type:[0,"type"]},{onselect:"onselect",onclose:"onclose"})],(function(t,e){t(e,1,0,e.component.glyphType)}),null)}function Gy(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"span",[["class","typing"]],null,null,null,null,null)),(t()(),Wi(1,null,[""," is typing . . ."]))],null,(function(t,e){t(e,1,0,e.component.typing)}))}function Hy(t){return Yi(0,[Ui(671088640,1,{messageElement:0}),(t()(),Ii(16777216,null,null,1,null,By)),Qr(2,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Ii(16777216,null,null,1,null,zy)),Qr(4,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Ri(5,0,null,null,10,"div",[],null,null,null,null,null)),(t()(),Ri(6,0,null,null,1,"app-emoji-picker",[["field","message"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.openGlyph(!1)&&r),r}),Vy,Iy)),Qr(7,114688,null,0,Ty,[Ay],{field:[0,"field"]},null),(t()(),Ri(8,0,null,null,1,"app-send-photo",[],null,[[null,"onupload"]],(function(t,e,n){var r=!0;return"onupload"===e&&(r=!1!==t.component.onImageUpload(n)&&r),r}),jy,Uy)),Qr(9,114688,null,0,Fy,[Fv,Vm,ip],null,{onupload:"onupload"}),(t()(),Ri(10,0,null,null,1,":svg:svg",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.openGlyph(!0,"gifs")&&r),r}),null,null)),(t()(),Ri(11,0,null,null,0,":svg:use",[[":xlink:href","assets/images/icons.svg#icon-gif"]],null,null,null,null,null)),(t()(),Ri(12,0,null,null,1,":svg:svg",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.openGlyph(!0,"stickers")&&r),r}),null,null)),(t()(),Ri(13,0,null,null,0,":svg:use",[[":xlink:href","assets/images/icons.svg#icon-sticker"]],null,null,null,null,null)),(t()(),Ri(14,0,null,null,1,"a",[["class","send"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onSendMessage()&&r),r}),null,null)),(t()(),Wi(-1,null,["Send"])),(t()(),Ii(16777216,null,null,1,null,Gy)),Qr(17,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,!n.isGlyph),t(e,4,0,n.isGlyph),t(e,7,0,"message"),t(e,9,0),t(e,17,0,n.typing)}),null)}class qy{constructor(t,e){this.conversationSV=t,this.actionSV=e,this.subs=[],this.isAddMember=!1,this.isShowMembers=!1,this.isUpdateProfilePicture=!1,this.isLastPage=!1,this.pagination={page:1,limit:10}}ngOnInit(){this.subs=[this.watchConversationState(),this.watchAction()]}watchAction(){return this.actionSV.listen.subscribe(t=>{switch(t.action){case"ADD_MEMBER":this.isAddMember=t.data;break;case"SHOW_MEMBERS":this.isShowMembers=t.data;break;case"SHOW_UPDATE_PROFILE_PICTURE":this.isUpdateProfilePicture=t.data}})}watchConversationState(){return this.conversationSV.conversationState.subscribe(t=>{switch(t.action.name){case"[Conversation] SELECT":this.selectedConversation=null,setTimeout(()=>{this.selectedConversation=t.conversation.selected,this.isLastPage=!1});break;case"[Conversation] Remove":case"[Conversation] Group delete finish":-1===t.conversation.list.map(t=>t._id).indexOf(this.selectedConversation._id)&&(this.selectedConversation=null);break;case"[Conversation] Group Leave finish":this.selectedConversation=null;break;case"[Conversation] Load previous messages finish":this.isLastPage="last"===t.action.message}})}onScroll(t){0!==t.target.scrollTop||this.isLastPage||this.loadHistory()}loadHistory(){this.pagination.page+=1,this.conversationSV.getPreviousMessage({id:this.selectedConversation._id,pagination:this.pagination}).action()}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe())}}var Wy=$n({encapsulation:0,styles:[["[_nghost-%COMP%]{-webkit-box-flex:1;flex:1;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column}"]],data:{}});function Ky(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"app-add-member",[],null,null,null,Pv,_v)),Qr(1,245760,null,0,yv,[Qf,ip,ub,gg,fg,_b],null,null)],(function(t,e){t(e,1,0)}),null)}function Zy(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"app-members",[],null,null,null,Dv,Tv)),Qr(1,245760,null,0,Mv,[ub,gg,ip,Vm,Qf],null,null)],(function(t,e){t(e,1,0)}),null)}function Yy(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"app-profile-picture-update",[],null,null,null,jv,Uv)),Qr(1,114688,null,0,Vv,[Vm,gg,Qf,ip,Fv],null,null)],(function(t,e){t(e,1,0)}),null)}function Qy(t){return Yi(0,[(t()(),Ri(0,0,null,null,14,null,null,null,null,null,null,null)),(t()(),Ri(1,0,null,null,1,"app-active-conversation",[],null,null,null,Zv,$v)),Qr(2,245760,null,0,Lv,[gg,Vm,Qf,ub,ip],null,null),(t()(),Ri(3,0,null,null,1,"app-conversation",[["class","custom-scroll"]],null,[[null,"scroll"]],(function(t,e,n){var r=!0;return"scroll"===e&&(r=!1!==t.component.onScroll(n)&&r),r}),by,cy)),Qr(4,245760,null,0,ay,[ub,ip,Ze,_b,Vm,Xv],null,null),(t()(),Ri(5,0,null,null,1,"app-reply",[],null,null,null,Cy,yy)),Qr(6,245760,null,0,vy,[ub],null,null),(t()(),Ri(7,0,null,null,1,"app-send-message",[],null,null,null,Hy,$y)),Qr(8,245760,null,0,Ly,[ub,Mm,ip,_b,fg,Ay],null,null),(t()(),Ii(16777216,null,null,1,null,Ky)),Qr(10,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Ii(16777216,null,null,1,null,Zy)),Qr(12,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Ii(16777216,null,null,1,null,Yy)),Qr(14,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Ii(0,null,null,0))],(function(t,e){var n=e.component;t(e,2,0),t(e,4,0),t(e,6,0),t(e,8,0),t(e,10,0,n.isAddMember),t(e,12,0,n.isShowMembers),t(e,14,0,n.isUpdateProfilePicture)}),null)}function Xy(t){return Yi(0,[(t()(),Ii(16777216,null,null,1,null,Qy)),Qr(1,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){t(e,1,0,e.component.selectedConversation)}),null)}class Jy{constructor(t,e,n,r){this.actionSV=t,this.sessionSV=e,this.websocketSV=n,this.userSV=r,this.showFriends=!1,this.onlineUsers=[]}ngOnInit(){this.currentUser=this.sessionSV.data.user,this.subs=[this.watchActions(),this.watchWebsocketOnlineKaba(),this.watchWebsocketOoOnlineAko(),this.watchOnlineUsers()]}watchActions(){return this.actionSV.listen.subscribe(t=>{switch(t.action){case"FRIENDS_SHOW":this.showFriends=t.data.value}})}watchWebsocketOoOnlineAko(){return this.websocketSV.listen(Im.OO_ONLINE_AKO,this.currentUser._id).subscribe(t=>{this.appendNewUserOnline(t)})}watchWebsocketOnlineKaba(){return this.websocketSV.listen(Im.ONLINE_KABA,this.currentUser._id).subscribe(t=>{this.appendNewUserOnline({user:t,online:!0}),this.ooOnlineAko(t)})}appendNewUserOnline(t){t.online&&this.onlineUsers.filter(e=>e._id===t.user._id).length>0||this.userSV.actionUserOnline(t)}ooOnlineAko(t){t._id!==this.currentUser._id&&this.websocketSV.dispatch({id:t._id,type:Im.OO_ONLINE_AKO,data:{user:this.currentUser,online:!0}})}watchOnlineUsers(){return this.userSV.friendState.subscribe(t=>{"[Friend] User online"===t.action.name&&(this.onlineUsers=t.users.onlines)})}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe())}}var t_=$n({encapsulation:0,styles:[["[_nghost-%COMP%]{background:#cee5ef;height:100vh;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.container[_ngcontent-%COMP%]{width:100%;max-width:85rem;height:90%;background:#fff;border-radius:5px;overflow:hidden;display:-webkit-box;display:flex;box-shadow:0 10px 12px -15px #333}@media (max-width:750px){.container[_ngcontent-%COMP%]{height:100vh;border-radius:0}}"]],data:{}});function e_(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"app-friends",[],null,null,null,Ib,Cb)),Qr(1,245760,null,0,Nm,[gg,Qf,ip,Vm,fg,ub,_b],null,null)],(function(t,e){t(e,1,0)}),null)}function n_(t){return Yi(0,[(t()(),Ri(0,0,null,null,4,"div",[["class","container"]],null,null,null,null,null)),(t()(),Ri(1,0,null,null,1,"app-side",[],null,null,null,vv,pv)),Qr(2,114688,null,0,dv,[Ze,tn,gg],null,null),(t()(),Ri(3,0,null,null,1,"app-main",[],null,null,null,Xy,Wy)),Qr(4,245760,null,0,qy,[ub,gg],null,null),(t()(),Ii(16777216,null,null,1,null,e_)),Qr(6,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0),t(e,4,0),t(e,6,0,n.showFriends)}),null)}function r_(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"app-chatboxx",[],null,null,null,n_,t_)),Qr(1,245760,null,0,Jy,[gg,ip,_b,Qf],null,null)],(function(t,e){t(e,1,0)}),null)}var s_=Pr("app-chatboxx",Jy,r_,{},{},[]);let i_=(()=>{class t{constructor(){this.event=new P}start(){this.event.next({event:"START"})}end(){this.event.next({event:"END"})}get watch(){return new C(t=>{this.event.subscribe(e=>{t.next(e.event)})})}}return t.ngInjectableDef=ft({factory:function(){return new t},token:t,providedIn:"root"}),t})();const o_=new kt("WaitConfig");let l_=(()=>class{constructor(t,e){this.config=t,this.service=e,this.show=!1,this.configData={text:"Please Wait",type:"TEXT",color:{text:"#fff",spinner:"#fff",overlay:"rgba(51, 51, 51, 0.8)"}},this.isTextType=!1,this.isSpinnerType=!1,this.configData=Object.assign({},this.configData,this.config),this.isTextType="TEXT"===this.config.type||"TEXT_SPINNER"===this.config.type,this.isSpinnerType="SPINNER"===this.config.type||"TEXT_SPINNER"===this.config.type}ngOnInit(){this.subs=this.service.watch.subscribe(t=>{this.show="START"===t})}ngOnDestroy(){this.subs.unsubscribe()}})(),a_=(()=>{class t{static forRoot(e){return{ngModule:t,providers:[i_,{provide:o_,useValue:e}]}}}return t})();var c_=$n({encapsulation:0,styles:[".jk-wait[_ngcontent-%COMP%]{position:fixed;left:0;top:0;width:100%;height:100%;background:rgba(51,51,51,.8);display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column;color:#fff;z-index:990}.jk-wait__text[_ngcontent-%COMP%]{font-size:1rem;margin:0}.jk-wait__spinner[_ngcontent-%COMP%]{fill:#fff}"],data:{}});function u_(t){return Yi(0,[(t()(),Ri(0,0,null,null,4,"p",[["class","jk-wait__text"]],null,null,null,null,null)),Jr(512,null,sa,ia,[Ze,mn,tn]),Qr(2,278528,null,0,la,[sa],{ngStyle:[0,"ngStyle"]},null),Hi(3,{color:0}),(t()(),Wi(4,null,["",""]))],(function(t,e){var n=t(e,3,0,e.component.configData.color.text);t(e,2,0,n)}),(function(t,e){t(e,4,0,e.component.configData.text)}))}function h_(t){return Yi(0,[(t()(),Ri(0,0,null,null,39,":svg:svg",[[":xmlns:xlink","http://www.w3.org/1999/xlink"],["class","jk-wait__spinner"],["height","50px"],["preserveAspectRatio","xMidYMid"],["viewBox","0 0 100 100"],["width","50px"],["xmlns","http://www.w3.org/2000/svg"]],null,null,null,null,null)),Jr(512,null,sa,ia,[Ze,mn,tn]),Qr(2,278528,null,0,la,[sa],{ngStyle:[0,"ngStyle"]},null),Hi(3,{fill:0}),(t()(),Ri(4,0,null,null,2,":svg:g",[["transform","rotate(0 50 50)"]],null,null,null,null,null)),(t()(),Ri(5,0,null,null,1,":svg:rect",[["height","12"],["rx","3"],["ry","6"],["width","6"],["x","47"],["y","24"]],null,null,null,null,null)),(t()(),Ri(6,0,null,null,0,":svg:animate",[["attributeName","opacity"],["begin","-0.9166666666666666s"],["dur","1s"],["keyTimes","0;1"],["repeatCount","indefinite"],["values","1;0"]],null,null,null,null,null)),(t()(),Ri(7,0,null,null,2,":svg:g",[["transform","rotate(30 50 50)"]],null,null,null,null,null)),(t()(),Ri(8,0,null,null,1,":svg:rect",[["height","12"],["rx","3"],["ry","6"],["width","6"],["x","47"],["y","24"]],null,null,null,null,null)),(t()(),Ri(9,0,null,null,0,":svg:animate",[["attributeName","opacity"],["begin","-0.8333333333333334s"],["dur","1s"],["keyTimes","0;1"],["repeatCount","indefinite"],["values","1;0"]],null,null,null,null,null)),(t()(),Ri(10,0,null,null,2,":svg:g",[["transform","rotate(60 50 50)"]],null,null,null,null,null)),(t()(),Ri(11,0,null,null,1,":svg:rect",[["height","12"],["rx","3"],["ry","6"],["width","6"],["x","47"],["y","24"]],null,null,null,null,null)),(t()(),Ri(12,0,null,null,0,":svg:animate",[["attributeName","opacity"],["begin","-0.75s"],["dur","1s"],["keyTimes","0;1"],["repeatCount","indefinite"],["values","1;0"]],null,null,null,null,null)),(t()(),Ri(13,0,null,null,2,":svg:g",[["transform","rotate(90 50 50)"]],null,null,null,null,null)),(t()(),Ri(14,0,null,null,1,":svg:rect",[["height","12"],["rx","3"],["ry","6"],["width","6"],["x","47"],["y","24"]],null,null,null,null,null)),(t()(),Ri(15,0,null,null,0,":svg:animate",[["attributeName","opacity"],["begin","-0.6666666666666666s"],["dur","1s"],["keyTimes","0;1"],["repeatCount","indefinite"],["values","1;0"]],null,null,null,null,null)),(t()(),Ri(16,0,null,null,2,":svg:g",[["transform","rotate(120 50 50)"]],null,null,null,null,null)),(t()(),Ri(17,0,null,null,1,":svg:rect",[["height","12"],["rx","3"],["ry","6"],["width","6"],["x","47"],["y","24"]],null,null,null,null,null)),(t()(),Ri(18,0,null,null,0,":svg:animate",[["attributeName","opacity"],["begin","-0.5833333333333334s"],["dur","1s"],["keyTimes","0;1"],["repeatCount","indefinite"],["values","1;0"]],null,null,null,null,null)),(t()(),Ri(19,0,null,null,2,":svg:g",[["transform","rotate(150 50 50)"]],null,null,null,null,null)),(t()(),Ri(20,0,null,null,1,":svg:rect",[["height","12"],["rx","3"],["ry","6"],["width","6"],["x","47"],["y","24"]],null,null,null,null,null)),(t()(),Ri(21,0,null,null,0,":svg:animate",[["attributeName","opacity"],["begin","-0.5s"],["dur","1s"],["keyTimes","0;1"],["repeatCount","indefinite"],["values","1;0"]],null,null,null,null,null)),(t()(),Ri(22,0,null,null,2,":svg:g",[["transform","rotate(180 50 50)"]],null,null,null,null,null)),(t()(),Ri(23,0,null,null,1,":svg:rect",[["height","12"],["rx","3"],["ry","6"],["width","6"],["x","47"],["y","24"]],null,null,null,null,null)),(t()(),Ri(24,0,null,null,0,":svg:animate",[["attributeName","opacity"],["begin","-0.4166666666666667s"],["dur","1s"],["keyTimes","0;1"],["repeatCount","indefinite"],["values","1;0"]],null,null,null,null,null)),(t()(),Ri(25,0,null,null,2,":svg:g",[["transform","rotate(210 50 50)"]],null,null,null,null,null)),(t()(),Ri(26,0,null,null,1,":svg:rect",[["height","12"],["rx","3"],["ry","6"],["width","6"],["x","47"],["y","24"]],null,null,null,null,null)),(t()(),Ri(27,0,null,null,0,":svg:animate",[["attributeName","opacity"],["begin","-0.3333333333333333s"],["dur","1s"],["keyTimes","0;1"],["repeatCount","indefinite"],["values","1;0"]],null,null,null,null,null)),(t()(),Ri(28,0,null,null,2,":svg:g",[["transform","rotate(240 50 50)"]],null,null,null,null,null)),(t()(),Ri(29,0,null,null,1,":svg:rect",[["height","12"],["rx","3"],["ry","6"],["width","6"],["x","47"],["y","24"]],null,null,null,null,null)),(t()(),Ri(30,0,null,null,0,":svg:animate",[["attributeName","opacity"],["begin","-0.25s"],["dur","1s"],["keyTimes","0;1"],["repeatCount","indefinite"],["values","1;0"]],null,null,null,null,null)),(t()(),Ri(31,0,null,null,2,":svg:g",[["transform","rotate(270 50 50)"]],null,null,null,null,null)),(t()(),Ri(32,0,null,null,1,":svg:rect",[["height","12"],["rx","3"],["ry","6"],["width","6"],["x","47"],["y","24"]],null,null,null,null,null)),(t()(),Ri(33,0,null,null,0,":svg:animate",[["attributeName","opacity"],["begin","-0.16666666666666666s"],["dur","1s"],["keyTimes","0;1"],["repeatCount","indefinite"],["values","1;0"]],null,null,null,null,null)),(t()(),Ri(34,0,null,null,2,":svg:g",[["transform","rotate(300 50 50)"]],null,null,null,null,null)),(t()(),Ri(35,0,null,null,1,":svg:rect",[["height","12"],["rx","3"],["ry","6"],["width","6"],["x","47"],["y","24"]],null,null,null,null,null)),(t()(),Ri(36,0,null,null,0,":svg:animate",[["attributeName","opacity"],["begin","-0.08333333333333333s"],["dur","1s"],["keyTimes","0;1"],["repeatCount","indefinite"],["values","1;0"]],null,null,null,null,null)),(t()(),Ri(37,0,null,null,2,":svg:g",[["transform","rotate(330 50 50)"]],null,null,null,null,null)),(t()(),Ri(38,0,null,null,1,":svg:rect",[["height","12"],["rx","3"],["ry","6"],["width","6"],["x","47"],["y","24"]],null,null,null,null,null)),(t()(),Ri(39,0,null,null,0,":svg:animate",[["attributeName","opacity"],["begin","0s"],["dur","1s"],["keyTimes","0;1"],["repeatCount","indefinite"],["values","1;0"]],null,null,null,null,null))],(function(t,e){var n=t(e,3,0,e.component.configData.color.spinner);t(e,2,0,n)}),null)}function d_(t){return Yi(0,[{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:null,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:0}},(t()(),Ii(0,null,null,0))],null,null)}function p_(t){return Yi(0,[(t()(),Ri(0,0,null,null,9,"div",[["class","jk-wait"]],null,null,null,null,null)),Jr(512,null,sa,ia,[Ze,mn,tn]),Qr(2,278528,null,0,la,[sa],{ngStyle:[0,"ngStyle"]},null),Hi(3,{background:0}),(t()(),Ii(16777216,null,null,1,null,u_)),Qr(5,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Ii(16777216,null,null,1,null,h_)),Qr(7,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null),(t()(),Ii(16777216,null,null,1,null,d_)),Qr(9,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component,r=t(e,3,0,n.configData.color.overlay);t(e,2,0,r),t(e,5,0,n.isTextType),t(e,7,0,n.isSpinnerType),t(e,9,0,"CUSTOM"===n.configData.type)}),null)}function f_(t){return Yi(0,[(t()(),Ii(16777216,null,null,1,null,p_)),Qr(1,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){t(e,1,0,e.component.show)}),null)}var g_=$n({encapsulation:0,styles:[".container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:990;background:rgba(51,51,51,.85);width:100%;height:100%;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;font-size:10px;font-family:monospace}.alert[_ngcontent-%COMP%]{width:25em;box-shadow:0 3px 9px -4px #000;border-radius:3px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column;overflow:hidden;-webkit-transform:translateY(-80px);transform:translateY(-80px)}.alert--0[_ngcontent-%COMP%]   .alert__title[_ngcontent-%COMP%]{background:#427942;color:#fff}.alert--0[_ngcontent-%COMP%]   .alert__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#70b170}.alert--0[_ngcontent-%COMP%]   .alert__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#427942}.alert--1[_ngcontent-%COMP%]   .alert__title[_ngcontent-%COMP%]{background:#ca4242;color:#fff}.alert--1[_ngcontent-%COMP%]   .alert__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#e09292}.alert--1[_ngcontent-%COMP%]   .alert__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#ca4242}.alert--2[_ngcontent-%COMP%]   .alert__title[_ngcontent-%COMP%]{background:#3370f9;color:#fff}.alert--2[_ngcontent-%COMP%]   .alert__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#96b5fc}.alert--2[_ngcontent-%COMP%]   .alert__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#3370f9}.alert--3[_ngcontent-%COMP%]   .alert__title[_ngcontent-%COMP%]{background:#ce942b;color:#fff}.alert--3[_ngcontent-%COMP%]   .alert__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#e4bf7b}.alert--3[_ngcontent-%COMP%]   .alert__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#ce942b}.alert--4[_ngcontent-%COMP%]   .alert__title[_ngcontent-%COMP%]{background:#d66a1d;color:#fff}.alert--4[_ngcontent-%COMP%]   .alert__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#eba26e}.alert--4[_ngcontent-%COMP%]   .alert__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#d66a1d}.alert__title[_ngcontent-%COMP%]{width:100%;padding:1em;display:block;box-sizing:border-box;margin:0;font-size:1.5em}.alert__message[_ngcontent-%COMP%]{font-size:1.5em;padding:1em;text-align:center;font-weight:500;line-height:1.25;background:#fff;width:100%;margin:0;box-sizing:border-box}.alert__buttons[_ngcontent-%COMP%]{padding:1em;background:#fff;width:100%;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;box-sizing:border-box}.alert__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:0;color:#fff;background:#adb8ca;padding:.5em;border-radius:0;min-width:5em;cursor:pointer;font-size:1.5em;-webkit-transition:.25s ease-in;transition:.25s ease-in;font-family:monospace}.alert__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:.5em}.alert__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#828ea2}"],data:{}});function m_(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.answer(t.context.index)&&r),r}),null,null)),(t()(),Wi(1,null,["",""]))],null,(function(t,e){t(e,1,0,e.context.$implicit)}))}function b_(t){return Yi(0,[(t()(),Ri(0,0,null,null,8,"div",[["class","container"]],null,null,null,null,null)),(t()(),Ri(1,0,null,null,7,"div",[],[[8,"className",0]],null,null,null,null)),(t()(),Ri(2,0,null,null,1,"h2",[["class","alert__title"]],null,null,null,null,null)),(t()(),Wi(3,null,["",""])),(t()(),Ri(4,0,null,null,1,"p",[["class","alert__message"]],null,null,null,null,null)),(t()(),Wi(5,null,["",""])),(t()(),Ri(6,0,null,null,2,"div",[["class","alert__buttons"]],null,null,null,null,null)),(t()(),Ii(16777216,null,null,1,null,m_)),Qr(8,278528,null,0,Yl,[Sn,wn,gn],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,8,0,e.component.alert.buttons)}),(function(t,e){var n,r=e.component;t(e,1,0,"alert alert--"+(null!=(n=r.alert.type)?n.toString():"")),t(e,3,0,r.alert.title),t(e,5,0,r.alert.message)}))}function v_(t){return Yi(0,[(t()(),Ii(16777216,null,null,1,null,b_)),Qr(1,16384,null,0,Xl,[Sn,wn],{ngIf:[0,"ngIf"]},null)],(function(t,e){t(e,1,0,e.component.show)}),null)}var y_=$n({encapsulation:0,styles:[[""]],data:{}});function __(t){return Yi(0,[(t()(),Ri(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),Qr(1,212992,null,0,Id,[Ad,Sn,ze,[8,null],bn],null,null),(t()(),Ri(2,0,null,null,1,"ng-jk-wait",[],null,null,null,f_,c_)),Qr(3,245760,null,0,l_,[o_,i_],null,null),(t()(),Ri(4,0,null,null,1,"ng-jk-alert",[],null,null,null,v_,g_)),Qr(5,245760,null,0,Fm,[Vm,Ze],null,null)],(function(t,e){t(e,1,0),t(e,3,0),t(e,5,0)}),null)}function C_(t){return Yi(0,[(t()(),Ri(0,0,null,null,1,"app-root",[],null,null,null,__,y_)),Qr(1,49152,null,0,il,[],null,null)],null,null)}var w_=Pr("app-root",il,C_,{},{},[]);class x_{constructor(t,e){this.injector=t,this.route=e}intercept(t,e){const n=t.headers.get("loading")||"default",r=t.headers.get("assets")?t.headers.get("assets"):"false",s=t.headers.get("external")?t.headers.get("external"):"false";this.loading=this.loading||this.injector.get(i_),this.jkAlert=this.jkAlert||this.injector.get(Vm),this.sessionSV=this.sessionSV||this.injector.get(ip),"background"!==n&&this.loading.start();const i="true"===r||"true"===s?t.url:`https://app-chatbox.herokuapp.com/${t.url}`,o="true"===s?{}:{Authorization:`Bearer ${this.sessionSV.data?this.sessionSV.data.token:""}`},l=(t=(t=t.clone({headers:t.headers.delete("external","true")})).clone({headers:t.headers.delete("loading","background")})).clone({setHeaders:Object.assign({},o),url:i});return e.handle(l).pipe(Ba(t=>(this.showErrorMessage(t),Kp(t))),sc(()=>{this.loading.end()}),Ra(t=>t))}showErrorMessage(t){switch(t.status){case 403:this.jkAlert.error("Session Expired"),this.sessionSV.logout(),this.route.navigate([""]);break;case 400:const e=t.error.message[0].constraints,n=Object.keys(e);this.jkAlert.error(e[n[0]]);break;default:this.jkAlert.error(t.message)}}}let S_=(()=>{class t{constructor(t,e){this.router=t,this.sessionSV=e}canActivate(t,e){return!this.sessionSV.data||(this.router.navigate(["chat"]),!1)}}return t.ngInjectableDef=ft({factory:function(){return new t(Rt(Md),Rt(ip))},token:t,providedIn:"root"}),t})(),O_=(()=>{class t{constructor(t,e){this.router=t,this.sessionSV=e}canActivate(t,e){return!!this.sessionSV.data||(this.router.navigate([""]),!1)}}return t.ngInjectableDef=ft({factory:function(){return new t(Rt(Md),Rt(ip))},token:t,providedIn:"root"}),t})();class k_{}class P_{}const E_={action:{name:""},conversation:{type:null,list:[],messages:[]}};function M_(t=E_,e){const{payload:n,type:r}=e;let s=null;switch(r){case"[Conversation] Action reset":s=Object.assign({},t,{action:{name:""}});break;case"[Conversation] list load":s=Object.assign({},t,{action:{name:r},conversation:Object.assign({},t.conversation,{type:n.type})});break;case"[Conversation] list load finish":s={action:{name:r},conversation:Object.assign({},t.conversation,{list:n.data})};break;case"[Conversation] SELECT":s={action:{name:r},conversation:Object.assign({},t.conversation,{selected:n})};break;case"[Conversation] Load messages":s={action:{name:r,message:n.message,statusCode:n.statusCode},conversation:Object.assign({},t.conversation,{messages:n.data})};break;case"[Conversation] Send message":s={action:{name:r},conversation:Object.assign({},t.conversation,{messages:[...t.conversation.messages,n]})};break;case"[Conversation] Add":s={action:{name:r},conversation:Object.assign({},t.conversation,{list:[n,...t.conversation.list]})};break;case"[Conversation] Remove":s={action:{name:r},conversation:Object.assign({},t.conversation,{list:t.conversation.list.filter(t=>t._id!==n)})};break;case"[Conversation] Group create finish":s=Object.assign({},t,{action:{name:r},conversation:Object.assign({},t.conversation,{list:[n.data,...t.conversation.list]})});break;case"[Conversation] Group Leave finish":s=Object.assign({},t,{action:{name:r},conversation:Object.assign({},t.conversation,{list:t.conversation.list.filter(t=>t._id!==n.conversation)})});break;case"[Conversation] Group delete finish":s=Object.assign({},t,{action:{name:r},conversation:Object.assign({},t.conversation,{list:t.conversation.list.filter(t=>t._id!==n)})});break;case"[Conversation] add member finish":s=Object.assign({},t,{action:{name:r},conversation:Object.assign({},t.conversation,{selected:Object.assign({},t.conversation.selected,{members:[...t.conversation.selected.members,n]}),list:t.conversation.list.map(e=>(e._id===t.conversation.selected._id&&e.members.push(n),e))})});break;case"[Conversation] Load previous messages":s=Object.assign({},t,{action:{name:r}});break;case"[Conversation] Load previous messages finish":const e=t.conversation.messages.map(t=>t._id),i=n.data.filter(t=>!(e.indexOf(t._id)>=0));s={action:{name:r,statusCode:n.statusCode,message:i.length!==n.data.length?"last":n.message},conversation:Object.assign({},t.conversation,{messages:[...i,...t.conversation.messages]})};break;case"[Conversation] Group user remove finish":s={action:{name:r},conversation:Object.assign({},t.conversation,{list:t.conversation.list.map(e=>(t.conversation.selected._id===e._id&&(e.members=e.members.filter(t=>t._id!==n.user)),e)),selected:Object.assign({},t.conversation.selected,{members:t.conversation.selected.members.filter(t=>t._id!==n.user)})})};break;case"[Conversation] group rename":s=Object.assign({},t,{action:{name:r},conversation:Object.assign({},t.conversation,{list:t.conversation.list.map(e=>(t.conversation.selected._id===e._id&&(e.name=n.name),e)),selected:Object.assign({},t.conversation.selected,{name:n.name})})});break;case"[Conversation] Message react":s=Object.assign({},t,{action:{name:r}});break;case"[Conversation] Message react finish":s={action:{name:r},conversation:Object.assign({},t.conversation,{messages:t.conversation.messages.map(t=>{if(t._id===n.messageId){t.reactions||(t.reactions=[]);let e=!1;t.reactions.map(t=>{const{reaction:r}=n;return t.by._id===r.by._id&&(t.reaction=r.reaction,t.emoji=r.emoji,e=!0),t}),e||t.reactions.push(n.reaction)}return t})})};break;case"[Conversation] Message update temporary id":s=Object.assign({},t,{action:{name:r},conversation:Object.assign({},t.conversation,{messages:t.conversation.messages.map(t=>(t._id===n.temporary&&(t._id=n.permanent),t))})});break;case"[Conversation] Message reply":s={action:{name:r},conversation:Object.assign({},t.conversation,{reply:n})};break;default:s=t}return s}const T_={action:{name:""},users:{type:null,list:[],search:"",pagination:{page:0,limit:10,total:0},onlines:[]}};function A_(t=T_,e){const{payload:n,type:r}=e;let s=null;switch(r){case"[Friend] load user list":s=Object.assign({},t,{action:{name:r},users:Object.assign({},t.users,{pagination:n.pagination,search:n.search})});break;case"[Friend] load user list finish":s={action:{name:r},users:Object.assign({},t.users,{type:n.type,list:n.response.data.list,pagination:Object.assign({},t.users.pagination,{total:n.response.data.total})})};break;case"[Friend] User online":const e=[...t.users.onlines,n.user],i=t.users.onlines.filter(t=>t._id!==n.user._id);s={action:{name:r},users:Object.assign({},t.users,{onlines:n.online?e:i})};break;default:s=t}return s}const I_={action:{name:""},notification:{list:[]}};function R_(t=I_,e){const{payload:n,type:r}=e;let s=null;switch(r){case"[Notification] list load finish":s={action:{name:r},notification:Object.assign({},t.notification,{list:n.data.reverse()})};break;case"[Notification] live update":s={action:{name:r},notification:Object.assign({},t.notification,{list:[n,...t.notification.list]})};break;case"[Notification] Delete":s={action:{name:r},notification:Object.assign({},t.notification,{list:t.notification.list.filter(t=>t._id!==n.userid&&n.reference!==t.reference)})};break;case"[Notification] Delete by type":s={action:{name:r},notification:Object.assign({},t.notification,{list:t.notification.list.filter(t=>t.type!==n.type)})};break;case"[Notification] Seen":s={action:{name:r},notification:Object.assign({},t.notification,{list:t.notification.list.map(t=>(t.seen=!0,t))})};break;default:s=t}return s}class N_{call(t,e){return e.subscribe(new D_(t))}}class D_ extends g{_next(t){}}class V_{call(t,e){return e.subscribe(new F_(t))}}class F_ extends g{constructor(t){super(t)}_next(t){this.destination.next(Yp.createNext(t))}_error(t){const e=this.destination;e.next(Yp.createError(t)),e.complete()}_complete(){const t=this.destination;t.next(Yp.createComplete()),t.complete()}}function U_(t,e,n,r){return s=>s.lift(new j_(t,e,n,r))}class j_{constructor(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}call(t,e){return e.subscribe(new L_(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))}}class L_ extends g{constructor(t,e,n,r,s){super(t),this.keySelector=e,this.elementSelector=n,this.durationSelector=r,this.subjectSelector=s,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}_next(t){let e;try{e=this.keySelector(t)}catch(n){return void this.error(n)}this._group(t,e)}_group(t,e){let n=this.groups;n||(n=this.groups=new Map);let r,s=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(i){this.error(i)}else r=t;if(!s){s=this.subjectSelector?this.subjectSelector():new P,n.set(e,s);const t=new B_(e,s,this);if(this.destination.next(t),this.durationSelector){let t;try{t=this.durationSelector(new B_(e,s))}catch(i){return void this.error(i)}this.add(t.subscribe(new $_(e,s,this)))}}s.closed||s.next(r)}_error(t){const e=this.groups;e&&(e.forEach((e,n)=>{e.error(t)}),e.clear()),this.destination.error(t)}_complete(){const t=this.groups;t&&(t.forEach((t,e)=>{t.complete()}),t.clear()),this.destination.complete()}removeGroup(t){this.groups.delete(t)}unsubscribe(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&super.unsubscribe())}}class $_ extends g{constructor(t,e,n){super(e),this.key=t,this.group=e,this.parent=n}_next(t){this.complete()}_unsubscribe(){const{parent:t,key:e}=this;this.key=this.parent=null,t&&t.removeGroup(e)}}class B_ extends C{constructor(t,e,n){super(),this.key=t,this.groupSubject=e,this.refCountSubscription=n}_subscribe(t){const e=new d,{refCountSubscription:n,groupSubject:r}=this;return n&&!n.closed&&e.add(new z_(n)),e.add(r.subscribe(t)),e}}class z_ extends d{constructor(t){super(),this.parent=t,t.count++}unsubscribe(){const t=this.parent;t.closed||this.closed||(super.unsubscribe(),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())}}class G_{constructor(t){this.project=t}call(t,e){return e.subscribe(new H_(t,this.project))}}class H_ extends ${constructor(t,e){super(t),this.project=e,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}_next(t){this.hasSubscription||this.tryNext(t)}tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.hasSubscription=!0,this._innerSub(e,t,n)}_innerSub(t,e,n){const r=new T(this,void 0,void 0);this.destination.add(r),L(this,t,e,n,r)}_complete(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,r,s){this.destination.next(e)}notifyError(t){this.destination.error(t)}notifyComplete(t){this.destination.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}class q_{call(t,e){return e.subscribe(new W_(t))}}class W_ extends g{constructor(t){super(t)}_next(t){t.observe(this.destination)}}const K_={dispatch:!0,resubscribeOnError:!0};function Z_(t){return Object.getOwnPropertyNames(t).filter(e=>t[e]&&t[e].hasOwnProperty("__@ngrx/effects_create__")).map(e=>Object.assign({propertyName:e},t[e]["__@ngrx/effects_create__"]))}function Y_(t){return Object.getPrototypeOf(t)}function Q_(t={}){return function(e,n){var r,s;r=e,s=Object.assign({},K_,t,{propertyName:n}),J_(r)?r.constructor["__@ngrx/effects__"].push(s):Object.defineProperty(r.constructor,"__@ngrx/effects__",{value:[s]})}}function X_(t){return wf(tC,Y_)(t)}function J_(t){return t.constructor.hasOwnProperty("__@ngrx/effects__")}function tC(t){return J_(t)?t.constructor["__@ngrx/effects__"]:[]}let eC=(()=>{class t extends C{constructor(t){super(),t&&(this.source=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}}return t})();function nC(...t){return Oa(e=>t.some(t=>"string"==typeof t?t===e.type:t.type===e.type))}let rC=(()=>class extends P{constructor(t,e){super(),this.errorHandler=t,this.store=e}addEffects(t){this.next(t),"ngrxOnInitEffects"in t&&"function"==typeof t.ngrxOnInitEffects&&this.store.dispatch(t.ngrxOnInitEffects())}toActions(){return this.pipe(U_(Y_),W(t=>t.pipe(U_(sC))),W(t=>{return t.pipe(function t(e,n){return n?r=>r.pipe(t((t,r)=>q(e(t,r)).pipe(B((e,s)=>n(t,e,r,s))))):t=>t.lift(new G_(e))}((e=this.errorHandler,t=>{const n=function(t,e){const n=Y_(t).constructor.name;return X(...(r=t,[X_,Z_].reduce((t,e)=>t.concat(e(r)),[])).map(({propertyName:r,dispatch:s,resubscribeOnError:i})=>{const o="function"==typeof t[r]?t[r]():t[r],l=i?function t(e,n){return e.pipe(Ba(r=>(n&&n.handleError(r),t(e,n))))}(o,e):o;return!1===s?l.pipe((function(t){return t.lift(new N_)})):l.pipe((function(t){return t.lift(new V_)})).pipe(B(e=>({effect:t[r],notification:e,propertyName:r,sourceName:n,sourceInstance:t})))}));var r}(t,e);return function(t){const e=Y_(t);return"ngrxOnRunEffects"in e&&"function"==typeof e.ngrxOnRunEffects}(t)?t.ngrxOnRunEffects(n):n})),B(t=>(function(t,e){if("N"===t.notification.kind){const n=t.notification.value;!function(t){return"function"!=typeof t&&t&&t.type&&"string"==typeof t.type}(n)&&e.handleError(new Error(`Effect ${function({propertyName:t,sourceInstance:e,sourceName:n}){const r="function"==typeof e[t];return`"${n}.${String(t)}${r?"()":""}"`}(t)} dispatched an invalid action: ${function(t){try{return JSON.stringify(t)}catch(e){return t}}(n)}`))}}(t,this.errorHandler),t.notification)),Oa(t=>"N"===t.kind),(function(t){return t.lift(new q_)}));var e}))}})();function sC(t){return"ngrxOnIdentifyEffects"in t&&"function"==typeof t.ngrxOnIdentifyEffects?t.ngrxOnIdentifyEffects():""}const iC=new kt("@ngrx/effects Internal Root Guard"),oC=new kt("ngrx/effects: Root Effects");let lC=(()=>class{constructor(t,e){this.effectSources=t,this.store=e,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}})(),aC=(()=>class{constructor(t,e,n,r,s,i,o){this.sources=t,e.start(),r.forEach(e=>t.addEffects(e)),n.dispatch({type:"@ngrx/effects/init"})}addEffects(t){this.sources.addEffects(t)}})();function cC(...t){return t}function uC(t){if(t)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}let hC=(()=>{class t{constructor(t,e,n){this.action$=t,this.convoSV=e,this.reactSV=n,this.loadList=this.action$.pipe(nC("[Conversation] list load"),Qa(t=>{const{id:e,type:n}=t.payload;return this.convoSV.getConversations({id:e,type:n}).http().pipe(B(t=>new Lm(t)))})),this.loadConversationMessages=this.action$.pipe(nC("[Conversation] SELECT"),Qa(t=>{const{_id:e}=t.payload;return this.convoSV.getMessages(e).pipe(B(t=>new Bm(t)))})),this.createGroup=this.action$.pipe(nC("[Conversation] Group create"),Qa(t=>this.convoSV.createGroup(t.payload).http().pipe(B(t=>new Km(t))))),this.leaveGroup=this.action$.pipe(nC("[Conversation] Group Leave"),Qa(t=>this.convoSV.leaveGroup(t.payload).http().pipe(B(e=>new Ym(t.payload))))),this.removeUserOnGroup=this.action$.pipe(nC("[Conversation] Group user remove"),Qa(t=>this.convoSV.leaveGroup(t.payload).http().pipe(B(e=>new Xm(t.payload))))),this.deleteGroup=this.action$.pipe(nC("[Conversation] Group delete"),Qa(t=>this.convoSV.deleteGroup(t.payload).http().pipe(B(e=>new tb(t.payload))))),this.addMemberGroup=this.action$.pipe(nC("[Conversation] Group add member"),Qa(t=>this.convoSV.addMember({user:t.payload.user._id,conversation:t.payload.conversation}).http().pipe(B(e=>new nb(t.payload.user))))),this.getPreviousMessage=this.action$.pipe(nC("[Conversation] Load previous messages"),Qa(t=>this.convoSV.getPreviousMessage({id:t.payload.id,pagination:t.payload.pagination}).http().pipe(B(t=>new sb(t))))),this.messageReact=this.action$.pipe(nC("[Conversation] Message react"),Qa(t=>{const e=t.payload;return this.reactSV.react({messageId:e.messageId,reaction:{by:e.reaction.by._id,reaction:e.reaction.reaction}}).http().pipe(B(e=>new lb(t.payload)))}))}}return hb([Q_()],t.prototype,"loadList",void 0),hb([Q_()],t.prototype,"loadConversationMessages",void 0),hb([Q_()],t.prototype,"createGroup",void 0),hb([Q_()],t.prototype,"leaveGroup",void 0),hb([Q_()],t.prototype,"removeUserOnGroup",void 0),hb([Q_()],t.prototype,"deleteGroup",void 0),hb([Q_()],t.prototype,"addMemberGroup",void 0),hb([Q_()],t.prototype,"getPreviousMessage",void 0),hb([Q_()],t.prototype,"messageReact",void 0),t})(),dC=(()=>{class t{constructor(t,e){this.action$=t,this.userSV=e,this.loadFriendList=this.action$.pipe(nC("[Friend] load user list"),Qa(t=>{let e;const{id:n,pagination:r,search:s,type:i}=t.payload;switch(i){case ig.INVITE:e=this.userSV.getUsers({id:n,search:s,pagination:r});break;case ig.FRIEND_REQUEST:e=this.userSV.getFriendRequest({id:n,search:s,pagination:r});break;case ig.FRIENDS:e=this.userSV.getFriends({id:n,search:s,pagination:r})}return e.pipe(B(t=>new lp({type:i,response:t})))}))}}return hb([Q_()],t.prototype,"loadFriendList",void 0),t})(),pC=(()=>{class t{constructor(t,e){this.action$=t,this.notifacationSV=e,this.loadList=this.action$.pipe(nC("[Notification] list load"),Qa(t=>this.notifacationSV.getList(t.payload).http().pipe(B(t=>new cg(t)))))}}return hb([Q_()],t.prototype,"loadList",void 0),t})();var fC=nl(sl,[il],(function(t){return function(t){const e={},n=[];let r=!1;for(let s=0;s<t.length;s++){const i=t[s];i.token===Vt&&!0===i.value&&(r=!0),1073741824&i.flags&&n.push(i.token),i.index=s,e[jn(i.token)]=i}return{factory:null,providersByKey:e,providers:t,modules:n,isRoot:r}}([vr(512,ze,Ge,[[8,[rp,eg,s_,w_]],[3,ze],qe]),vr(5120,Is,Mi,[[3,Is]]),vr(4608,Bl,zl,[Is,[2,$l]]),vr(5120,fs,Ti,[Zs]),vr(5120,Os,ks,[]),vr(5120,gn,Pi,[]),vr(5120,mn,Ei,[]),vr(4608,nu,ru,[ua]),vr(6144,_e,null,[nu]),vr(4608,Zc,Qc,[]),vr(5120,Sc,(function(t,e,n,r,s,i,o,l){return[new Wc(t,e,n),new eu(r),new Xc(s,i,o,l)]}),[ua,Zs,Ms,ua,ua,Zc,As,[2,Yc]]),vr(4608,Oc,Oc,[Sc,Zs]),vr(135680,Ec,Ec,[ua]),vr(4608,Rc,Rc,[Oc,Ec,Os]),vr(6144,Xe,null,[Rc]),vr(6144,Pc,null,[Ec]),vr(4608,ni,ni,[Zs]),vr(4608,Dp,Vp,[ua,Ms,Rp]),vr(4608,Fp,Fp,[Dp,Np]),vr(5120,Pp,(function(t,e,n){return[t,new x_(e,n)]}),[Fp,Ut,Md]),vr(4608,Ap,Ap,[]),vr(6144,Tp,null,[Ap]),vr(4608,Ip,Ip,[Tp]),vr(6144,up,null,[Ip]),vr(4608,cp,Up,[up,Ut]),vr(4608,Op,Op,[cp]),vr(5120,yh,Zd,[Md]),vr(4608,Vd,Vd,[]),vr(6144,Nd,null,[Vd]),vr(135680,Fd,Fd,[Md,gi,Ls,Ut,Nd]),vr(4608,Dd,Dd,[]),vr(5120,Ud,Gd,[Md,ha,jd]),vr(5120,Jd,Xd,[Yd]),vr(5120,Ts,(function(t){return[t]}),[Jd]),vr(4608,$g,$g,[]),vr(4608,Mm,Mm,[]),vr(4608,i_,i_,[]),vr(5120,mb,bb,[vb]),vr(1073742336,ca,ca,[]),vr(1024,ke,hu,[]),vr(1024,ai,(function(){return[Bd()]}),[]),vr(512,Yd,Yd,[Ut]),vr(1024,xs,(function(t,e){return[(n=t,Cc("probe",xc),Cc("coreTokens",Object.assign({},wc,(n||[]).reduce((t,e)=>(t[e.name]=e.token,t),{}))),()=>xc),Qd(e)];var n}),[[2,ai],Yd]),vr(512,Ss,Ss,[[2,xs]]),vr(131584,pi,pi,[Zs,As,Ut,ke,ze,Ss]),vr(1073742336,Ai,Ai,[pi]),vr(1073742336,du,du,[[3,du]]),vr(1073742336,jp,jp,[]),vr(1073742336,Lp,Lp,[]),vr(1024,Ld,qd,[[3,Md]]),vr(512,Qu,Xu,[]),vr(512,Ad,Ad,[]),vr(256,jd,{useHash:!0},[]),vr(1024,al,Hd,[ol,[2,cl],jd]),vr(512,ul,ul,[al,ol]),vr(512,Ls,Ls,[]),vr(512,gi,vi,[Ls,[2,mi]]),vr(1024,wd,(function(){return[[{path:"",canActivate:[S_],component:sp},{path:"chat",canActivate:[O_],component:Jy}]]}),[]),vr(1024,Md,Kd,[pi,Qu,Ad,ul,Ut,gi,Ls,wd,jd,[2,Sd],[2,_d]]),vr(1073742336,zd,zd,[[2,Ld],[2,Md]]),vr(1073742336,k_,k_,[]),vr(1073742336,a_,a_,[]),vr(1073742336,Um,Um,[]),vr(1073742336,yb,yb,[]),vr(1073742336,Em,Em,[]),vr(1073742336,Tm,Tm,[]),vr(1073742336,Am,Am,[]),vr(1073742336,P_,P_,[]),vr(131584,of,of,[]),vr(2048,Of,null,[of]),vr(256,af,void 0,[]),vr(1024,cf,Kf,[af]),vr(256,pf,{conversationState:M_,friendState:A_,notificationState:R_},[]),vr(2048,ff,null,[pf]),vr(1024,df,Wf,[Ut,pf,ff]),vr(256,hf,Cf,[]),vr(256,yf,void 0,[]),vr(1024,vf,Gf,[yf]),vr(1024,_f,$f,[vf]),vr(1024,mf,(function(t,e){return[zf(t),Bf(e)]}),[_f,_f]),vr(256,gf,[],[]),vr(1024,bf,Zf,[mf,gf]),vr(1024,uf,xf,[hf,bf]),vr(131584,kf,kf,[Of,cf,df,uf]),vr(2048,Sf,null,[kf]),vr(131584,Pf,Pf,[]),vr(131584,Mf,Mf,[of,Sf,Pf,cf]),vr(2048,Ef,null,[Mf]),vr(512,Af,Af,[Ef,of,kf]),vr(1024,lf,Yf,[[3,Af]]),vr(1073742336,Hf,Hf,[of,Sf,Pf,Af,[2,lf]]),vr(512,rC,rC,[ke,Af]),vr(131584,lC,lC,[rC,Af]),vr(512,eC,eC,[Pf]),vr(512,hC,hC,[eC,ub,Xv]),vr(512,dC,dC,[eC,Qf]),vr(512,pC,pC,[eC,fg]),vr(1024,oC,cC,[hC,dC,pC]),vr(1024,iC,uC,[[3,lC]]),vr(1073742336,aC,aC,[rC,lC,Af,oC,[2,Hf],[2,qf],[2,iC]]),vr(1073742336,sl,sl,[]),vr(256,Vt,!0,[]),vr(256,Rp,"XSRF-TOKEN",[]),vr(256,Np,"X-XSRF-TOKEN",[]),vr(256,o_,{type:"SPINNER"},[]),vr(256,vb,{url:"https://app-chatbox.herokuapp.com/",options:{}},[])])}));(function(){if(Yt)throw new Error("Cannot enable prod mode after platform setup.");Zt=!1})(),uu().bootstrapModuleFactory(fC).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);